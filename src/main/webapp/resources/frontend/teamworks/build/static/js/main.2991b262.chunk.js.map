{"version":3,"sources":["utils/api/ApiUtils.js","utils/api/AuthApiUtils.js","components/forms/InputError.js","components/forms/Input.js","components/forms/SubmitError.js","components/buttons/GradientButton.js","components/spinner/Spinner.js","components/forms/SubmitButton.js","components/Auth/Login/LoginForm.js","components/Auth/Login/Login.js","components/Auth/SignUp/SignUpForm.js","components/buttons/Button.js","components/buttons/LinkButton.js","components/buttons/GoBackButton.js","components/Auth/SignUp/SignUp.js","components/Auth/LoginPage.js","components/profile/ProfilePic.js","components/header/MainTitle.js","components/header/Header.js","components/routing/ScrollToTop.js","utils/api/UserApiUtils.js","context/UserCredentials.js","context/UserCredentialsProvider.js","utils/api/MessageApiUtils.js","components/projects/tags/Circle.js","components/messages/ForwardForm.js","components/messages/ReplyForm.js","utils/api/ToDoApiUtils.js","components/projects/toDos/ToDoCircle.js","components/projects/toDos/ToDo.js","components/messages/FilePreview.js","components/messages/OpenedMessage.js","components/messages/MessagePreview.js","components/messages/MessageList.js","utils/api/TagApiUtils.js","components/settings/milestone/TagTab.js","components/messages/NewMessage/CustomOptionComponent.js","components/messages/NewMessage/NewMessageMultiSelect.js","components/messages/NewMessage/NewMessageText.js","components/messages/NewMessage/NewMessageForm.js","components/messages/NewMessage/NewMessage.js","components/sidebar/Sidebar.js","components/sidebar/InboxSidebarTab.js","components/inboxes/Inboxes.js","utils/api/DepartmentApiUtils.js","utils/api/ProjectApiUtils.js","components/projects/ProjectPicker.js","components/projects/toDos/AddToDoForm.js","utils/api/MilestoneApiUtils.js","components/projects/toDos/MyProjectToDos.js","components/projects/tags/Tag.js","components/projects/tags/ProjectTags.js","components/sidebar/InboxSidebar.js","sections/Section.js","sections/Inbox.js","components/sidebar/SidebarTab.js","components/sidebar/SettingsSidebar.js","components/profile/ProfileHeader.js","utils/api/TeamSettingsApiUtils.js","components/settings/EditableField.js","components/settings/SettingGroup.js","components/settings/team/TeamSettings.js","components/forms/AddUserForm.js","components/settings/users/UserList.js","components/settings/users/UserSettings.js","components/forms/InputAutocompleteUser.js","components/forms/AddForm.js","components/forms/AddDepartmentForm.js","components/forms/AddUserToDepartmentForm.js","components/settings/SidePaneElement.js","components/settings/department/DepartmentMemberList.js","components/settings/department/DepartmentsContainer.js","components/settings/department/DepartmentSettings.js","components/forms/AddMilestoneForm.js","components/forms/AddTagForm.js","components/forms/AddUserToProjectForm.js","components/settings/project/MilestoneList.js","components/settings/project/ProjectMemberList.js","components/settings/project/TagList.js","components/settings/project/ProjectsContainer.js","components/settings/project/ProjectSettings.js","components/settings/users/BelongParticipationList.js","components/settings/users/UserPage.js","components/settings/milestone/TagSelectorStrip.js","components/forms/AddTagToTaskForm.js","components/forms/AssignUserForm.js","components/settings/milestone/TodoDetail.js","components/settings/milestone/TodoTable.js","components/settings/milestone/TodoTableContainer.js","components/settings/milestone/MilestonePage.js","sections/Settings.js","MainPage.js","App.js","reportWebVitals.js","index.js"],"names":["API_URL","ApiUtils","get","url","reloadOnUnauthorized","Promise","resolve","reject","axios","then","res","data","catch","err","response","status","window","location","replace","post","updateObject","patch","delete","AUTH_URL","AuthApiUtils","login","credentials","islogged","signup","signUpProps","check","logout","InputError","error","className","Input","name","type","placeholder","styleClass","value","changeHandler","id","onChange","e","target","style","border","SubmitError","GradientButton","children","disabled","onClick","action","Spinner","dark","red","green","SubmitButton","text","requestError","hasErrors","reducedsize","content","loading","LoginForm","props","errors","Object","values","state","nInputs","keys","inputs","length","some","validateAll","entries","forEach","k","v","validate","field","setState","errorMsg","test","apiRequestHandler","mail","password","onLoginChanged","console","log","submitHandler","event","preventDefault","onSubmit","this","React","Component","Login","to","SignUpForm","teamname","identifier","username","lastname","toLowerCase","includes","x1","y1","x2","y2","Button","withRouter","history","path","gradient","back","reset","onButtonClicked","goBack","push","GoBackButton","darker","anchored","icon","faArrowLeft","color","SignUp","LoginPage","exact","ProfilePic","src","small","picClass","slim","alt","handleLogout","a","reload","Header","nosearchbar","handleSearch","useState","searchWords","setSearchWords","ScrollToTop","pathname","useLocation","useEffect","scrollTo","USER_URL","UserApiUtils","getUserById","userId","getUsers","registerUser","user","updateUser","deleteUser","getCredentials","UserCredentials","createContext","UserCredentialsProvider","isDepartmentManager","isProjectManager","getRoleName","setCredentials","c","departmentId","Number","isTeamManager","dpt","currentDepartments","find","x","projectId","proj","currentProjects","role","finalDate","Provider","MESSAGE_URL","MessageApiUtils","getMyInboxMessages","getMySentMessages","getMyMessagesByTag","tagId","getMyMessagesBySearch","search","getNumberOfNotReadMessages","getNumberOfNoReadMessagesByTag","newMessage","message","replyMessage","repliedMessageId","forwardMessage","forwardList","forwardedMessageId","markMessageAsRead","messageId","Circle","background","ForwardForm","recipientsEmails","forwardedMessage","setOpenMessage","forwardOptions","options","map","styles","customStyles","isMulti","option","provided","width","control","base","borderRadius","borderColor","boxShadow","isFocused","marginBottom","dropdownIndicator","fill","stroke","menu","backgroundColor","multiValue","multiValueLabel","ReplyForm","repliedMessage","strippedSender","email","subject","read","toDoList","tagList","TODO_URL","ToDoApiUtils","getToDos","milestoneId","getMyToDos","getAllMyToDos","addNewPersonalToDo","toDo","markToDoAsDone","toDoId","unmark","createTodo","todo","assignTodo","todoId","assigneeId","updateTitle","setTags","tagIds","deleteTodo","ToDoCircle","isDone","markAsDone","faCheck","ToDo","title","done","blocked","setIsDone","isDoneAnimation","setIsDoneAnimation","setTimeout","hidden","textDecoration","float","display","marginLeft","tag","FilePreview","href","faLongArrowAltDown","OpenedMessage","msg","setForwardOptions","messageOptions","setMessageOptions","mailList","label","fontWeight","strippedRecipients","r","dangerouslySetInnerHTML","__html","faReply","faForward","toDos","tags","attatchments","file","JSON","stringify","MessagePreview","openMessage","setReloadCounters","setRead","isOpen","timestamp","MessageList","messages","messageList","TAGS_URL","TagApiUtils","getTags","getAllMyTags","addNewTag","deleteTag","TagTab","selected","inline","unselectable","light","CustomOptionComponent","tagColor","project","isValue","context","valueContainer","flexDirection","flexWrap","NewMessageMultiSelect","defaultOptions","formatOptionLabel","defaultValue","NewMessageText","form","NewMessageForm","changeFile","files","File","formData","FormData","i","append","Blob","method","headers","To","Subject","Message","ToDos","Tags","ChangeModalNewMessage","mailOptions","toDoOptions","tagOptions","fileRef","createRef","ref","multiple","current","click","NewMessage","setMailOptions","setToDoOptions","setTagOptions","taglist","proyecto","faTimes","size","fontSize","Sidebar","InboxSidebarTab","selectedTab","setSelectedTab","isTag","Inboxes","numberOfInboxMessages","numberOfSentMessages","DEPARTMENT_URL","DepartmentApiUtils","getDepartments","postDepartment","department","updateDepartment","deleteDepartment","getMyDepartments","addUserToDepartment","departmentManager","undefined","removeUserFromDepartment","getMembersFromDepartment","PROJECT_URL","ProjectApiUtils","getProjects","getMyProjects","postProject","updateProject","deleteProject","addUserToProject","projectManager","removeUserFromProject","getMembersFromProject","ProjectPicker","pickedProject","setPickedProject","departmentList","setDepartmentList","projectList","setProjectList","setDepartment","pickedDepartment","setPickedDepartment","opened","setOpened","openOrClose","maxHeight","handlePickDepartment","handlePickProject","AddToDoForm","toDoTitle","setReloadToDos","disable","shouldDisable","faPlus","MILESTONE_URL","MilestoneApiUtils","getMilestones","getMilestoneById","getNextMilestone","createMilestone","milestone","deleteMilestone","MyProjectToDos","setMilestone","setToDoList","reloadToDos","dueFor","Tag","reloadCounters","noOpenedMessages","setNoOpenedMessages","ProjectTags","InboxSidebar","setModalNewMessage","modalNewMessage","Section","Inbox","setSearch","selectedMessages","setSelectedMessages","nInboxMessages","setNInboxMessages","SettingsSidebar","useContext","ProfileHeader","TEAM_SETTINGS_URL","TeamSettingsApiUtils","getTeamName","updateTeam","deleteTeam","EditableField","inputType","smaller","editable","postFunction","fieldName","onUpdated","onOkClicked","actualVal","currentVal","setCurrentVal","setEditing","postObj","setErrored","setActualVal","textInput","penIcon","editing","Boolean","setLoading","copied","setCopied","errored","focus","onKeyDown","key","input","navigator","clipboard","writeText","SettingGroup","descriptionP","danger","description","TeamSettings","teamName","setTeamName","confirm","AddUserForm","isSubmitting","onUserRegistered","autoComplete","UserList","elements","members","member","joinDate","UserSettings","setMembers","fetchMembers","users","sort","y","localeCompare","InputAutocompleteUser","onUserSelected","val","onChangeHandler","getSuggestionValue","suggestion","sortUsers","b","setUsers","selectedUserId","setSelectedUserId","suggestions","setSuggestions","arr","resultError","inputProps","newValue","onBlur","onSuggestionsFetchRequested","inputValue","trim","inputLength","filter","usr","slice","getUserAutocompleteSuggestions","onSuggestionsClearRequested","onSuggestionSelected","renderSuggestion","theme","container","suggestionsList","suggestionHighlighted","suggestionsContainer","AddForm","validateExcludeFields","indexOf","postObject","tooManyErrorText","alreadyExistsErrorText","onAutocomplete","textValue","autocompleteVal","onAutocompleteSelected","submitText","inputChildren","Children","child","isValidElement","cloneElement","processChildren","prevProps","prevState","AddDepartmentForm","onDepartmentAdded","AddUserToDepartment","onUserAdded","selectedUser","useRef","hasAutocomplete","SidePaneElement","highlighted","elementDiv","reducedpadding","DepartmentMemberList","tableHeader","onListUpdated","initialDate","isCredentialInDanger","confirmMessage","onPromoteClicked","onRemoveClicked","DepartmentsContainer","departments","onDepartmentDeleted","onDepartmentAttributeUpdated","myDepartments","selectedIndex","setMyDepartments","updatedDepartment","fetchDepartmentMembers","departmentMembers","setDepartmentMembers","setSelectedIndex","isDeleting","setIsDeleting","SidepaneElements","addUserToDptElement","deleteDepartmentElement","currentDepartment","boundaryElement","topOffset","stickyStyle","transform","DepartmentSettings","retrieveDepartments","dpts","setDepartments","manageDepartments","addNewDepartment","AddMilestoneForm","onMilestoneAdded","AddTagForm","onTagAdded","hslToHex","h","s","l","Math","min","f","n","max","round","toString","padStart","random","AddUserToProject","MilestoneList","projectName","updateCounter","milestones","setMilestones","today","Date","milename","projname","pastText","ProjectMemberList","actionRow","actionStrip","TagList","fetchTags","todosUsingTag","ProjectsContainer","onProjectAdded","onProjectDeleted","departmentIndex","setDepartmentIndex","projectIndex","setProjectIndex","isAddLoading","setIsAddLoading","projectMembers","setProjectMembers","milestoneUpdateCounter","setMilestoneUpdateCounter","tagUpdateCounter","setTagUpdateCounter","generateNewProjectName","projects","filtered","p","onProjectAttributeUpdated","updatedProject","fetchProjectMembers","DepartmentElements","Content","addBtn","ProjectElements","currentProject","AddUserToProjectForm","ProjectSettings","func","func2","all","d","BelongParticipationList","tableHeaderName","tableHead","departmentName","UserPage","match","params","userName","setUser","fetchUser","u","userAttrs","departmentBelongs","projectParticipations","zIndex","alert","TagSelectorStrip","onSelectedIndexChanged","tagElements","AddTagToTaskForm","selectedTagIds","onTagsUpdated","t","selectedOptions","selectedTagIdList","setSelectedTagIdList","submitEnabled","setSubmitEnabled","AssignUserForm","unassignButton","onUserAssigned","unassignButtonVisible","setUnassignButtonVisible","TodoDetail","assigneeDescription","onCollapseClicked","onMarkAsDoneClicked","onNameUpdated","assigneeName","assigneeLastname","TodoTable","selectedTagId","todos","setTodos","addLoading","setAddLoading","fetchTodos","refreshTodos","parse","tagIdList","compareString","donecomp","assigneecomp","compareAssignee","tagcomp","todoDetail","colSpan","idx","splice","TodoTableContainer","setTagList","setSelectedTagId","MilestonePage","milestoneName","fetchMilestone","m","onAttributeUpdated","PATHS","Settings","component","MainPage","App","page","isLoggedIn","setIsLoggedIn","hasLoaded","setHasLoaded","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+aAEMA,EAAU,OAqEDC,EAnEE,CACfC,IAAK,SAACC,GACL,IADUC,IACX,yDACE,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAE3BC,IAAMN,IAAIF,EAAUG,GACnBM,MAAK,SAACC,GAAD,OAASJ,EAAQI,EAAIC,SAC1BC,OAAM,SAACC,GACP,IAAD,EAC+B,OAAzB,UAAAA,EAAIC,gBAAJ,eAAcC,SAAkBX,GAElCY,OAAOC,SAASC,QAAQ,KAE1BX,EAAOM,UAIbM,KAAM,SAAChB,EAAKiB,GACX,IADyBhB,IAC1B,yDACE,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAE3BC,IAAMW,KAAKnB,EAAUG,EAAKiB,GACzBX,MAAK,SAACC,GAAD,OAASJ,EAAQI,EAAIC,SAC1BC,OAAM,SAACC,GACP,IAAD,EAC+B,OAAzB,UAAAA,EAAIC,gBAAJ,eAAcC,SAAkBX,GAElCY,OAAOC,SAASC,QAAQ,KAE1BX,EAAOM,UAIbQ,MAAO,SAAClB,EAAKiB,GACZ,IAD0BhB,IAC3B,yDACE,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAE3BC,IAAMa,MAAMrB,EAAUG,EAAKiB,GAC1BX,MAAK,SAACC,GAAD,OAASJ,EAAQI,EAAIC,SAC1BC,OAAM,SAACC,GACP,IAAD,EAC+B,OAAzB,UAAAA,EAAIC,gBAAJ,eAAcC,SAAkBX,GAElCY,OAAOC,SAASC,QAAQ,KAE1BX,EAAOM,UAIbS,OAAQ,SAACnB,GACR,IADaC,IACd,yDACE,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAE3BC,IAAMc,OAAOtB,EAAUG,GACtBM,MAAK,SAACC,GAAD,OAASJ,EAAQI,EAAIC,SAC1BC,OAAM,SAACC,GACP,IAAD,EAC+B,OAAzB,UAAAA,EAAIC,gBAAJ,eAAcC,SAAkBX,GAElCY,OAAOC,SAASC,QAAQ,KAE1BX,EAAOM,WChETU,EAAW,QAYFC,EAVM,CACnBC,MAAO,SAACC,GAAD,OACLzB,EAASkB,KAAKI,cAAqBG,GAAa,IAClDC,SAAU,kBAAM1B,EAASC,IAAIqB,kBAAwB,IACrDK,OAAQ,SAACC,GAAD,OACN5B,EAASkB,KAAKI,eAAsBM,GAAa,IACnDC,MAAO,kBAAM7B,EAASC,IAAIqB,GAAU,IACpCQ,OAAQ,kBAAM9B,EAASqB,OAAOC,gBAAsB,K,MCRvC,SAASS,EAAT,GAAgC,IAAVC,EAAS,EAATA,MACnC,OAAO,oBAAGC,UAAU,QAAb,cAAuBD,KCAjB,SAASE,EAAT,GAQX,IAPFC,EAOC,EAPDA,KACAC,EAMC,EANDA,KACAC,EAKC,EALDA,YACAC,EAIC,EAJDA,WACAC,EAGC,EAHDA,MACAP,EAEC,EAFDA,MACAQ,EACC,EADDA,cAEA,OACE,qCACE,uBACEH,YAAaA,EACbJ,UAAWK,EACXG,GAAIN,EACJC,KAAMA,EACND,KAAMA,EACNI,MAAOA,EACPG,SAAU,SAACC,GAAD,OAAOH,EAAcL,EAAMQ,EAAEC,OAAOL,MAAOH,IACrDS,MAAO,CACLC,OAAQd,GAAmB,KAAVA,EAAe,oBAAsB,MAG1D,cAACD,EAAD,CAAYC,MAAOA,OCxBV,SAASe,EAAT,GAAiC,IAAVf,EAAS,EAATA,MACpC,OAAO,oBAAGC,UAAU,cAAb,cAA6BD,K,UCKvBgB,EALQ,SAAC,GACvB,IADwBC,EACzB,EADyBA,SAAUC,EACnC,EADmCA,SAAUC,EAC7C,EAD6CA,QAASlB,EACtD,EADsDA,UACtD,EADiEG,KAE7D,OAAO,yBAAQH,UAAS,yBAAoBA,GAAakB,QAASA,EAASC,OAAO,OAAOF,SAAUA,EAA5F,UAAuGD,EAAvG,QCEII,G,MALC,SAAC,GAChB,IADiBC,EAClB,EADkBA,KAAMC,EACxB,EADwBA,IAAKC,EAC7B,EAD6BA,MAAOvB,EACpC,EADoCA,UAEhC,OAAO,qBAAKA,UAAS,kBAAaqB,EAAO,gBAAkB,GAAtC,YAA4CC,EAAM,eAAiB,GAAnE,YAAyEC,EAAQ,iBAAmB,GAApG,YAA0GvB,OCEpH,SAASwB,EAAT,GAAgF,IAAxDC,EAAuD,EAAvDA,KAAMC,EAAiD,EAAjDA,aAAcC,EAAmC,EAAnCA,UAAWC,EAAwB,EAAxBA,YAChEC,EADwF,EAAXC,QACzD,cAAC,EAAD,CAAST,MAAI,IAAMI,EAC3C,OACE,qCACE,uBACA,cAAC,EAAD,CACEzB,UAAY4B,EAAc,GAAK,eAC/BzB,KAAK,SACLc,SAAUU,EAHZ,SAIEE,IACF,cAACf,EAAD,CAAaf,MAAwB,KAAjB2B,GAAuBA,O,ICkHlCK,E,kDA5Hb,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAWRL,UAAY,WACV,IAAMM,EAASC,OAAOC,OAAO,EAAKC,MAAMH,QAClCI,EAAUH,OAAOI,KAAK,EAAKF,MAAMG,QAAQC,OAO/C,OALEP,EAAOO,OAASH,GAEZJ,EAAOQ,MAAK,SAAC/B,GACX,MAAa,KAANA,MAnBE,EAwBnBgC,YAAc,WACZR,OAAOS,QAAQ,EAAKP,MAAMG,QAAQK,SAAQ,SAAClC,GAAO,IAAD,cAChCA,EADgC,GACxCmC,EADwC,KACrCC,EADqC,KAE/C,EAAKC,SAASF,EAAGC,OA3BF,EA+BnBC,SAAW,SAACC,EAAO1C,GACjB,EAAK2C,SAAS,CACZvB,aAAc,KAEhB,EAAKuB,WACL,IAAIC,EAAW,GACf,OAAQF,GACN,IAAK,OACW,KAAV1C,EACF4C,EAAW,gBAEV,kDAAkDC,KAAK7C,KAExD4C,EAAW,gBAEb,MAEF,IAAK,WACW,KAAV5C,EACF4C,EAAW,oBACF5C,EAAMkC,OAAS,IACxBU,EAAW,wBAKjB,EAAKD,SAAS,CACZhB,OAAO,2BAAM,EAAKG,MAAMH,QAAlB,kBAA2Be,EAAQE,OA1D1B,EA8DnB3C,cAAgB,SAACyC,EAAO1C,GACtB,EAAKyC,SAASC,EAAO1C,GACrB,EAAK2C,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,kBAA2BS,EAAQ1C,OAhExC,EAmEnB8C,kBAAoB,SAACC,EAAMC,GACzBhE,EAAaC,MAAM,CAAE8D,OAAMC,aACxB/E,MAAK,SAACC,GACL,EAAKwD,MAAMuB,gBAAe,MAE3B7E,OAAM,SAACqB,GACNyD,QAAQC,IAAI,cACZD,QAAQC,IAAI1D,GACZ,EAAKkD,SAAS,CACZvB,aAAc,uBA5EH,EAiFnBgC,cAAgB,SAACC,GAGf,GAFAA,EAAMC,iBACN,EAAKlB,eACA,EAAKf,YAAa,CACrB,IAAI0B,EAAO,EAAKjB,MAAMG,OAAOc,KACzBC,EAAW,EAAKlB,MAAMG,OAAOe,SAEjC,EAAKF,kBAAkBC,EAAMC,KAtF/B,EAAKlB,MAAQ,CACXG,OAAQ,CACNc,KAAM,GACNC,SAAU,IAEZrB,OAAQ,GACRP,aAAc,IARC,E,qDA6FjB,OACE,uBAAMmC,SAAUC,KAAKJ,cAArB,UACE,uBACA,cAACzD,EAAD,CACEC,KAAK,OACLC,KAAK,OACLC,YAAY,YACZC,WAAW,mBACXN,MAAO+D,KAAK1B,MAAMH,OAAOoB,KACzB9C,cAAeuD,KAAKvD,gBAEtB,uBACA,cAACN,EAAD,CACEC,KAAK,WACLC,KAAK,WACLC,YAAY,WACZC,WAAW,mBACXN,MAAO+D,KAAK1B,MAAMH,OAAOqB,SACzB/C,cAAeuD,KAAKvD,gBAEtB,uBACA,cAACiB,EAAD,CACEC,KAAK,SACLC,aAAcoC,KAAK1B,MAAMV,aACzBC,UAAWmC,KAAKnC,qB,GAtHFoC,IAAMC,WCiBfC,EAjBD,SAAC,GAAwB,IAAtBV,EAAqB,EAArBA,eACf,OACE,qBAAKvD,UAAU,YAAf,SACE,sBAAKA,UAAU,WAAf,UACE,sBAAKA,UAAU,QAAf,UACE,sBAAMA,UAAU,WAAhB,kBACA,sBAAMA,UAAU,YAAhB,sBAEF,cAAC,EAAD,CAAWuD,eAAgBA,IAC3B,cAAC,IAAD,CAAMW,GAAG,UAAUlE,UAAU,UAA7B,wCCiNOmE,G,wDAzNb,WAAYnC,GAAQ,IAAD,8BACjB,cAAMA,IAcRL,UAAY,WACV,IAAMM,EAASC,OAAOC,OAAO,EAAKC,MAAMH,QAClCI,EAAUH,OAAOI,KAAK,EAAKF,MAAMG,QAAQC,OAO/C,OALEP,EAAOO,OAASH,GAEZJ,EAAOQ,MAAK,SAAC/B,GACX,MAAa,KAANA,MAtBE,EA2BnBgC,YAAc,WACZR,OAAOS,QAAQ,EAAKP,MAAMG,QAAQK,SAAQ,SAAClC,GAAO,IAAD,cAChCA,EADgC,GACxCmC,EADwC,KACrCC,EADqC,KAE/C,EAAKC,SAASF,EAAGC,OA9BF,EAkCnBC,SAAW,SAACC,EAAO1C,GACjB,EAAK2C,SAAS,CACZvB,aAAc,KAEhB,IAAIwB,EAAW,GACf,OAAQF,GACN,IAAK,WACW,KAAV1C,EACF4C,EAAW,oBACD,wCAAkCC,KAAK7C,GAExCA,EAAMkC,OAAS,KACxBU,EAAW,wBAFXA,EAAW,mCAIb,MACF,IAAK,aACW,KAAV5C,EACF4C,EAAW,sBACD,qCAA+BC,KAAK7C,GAErCA,EAAMkC,OAAS,KACxBU,EAAW,8BAFXA,EAAW,mCAIb,MACF,IAAK,WACW,KAAV5C,EACF4C,EAAW,oBACD,mCAA6BC,KAAK7C,GAEnCA,EAAMkC,OAAS,KACxBU,EAAW,wBAFXA,EAAW,mCAIb,MACF,IAAK,WACW,KAAV5C,EACF4C,EAAW,oBACD,mCAA6BC,KAAK7C,GAEnCA,EAAMkC,OAAS,MACxBU,EAAW,wBAFXA,EAAW,mCAIb,MACF,IAAK,WACW,KAAV5C,EACF4C,EAAW,oBACF5C,EAAMkC,OAAS,EACxBU,EAAW,2BACF5C,EAAMkC,OAAS,KACxBU,EAAW,4BAKjB,EAAKD,SAAS,CACZhB,OAAO,2BAAM,EAAKG,MAAMH,QAAlB,kBAA2Be,EAAQE,OAxF1B,EA4FnB3C,cAAgB,SAACyC,EAAO1C,GACtB,EAAKyC,SAASC,EAAO1C,GACrB,EAAK2C,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,kBAA2BS,EAAQ1C,OA9FxC,EAiGnB8C,kBAAoB,SAACgB,EAAUC,EAAYC,EAAUC,EAAUjB,GAC7DhE,EAAaI,OAAO,CAClB0E,WACAC,aACAC,WACAC,WACAjB,aAEC/E,MAAK,SAACC,GACLgF,QAAQC,IAAI,mCACZ,IAAMJ,EAAI,UAAMiB,EAASE,eAAf,OAA+BD,EAASC,cAAxC,YAAyDH,GACnE/E,EAAaC,MAAM,CAAE8D,OAAMC,aAAY/E,MAAK,WAC1CO,OAAOC,SAASC,QAAQ,WAG3BN,OAAM,SAACqB,GACFA,EAAMnB,SAASH,KAAKgG,SAAS,cAC/B,EAAKxB,SAAS,CACZvB,aAAc,0DAGhB8B,QAAQC,IAAI,cACZD,QAAQC,IAAI1D,GACZ,EAAKkD,SAAS,CACZvB,aAAc,iCAzHL,EA+HnBgC,cAAgB,SAACC,GAGf,GAFAA,EAAMC,iBACN,EAAKlB,cACA,EAAKf,YAeR6B,QAAQC,IAAI,iCACZD,QAAQC,IAAI,EAAKrB,MAAMH,YAhBF,CACrB,IAAImC,EAAW,EAAKhC,MAAMG,OAAO6B,SAC7BC,EAAa,EAAKjC,MAAMG,OAAO8B,WAC/BC,EAAW,EAAKlC,MAAMG,OAAO+B,SAC7BC,EAAW,EAAKnC,MAAMG,OAAOgC,SAC7BjB,EAAW,EAAKlB,MAAMG,OAAOe,SAEjC,EAAKF,kBACHgB,EACAC,EACAC,EACAC,EACAjB,KA5IJ,EAAKlB,MAAQ,CACXG,OAAQ,CACN6B,SAAU,GACVC,WAAY,GACZC,SAAU,GACVC,SAAU,GACVjB,SAAU,IAEZrB,OAAQ,GACRP,aAAc,IAXC,E,qDAuJjB,OACE,uBAAMmC,SAAUC,KAAKJ,cAArB,UACE,mBAAG1D,UAAU,aAAb,uBACA,cAACC,EAAD,CACEC,KAAK,WACLC,KAAK,OACLC,YAAY,mBACZC,WAAW,mBACXN,MAAO+D,KAAK1B,MAAMH,OAAOmC,SACzB7D,cAAeuD,KAAKvD,gBAEtB,mBAAGP,UAAU,aAAb,kCACA,cAACC,EAAD,CACEC,KAAK,aACLC,KAAK,OACLC,YAAY,QACZC,WAAW,mBACXN,MAAO+D,KAAK1B,MAAMH,OAAOoC,WACzB9D,cAAeuD,KAAKvD,gBAEtB,uBACA,sBAAMP,UAAW,cAAjB,qBAA+C,IAC/C,uBAAMA,UAAW,UAAjB,UACG8D,KAAK1B,MAAMG,OAAO+B,SAASE,cAC3BV,KAAK1B,MAAMG,OAAOgC,SAFrB,IAEgCT,KAAK1B,MAAMG,OAAO8B,cAElD,qBAAKrE,UAAU,OAAf,SACE,sBAAM0E,GAAG,IAAIC,GAAG,IAAIC,GAAG,OAAOC,GAAG,IAAI7E,UAAU,gBAEjD,mBAAGA,UAAU,aAAb,kBACA,cAACC,EAAD,CACEC,KAAK,WACLC,KAAK,OACLC,YAAY,SACZC,WAAW,mBACXN,MAAO+D,KAAK1B,MAAMH,OAAOqC,SACzB/D,cAAeuD,KAAKvD,gBAEtB,mBAAGP,UAAU,aAAb,sBACA,cAACC,EAAD,CACEC,KAAK,WACLC,KAAK,OACLC,YAAY,OACZC,WAAW,mBACXN,MAAO+D,KAAK1B,MAAMH,OAAOsC,SACzBhE,cAAeuD,KAAKvD,gBAEtB,mBAAGP,UAAU,aAAb,sBACA,cAACC,EAAD,CACEC,KAAK,WACLC,KAAK,WACLC,YAAY,WACZC,WAAW,mBACXN,MAAO+D,KAAK1B,MAAMH,OAAOqB,SACzB/C,cAAeuD,KAAKvD,gBAEtB,cAACiB,EAAD,CACEC,KAAK,UACLC,aAAcoC,KAAK1B,MAAMV,aACzBC,UAAWmC,KAAKnC,qB,GAnNDoC,IAAMC,Y,eCOhBc,G,YATA,SAAC,GACf,IADgB9D,EACjB,EADiBA,SAAUhB,EAC3B,EAD2BA,UAAWkB,EACtC,EADsCA,QAElC,OACI,wBAAQlB,UAAS,iBAAYA,GAAakB,QAASA,EAASC,OAAO,OAAnE,SACKH,MCoBE+D,eAvBI,SAAC,GACnB,IADoBC,EACrB,EADqBA,QAASC,EAC9B,EAD8BA,KAAMjE,EACpC,EADoCA,SAAUhB,EAC9C,EAD8CA,UAAWkF,EACzD,EADyDA,SAAUC,EACnE,EADmEA,KACnE,EADyEC,MAErE,SAASC,IAEDF,EAEAH,EAAQM,SAGRN,EAAQO,KAAKN,GAIrB,OAAIC,EAEO,cAAC,EAAD,CAAgBlF,UAAWA,EAAWkB,QAASmE,EAA/C,SAAiErE,IAIjE,cAAC,EAAD,CAAQhB,UAAWA,EAAWkB,QAASmE,EAAvC,SAAyDrE,OCNzDwE,EAZM,SAAC,GACtB,EADwBP,KACvB,IAD6BQ,EAC9B,EAD8BA,OAAQC,EACtC,EADsCA,SACtC,EADgDV,QAE5C,OACI,cAAC,EAAD,CAAYhF,UAAS,iBAAYyF,EAAS,iBAAmB,GAAxC,YAA8CC,EAAW,mBAAqB,IAAMP,MAAI,EAA7G,SACI,uBAAMnF,UAAU,aAAhB,UACI,cAAC,IAAD,CAAiB2F,KAAMC,IAAahF,MAAO,CAAEiF,MAAO,WAAa7F,UAAU,cAD/E,gBCHG,SAAS8F,IACtB,OACE,qBAAK9F,UAAU,YAAf,SACE,sBAAKA,UAAU,YAAf,UACE,cAAC,EAAD,CAAciF,KAAK,WACnB,cAAC,EAAD,SCNR,IAoBec,EApBG,SAAC,GAClB,IADoBxC,EACrB,EADqBA,eAEnB,OACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOyC,OAAK,EAACf,KAAK,IAAlB,SACE,cAAC,EAAD,CAAO1B,eAAgBA,MAEzB,cAAC,IAAD,CAAO0B,KAAK,UAAZ,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,IAAZ,SACE,cAAC,IAAD,CAAUf,GAAG,c,iCCPR+B,G,MARI,SAAC,GACnB,IADoBC,EACrB,EADqBA,IAAKlG,EAC1B,EAD0BA,UAAWmG,EACrC,EADqCA,MAE7BC,GADR,EAD4CC,KAEzBF,EAAQ,mBAAqB,cAC5C,OACI,qBAAKnG,UAAS,UAAKoG,EAAL,mBAAiBpG,QAAjB,IAAiBA,IAAW,IAAMkG,IAAKA,EAAKI,IAAI,cCQvDvB,G,MAAAA,aATG,SAAC,GAAe,IAAdC,EAAa,EAAbA,QAClB,OACE,sBAAKhF,UAAU,cAAckB,QAAU,kBAAM8D,EAAQO,KAAK,MAA1D,UACI,sBAAMvF,UAAU,WAAhB,kBACA,sBAAMA,UAAU,YAAhB,0BCAFuG,EAAY,uCAAG,WAAM5C,GAAN,SAAA6C,EAAA,sDACnBlH,EAAaO,SACbf,OAAOC,SAAS0H,QAAO,GAFJ,2CAAH,sDA6DHC,EAxDA,SAAC,GAAkC,IAC5C7E,EADY8E,EAA+B,EAA/BA,YAAaC,EAAkB,EAAlBA,aAAkB,EAETC,mBAAS,IAFA,mBAExCC,EAFwC,KAE3BC,EAF2B,KA6C/C,OA7BElF,EADE8E,EAEA,cAAC,EAAD,CAAY3G,UAAU,6BAA6BiF,KAAK,IAAxD,yBAMA,qCACE,uBAAOjF,UAAU,kBAAjB,SACE,sBAAM6D,SAhBQ,SAACnD,GACrBA,EAAEkD,iBACFgD,EAAaE,IAcP,SACE,uBACE9G,UAAU,cACVS,SAvBU,SAACC,GACrBqG,EAAerG,EAAEC,OAAOL,QAuBdF,YAAY,4BAIlB,cAAC,EAAD,CACEJ,UAAU,6BACViF,KAAK,YAFP,4BAaJ,sBAAKjF,UAAU,SAAf,UACE,cAAC,EAAD,IACC6B,EACD,cAAC,EAAD,CAAQ7B,UAAU,iCAAiCkB,QAASqF,EAA5D,SACE,qBAAKvG,UAAU,aAAakG,IAAI,6oECnDzBc,EAVK,WAAO,IACjBC,EAAaC,cAAbD,SAMR,OAJAE,qBAAU,WACRrI,OAAOsI,SAAS,EAAG,KAClB,CAACH,IAEG,MCTHI,EAAW,QAYFC,EATM,CACnBC,YAAa,SAACC,GAAD,OAAYzJ,EAASC,IAAIqJ,gBAAwBG,IAC9DC,SAAU,kBAAM1J,EAASC,IAJT,WAKhB0J,aAAc,SAACC,GAAD,OAAU5J,EAASkB,KAAKoI,eAAsBM,IAC5DC,WAAY,SAACD,GAAD,OAAU5J,EAASkB,KAAKoI,eAAsBM,IAC1DE,WAAY,SAACL,GAAD,OAAYzJ,EAASqB,OAAOiI,EAAQ,yBAAqBG,KACrEM,eAAgB,kBAAM/J,EAASC,IAAIqJ,uBCNtBU,EAFShE,IAAMiE,cAAc,ICmE7BC,EAhEiB,SAAC,GAChC,IADkCjH,EACnC,EADmCA,SACnC,EAC0C6F,mBAAS,CAC3CqB,oBAAqB,kBAAM,GAC3BC,iBAAkB,kBAAM,GACxBC,YAAa,iBAAM,YAJ3B,mBACW5I,EADX,KACwB6I,EADxB,KAwDI,OA7CAlB,qBAAU,WAENG,EAAaQ,iBACRvJ,MAAK,SAAA+J,GAEFA,EAAEJ,oBAAsB,SAACK,GACxB,IAAD,EAEI,GADAA,EAAeC,OAAOD,GAClBD,EAAEG,cACF,OAAO,EACX,IAAMC,EAAG,UAAGJ,EAAEK,0BAAL,aAAG,EAAsBC,MAAK,SAAAC,GAAC,OAAIA,EAAErI,KAAO+H,KACrD,QAAKG,GAEEA,EAAIR,qBAEfI,EAAEH,iBAAmB,SAACW,EAAWP,GAChC,IAAD,EAGI,GAFAO,EAAYN,OAAOM,GACnBP,EAAeC,OAAOD,GAClBD,EAAEG,cACF,OAAO,EACX,GAAIF,GAAgBD,EAAEJ,oBAAoBK,GACtC,OAAO,EACX,IAAMQ,EAAI,UAAGT,EAAEU,uBAAL,aAAG,EAAmBJ,MAAK,SAAAC,GAAC,OAAIA,EAAErI,KAAOsI,KACnD,QAAKC,GAEEA,EAAKZ,kBAEhBG,EAAEF,YAAc,WACf,IAAD,IACQa,EAAO,SAOX,OANIX,EAAEG,cACFQ,EAAO,gBACN,UAAIX,EAAEK,0BAAN,aAAI,EAAsBlG,MAAK,SAAAoG,GAAC,OAAIA,EAAEX,qBAAuC,OAAhBW,EAAEK,cAChED,EAAO,sBACN,UAAIX,EAAEU,uBAAN,aAAI,EAAmBvG,MAAK,SAAAoG,GAAC,OAAIA,EAAEV,kBAAoC,OAAhBU,EAAEK,gBAC1DD,EAAO,mBACJA,GAEXzF,QAAQC,IAAI6E,GACZD,EAAeC,MAElB5J,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,QACjC,IAGC,cAAC,EAAgBwK,SAAjB,CAA0B7I,MAAOd,EAAjC,SACKwB,KC/DPoI,EAAc,WA8BLC,EA5BS,CAEtBC,mBAAoB,kBAAMvL,EAASC,IAAIoL,mBACvCG,kBAAmB,kBAAMxL,EAASC,IAAIoL,kBACtCI,mBAAoB,SAACC,GAAD,OAClB1L,EAASC,IAAIoL,wBAAgCK,IAC/CC,sBAAuB,SAACC,GAAD,OACrB5L,EAASC,IAAIoL,4BAAoCO,IACnDC,2BAA4B,kBAAM7L,EAASC,IAAIoL,oBAC/CS,+BAAgC,SAACJ,GAAD,OAC9B1L,EAASC,IAAIoL,8BAAsCK,IAGrDK,WAAY,SAACC,GAAD,OAAahM,EAASkB,KAAKmK,EAAaW,IACpDC,aAAc,SAACD,EAASE,GAAV,OACZlM,EAASkB,KACPmK,mCAA2Ca,EAC3CF,IAEJG,eAAgB,SAACC,EAAaC,GAAd,OACdrM,EAASkB,KACPmK,uCAA+CgB,EAC/CD,IAEJE,kBAAmB,SAACC,GAAD,OACjBvM,EAASkB,KAAKmK,iCAAyCkB,KCjB5CC,G,MARA,SAAC,GAA0B,IAAxB1E,EAAuB,EAAvBA,MAAO7F,EAAgB,EAAhBA,UACvB,OACE,mCACE,qBAAKA,UAAS,iBAAYA,GAAaY,MAAO,CAAE4J,WAAY3E,S,SCmHnD4E,G,kDAnHb,WAAYzI,GAAQ,IAAD,8BACjB,cAAMA,IAcRL,UAAY,WACV,IAAMM,EAASC,OAAOC,OAAO,EAAKC,MAAMH,QAClCI,EAAUH,OAAOI,KAAK,EAAKF,MAAMG,QAAQC,OAO/C,OALEP,EAAOO,OAASH,GAEZJ,EAAOQ,MAAK,SAAC/B,GACX,MAAa,KAANA,MAtBE,EA2BnBgC,YAAc,WACZR,OAAOS,QAAQ,EAAKP,MAAMG,QAAQK,SAAQ,SAAClC,GAAO,IAAD,cAChCA,EADgC,GACxCmC,EADwC,KACrCC,EADqC,KAE/C,EAAKC,SAASF,EAAGC,OA9BF,EAkCnBC,SAAW,SAACC,EAAO1C,GACjB,EAAK2C,SAAS,CACZvB,aAAc,KAEhB,IAAIwB,EAAW,GACf,OAAQF,GACN,IAAK,mBACC1C,IAAU,KAAI4C,EAAW,uBAIjC,EAAKD,SAAS,CACZhB,OAAO,2BAAM,EAAKG,MAAMH,QAAlB,kBAA2Be,EAAQE,OA9C1B,EAkDnB3C,cAAgB,SAACyC,EAAO1C,GACtB,EAAKyC,SAASC,EAAO1C,GACrB,EAAK2C,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,kBAA2BS,EAAQ1C,OApDxC,EAuDnB8C,kBAAoB,SAACsH,GACnBlH,QAAQC,IAAI,kBACZD,QAAQC,IAAIiH,GAEZrB,EAAgBa,eAAeQ,EAAkB,EAAKC,iBAAiBnK,IACpEjC,MAAK,WACJiF,QAAQC,IAAI,sBAEb/E,OAAM,SAACqB,GACNyD,QAAQC,IAAI,6CAhEC,EAoEnBC,cAAgB,SAACC,GAGf,GAFAA,EAAMC,iBACN,EAAKlB,cACA,EAAKf,YAOR6B,QAAQC,IAAI,iCACZD,QAAQC,IAAI,EAAKrB,MAAMH,YARF,CACrB,IAAIyI,EAAmB,EAAKtI,MAAMG,OAAOmI,iBAEzC,EAAKtH,kBAAkBsH,GACvB,EAAKzH,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,IAA0BmI,iBAAkB,OAClE,EAAKE,eAAe,MA1EtB,EAAKxI,MAAQ,CACXG,OAAQ,CACNmI,iBAAkB,IAEpBzI,OAAQ,GACRP,aAAc,IAEhB,EAAKiJ,iBAAmB3I,EAAM2I,iBAC9B,EAAKE,eAAiB7I,EAAM6I,eAC5B,EAAKD,eAAiB5I,EAAM4I,eAXX,E,qDAmFT,IAAD,OACP,OACE,uBAAM/G,SAAUC,KAAKJ,cAArB,UACE,qBAAK1D,UAAU,kBAAf,SACE,cAAC,KAAD,CACE8K,QAAShH,KAAK+G,eACdpK,SAAU,SAACC,GACT,EAAKH,cACH,mBACAG,EAAEqK,KAAI,SAAClC,GACL,OAAOA,EAAEvI,WAIf0K,OAAQC,GACR7K,YAAa,wBACb8K,SAAO,MAGX,qBAAKlL,UAAU,oBAAf,SACE,cAAC,EAAD,CACEkB,QAAS4C,KAAKJ,cACd1D,UAAU,8BAFZ,2B,GAxGgB+D,IAAMC,WAsH1BiH,GAAe,CACnBE,OAAQ,SAACC,EAAUhJ,GAAX,mBAAC,eACJgJ,GADG,IAENvF,MAAO,UACPwF,MAAO,OAETC,QAAS,SAACC,EAAMnJ,GAAP,mBAAC,eACLmJ,GADI,IAEPf,WAAY,UACZgB,aAAc,EAEdC,YAAa,0BAEbC,WAAWtJ,EAAMuJ,UAAY,MAC7BC,aAAc,MAGhBC,kBAAmB,SAACN,GAAD,mBAAC,eACfA,GADc,IAEjBO,KAAM,UACNC,OAAQ,aAEVC,KAAM,SAACT,GAAD,mBAAC,eACFA,GADC,IAEJU,gBAAiB,aAEnBC,WAAY,SAACX,GAAD,mBAAC,eACRA,GADO,IAEVU,gBAAiB,aAEnBE,gBAAiB,SAACZ,GAAD,mBAAC,eACbA,GADY,IAEf1F,MAAO,YClCIuG,G,kDAnHb,WAAYpK,GAAQ,IAAD,8BACjB,cAAMA,IAYRL,UAAY,WACV,IAAMM,EAASC,OAAOC,OAAO,EAAKC,MAAMH,QAClCI,EAAUH,OAAOI,KAAK,EAAKF,MAAMG,QAAQC,OAO/C,OALEP,EAAOO,OAASH,GAEZJ,EAAOQ,MAAK,SAAC/B,GACX,MAAa,KAANA,MApBE,EAyBnBgC,YAAc,WACZR,OAAOS,QAAQ,EAAKP,MAAMG,QAAQK,SAAQ,SAAClC,GAAO,IAAD,cAChCA,EADgC,GACxCmC,EADwC,KACrCC,EADqC,KAE/C,EAAKC,SAASF,EAAGC,OA5BF,EAgCnBC,SAAW,SAACC,EAAO1C,GACjB,EAAK2C,SAAS,CACZvB,aAAc,KAEhB,IAAIwB,EAAW,GACf,OAAQF,GACN,IAAK,OACW,KAAV1C,IAAc4C,EAAW,iBAIjC,EAAKD,SAAS,CACZhB,OAAO,2BAAM,EAAKG,MAAMH,QAAlB,kBAA2Be,EAAQE,OA5C1B,EAgDnB3C,cAAgB,SAACyC,EAAO1C,GACtB,EAAKyC,SAASC,EAAO1C,GACrB,EAAK2C,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,kBAA2BS,EAAQ1C,OAlDxC,EAqDnB8C,kBAAoB,SAAC3B,GACnB,IAAIsI,EAAU,CACZW,iBAAkB,CAAC,EAAK2B,eAAeC,eAAeC,OACtDC,QAAS,OAAS,EAAKH,eAAeG,QACtC/K,KAAMA,EACNgL,MAAM,EACNC,SAAU,GACVC,QAAS,IAEXnJ,QAAQC,IAAI,aACZD,QAAQC,IAAIsG,GACZV,EAAgBW,aAAaD,EAAS,EAAKsC,eAAe7L,IACvDjC,MAAK,WACJiF,QAAQC,IAAI,sBAEb/E,OAAM,SAACqB,GACNyD,QAAQC,IAAI,8CArEC,EAyEnBC,cAAgB,SAACC,GAGf,GAFAA,EAAMC,iBACN,EAAKlB,cACA,EAAKf,YAOR6B,QAAQC,IAAI,iCACZD,QAAQC,IAAI,EAAKrB,MAAMH,YARF,CACrB,IAAIR,EAAO,EAAKW,MAAMG,OAAOd,KAE7B,EAAK2B,kBAAkB3B,GACvB,EAAKwB,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,IAA0Bd,KAAM,OACtD,EAAKmJ,eAAe,MA/EtB,EAAKxI,MAAQ,CACXG,OAAQ,CACNd,KAAM,IAERQ,OAAQ,GACRP,aAAc,IAEhB,EAAK2K,eAAiBrK,EAAMqK,eAC5B,EAAKzB,eAAiB5I,EAAM4I,eAVX,E,qDAyFjB,OACE,uBAAM/G,SAAUC,KAAKJ,cAArB,UACE,qBAAK1D,UAAU,kBAAf,SACE,cAACC,EAAD,CACEC,KAAK,OACLC,KAAK,OACLG,MAAOwD,KAAK1B,MAAMG,OAAOd,KACzBrB,YAAY,mBACZC,WAAW,mBACXN,MAAO+D,KAAK1B,MAAMH,OAAOR,KACzBlB,cAAeuD,KAAKvD,kBAGxB,qBAAKP,UAAU,oBAAf,SACE,cAAC,EAAD,CACEkB,QAAS4C,KAAKJ,cACd1D,UAAU,8BAFZ,4B,GAxGc+D,IAAMC,WCJxB4I,GAAW,SAoBFC,GAlBM,CAEnBC,SAAU,SAACC,GAAD,OACRhP,EAASC,IAAI4O,sBAA6BG,IAC5CC,WAAY,SAACD,GAAD,OACVhP,EAASC,IAAI4O,2BAAkCG,IACjDE,cAAe,kBAAMlP,EAASC,IAAI4O,oBAClCM,mBAAoB,SAACH,EAAaI,GAAd,OAClBpP,EAASkB,KAAK2N,kCAAyCG,EAAaI,IACtEC,eAAgB,SAACC,EAAQC,GAAT,OAAoBvP,EAASkB,KAAK2N,GAAQ,6BAAyBU,EAAO,EAAE,EAAlC,mBAA8CD,KACxGE,WAAY,SAACR,EAAaS,GAAd,OAAuBzP,EAASkB,KAAK2N,6BAAoCG,EAAaS,IAClGC,WAAY,SAACV,EAAaW,EAAQC,GAAtB,OAAqC5P,EAASkB,KAAK2N,GAAQ,yBAAqBc,EAArB,wBAA2CX,EAA3C,uBAAqEY,KAC5IC,YAAa,SAACb,EAAaS,GAAd,OAAuBzP,EAASkB,KAAK2N,GAAQ,8BAA0BY,EAAKhN,GAA/B,wBAAiDuM,GAAeS,IAC1HK,QAAS,SAACd,EAAaW,EAAQI,GAAtB,OAAiC/P,EAASkB,KAAK2N,GAAQ,0BAAsBc,EAAtB,wBAA4CX,GAAee,IAC3HC,WAAY,SAAChB,EAAaW,GAAd,OAAyB3P,EAASqB,OAAOwN,GAAQ,8BAA0BG,EAA1B,mBAAgDW,MCHhGM,GAVI,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,OAAQC,EAAiB,EAAjBA,WAC5B,OACE,mCACE,wBAAQlO,UAAU,aAAakB,QAASgN,EAAxC,SACGD,GAAU,cAAC,IAAD,CAAiBtI,KAAMwI,WCgD3BC,GAnDF,SAAC,GAA2C,IAAzC5N,EAAwC,EAAxCA,GAAImM,EAAoC,EAApCA,QAAS0B,EAA2B,EAA3BA,MAAOC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,QAAc,EAC1B1H,mBAASyH,GADiB,mBAC/CL,EAD+C,KACvCO,EADuC,OAER3H,mBAASyH,GAFD,mBAE/CG,EAF+C,KAE9BC,EAF8B,KAIhDR,EAAa,WACZK,IACHG,GAAmB,GACnBlL,QAAQC,IAAI,4BAEZkL,YACE,kBACE9B,GAAaO,eAAe5M,GACzBjC,MAAK,WACJiQ,GAAU,MAEX9P,OAAM,SAACqB,GACNyD,QAAQC,IAAI,uCACZiL,GAAmB,QAEzB,OAKN,OACE,sBACE1O,UAAU,UACVkB,QAASgN,EACTU,QAAQL,GAAkBN,EAH5B,UAKE,cAAC,GAAD,CAAYA,OAAQQ,EAAiBP,WAAYA,IAAe,IAChE,uBACEtN,MAAO,CAAEiO,eAAgBJ,EAAkB,eAAiB,QAD9D,UAGGJ,EAAO,OAEV,qBACEzN,MAAO,CACLkO,MAAOP,EAAU,GAAK,QACtBQ,QAASR,EAAU,eAAiB,GACpCS,WAAY,QAJhB,SAOGrC,EAAQ5B,KAAI,SAACkE,GACZ,OAAO,cAAC,EAAD,CAAwBpJ,MAAOoJ,EAAIpJ,OAAtBoJ,EAAIpJ,gBChCnBqJ,GAXK,SAACjR,GAEnB,OADAuF,QAAQC,IAAIxF,EAAIA,KAEd,mBAAGkR,KAAM,GAAKlR,EAAIA,IAAK0C,OAAO,SAA9B,SACE,qBAAKX,UAAU,cAAckB,QAAS,KAAtC,SACE,cAAC,IAAD,CAAiByE,KAAMyJ,WC2FhBC,GAzFO,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,IAAK1E,EAAqB,EAArBA,eAAqB,EACL/D,mBAAS,IADJ,mBAC1CgE,EAD0C,KAC1B0E,EAD0B,OAEL1I,mBAAS,IAFJ,mBAE1C2I,EAF0C,KAE1BC,EAF0B,KAmBjD,OAhBAtI,qBAAU,WACe,YAAnBqI,GACFlI,EAAaG,WACVlJ,MAAK,SAACC,GACLgF,QAAQC,IAAI,sBACZ,IAAIiM,EAAWlR,EAAIuM,KAAI,SAACpD,GACtB,MAAO,CAAEgI,MAAOhI,EAAKzH,KAAO,MAAQyH,EAAK4E,MAAOjM,MAAOqH,EAAK4E,UAE9DgD,EAAkBG,GAClBlM,QAAQC,IAAIiM,MAEbhR,OAAM,SAACqB,GACNyD,QAAQC,IAAI,0CAEjB,CAAC+L,IAGF,qCACE,qBAAKxP,UAAU,mBAAf,SACE,uBAAMY,MAAO,CAAEgP,WAAY,QAA3B,oBACU,IACPN,EAAIO,mBAAmB9E,KAAI,SAAC+E,GAC3B,OAAO,kCAAkBA,EAAE5P,KAApB,MAAQ4P,EAAE5P,cAIvB,qBACEF,UAAU,iBACV+P,wBAAyB,CAAEC,OAAQV,EAAI7N,KAAKzC,QAAQ,MAAO,WAE7D,sBAAKgB,UAAU,oBAAf,UACE,cAAC,EAAD,CACEkB,QAAS,WAEHuO,EADe,UAAnBD,EACsB,GACA,UAExBxP,UAAU,yBANZ,SAQE,cAAC,IAAD,CAAiB2F,KAAMsK,QAEzB,cAAC,EAAD,CACE/O,QAAS,WAEHuO,EADe,YAAnBD,EACsB,GACA,YAExBxP,UAAU,wBANZ,SAQE,cAAC,IAAD,CAAiB2F,KAAMuK,WAG3B,qBAAKlQ,UAAU,kBAAf,SACGsP,EAAIa,MAAMpF,KAAI,SAACoC,GACd,OACE,cAAC,GAAD,CAEE3M,GAAI2M,EAAK3M,GACTmM,QAASQ,EAAKiD,KACd/B,MAAOlB,EAAKkB,MACZC,KAAMnB,EAAKmB,KACXC,SAAS,GALJpB,EAAK3M,SAUlB,qBAAKR,UAAU,kBAAf,SACGsP,EAAIe,aAAatF,KAAI,SAACuF,GACrB,OAAO,cAAC,GAAD,CAA2B9P,GAAI8P,EAAK9P,GAAIvC,IAAKqS,EAAKrS,KAAhCqS,EAAK9P,SAGd,UAAnBgP,GACC,cAAC,GAAD,CAAWnD,eAAgBiD,EAAK1E,eAAgBA,IAE9B,YAAnB4E,GACC,cAAC,GAAD,CAEE3E,eAAgBA,EAChBF,iBAAkB2E,EAClB1E,eAAgBA,GAHX2F,KAAKC,UAAU3F,QClBf4F,GAtEQ,SAAC,GAKjB,IAJLnB,EAII,EAJJA,IACAoB,EAGI,EAHJA,YACA9F,EAEI,EAFJA,eACA+F,EACI,EADJA,kBACI,EACoB9J,qBADpB,mBACG4F,EADH,KACSmE,EADT,KAGJzJ,qBAAU,WACRyJ,EAAQtB,EAAI7C,QACX,CAAC6C,IAEJ,IAAMuB,EAAS,WACb,OAAOH,IAAgBpB,EAAI9O,IAiB7B,OACE,qCACE,sBACER,UACE6Q,IACI,kDACApE,EACA,gDACA,sBAENvL,QAxBkB,WACtB2P,IAAWjG,EAAe,IAAMA,EAAe0E,EAAI9O,IACnDmQ,GAAkB,GACblE,GACHpD,EAAgBgB,kBAAkBiF,EAAI9O,IACnCjC,MAAK,SAACC,GACLoS,GAAQ,MAETlS,OAAM,SAACqB,GACNyD,QAAQC,IAAI,mDAOhB,UAUE,qBAAKzD,UAAU,cACf,qBAAIA,UAAU,WAAd,UACGsP,EAAIhD,eAAepM,KAAOoP,EAAIhD,eAAepM,KAAO,UAAW,IAC/DoP,EAAIhD,eAAe/H,SAChB+K,EAAIhD,eAAe/H,SACnB,YAAa,IAJnB,IAKI,OAEJ,qBAAIvE,UAAU,aAAd,cAA6BsP,EAAI9C,QAAjC,OAEA,oBAAIxM,UAAU,cAAcY,MAAO,CAAEkO,MAAO,SAA5C,SACGQ,EAAIwB,YAEP,qBAAK9Q,UAAU,UAAUY,MAAO,CAAEkO,MAAO,SAAzC,SACGQ,EAAIc,KAAKrF,KAAI,SAACkE,GACb,OAAO,cAAC,EAAD,CAAqBpJ,MAAOoJ,EAAIpJ,OAAnBoJ,EAAIzO,YAI9B,qBACER,UAAW6Q,IAAW,aAAe,mCADvC,SAGE,cAAC,GAAD,CAA4BvB,IAAKA,EAAK1E,eAAgBA,GAAlC0E,EAAI9O,UCnCjBuQ,I,OA5BK,SAAC,GAAqC,IAAnCJ,EAAkC,EAAlCA,kBAAmBK,EAAe,EAAfA,SAAe,EACjBnK,mBAAS,IADQ,mBAChD6J,EADgD,KACnC9F,EADmC,KAIvD,IAAKoG,EAEH,OAAO,cAAC,EAAD,IAGT,IAAIC,EAAcD,EAASjG,KAAI,SAACuE,GAC9B,OACE,cAAC,GAAD,CAEEA,IAAKA,EACLoB,YAAaA,EACb9F,eAAgBA,EAChB+F,kBAAmBA,GAJdrB,EAAI9O,OASf,OACE,qBAAKR,UAAU,mBAAf,SACGiR,MC1BDC,GAAW,QAYFC,GAVK,CAElBC,QAAS,SAACtI,GAAD,OAAe/K,EAASC,IAAIkT,mBAA2BpI,IAChEuI,aAAc,kBAAMtT,EAASC,IAAIkT,mBACjCI,UAAW,SAACxI,EAAWmG,GAAZ,OACTlR,EAASkB,KAAKiS,0BAAkCpI,EAAWmG,IAC7DsC,UAAW,SAACzI,EAAWW,GAAZ,OACT1L,EAASqB,OAAO8R,GAAQ,4BAAwBpI,EAAxB,kBAA2CW,MCkBxD+H,GA3BA,SAAC,GACf,IADiBxQ,EAClB,EADkBA,SAAU6E,EAC5B,EAD4BA,MAAO4L,EACnC,EADmCA,SAAUvQ,EAC7C,EAD6CA,QAASwQ,EACtD,EADsDA,OAAQC,EAC9D,EAD8DA,aAAcC,EAC5E,EAD4EA,MAEpEvR,EAAU,iBAAauR,EAAQ,gBAAkB,GAAvC,YAA6CH,EAAW,mBAAqB,GAA7E,YAAmFC,EAAS,iBAAmB,GAA/G,YAAqHC,EAAe,uBAAyB,IAC3K,OAAI9L,EAGI,sBACI7F,UAAWK,EACXa,QAASA,EAFb,UAGI,cAAC,EAAD,CACIlB,UAAU,iBACV6F,MAAO4L,EAAW,UAAY5L,IACjC7E,KAML,qBACIhB,UAAWK,EACXa,QAASA,EAFb,SAGKF,KCIF6Q,GAzBe,SAAC,EAAD,GAC9B,EADiCvR,MAChC,IADuCqP,EACxC,EADwCA,MAAOmC,EAC/C,EAD+CA,SAAUC,EACzD,EADyDA,QAEjDC,EAAsB,UAD9B,EADqEC,QAG7DpM,EAAQmM,EAAU,OAAS,UAC/B,GAAIF,EACJ,CACI,IAAIrQ,EAAOkO,EAGX,OAFIoC,IACAtQ,GAAI,iBAASsQ,IAEb,qBAAKnR,MAAO,CAAEmO,QAAS,QAAvB,SACI,8BAAK,cAAC,GAAD,CAAQ6C,MAAOI,EAASN,QAAM,EAACC,cAAY,EAAC9L,MAAOiM,EAAnD,SAA8DrQ,QAK3E,OACI,qBAAKb,MAAO,CAAEmO,QAAS,QAAvB,SACI,qBAAKnO,MAAO,CAAEiF,SAAd,SAAwB8J,OCwBlC1E,GAAe,CACnBE,OAAQ,SAACC,EAAUhJ,GAAX,mBAAC,eACJgJ,GADG,IAENvF,MAAO,UACP2E,WAAYpI,EAAMuJ,UAAY,QAAU,QAE1CL,QAAS,SAACC,EAAMnJ,GAAP,mBAAC,eACLmJ,GADI,IAEPf,WAAY,UACZgB,aAAc,EAEdC,YAAa,0BAEbC,WAAWtJ,EAAMuJ,UAAY,MAC7BC,aAAc,MAGhBC,kBAAmB,SAACN,GAAD,mBAAC,eACfA,GADc,IAEjBO,KAAM,UACNC,OAAQ,aAEVC,KAAM,SAACT,GAAD,mBAAC,eACFA,GADC,IAEJU,gBAAiB,aAEnBC,WAAY,SAACX,GAAD,mBAAC,eACRA,GADO,IAEVU,gBAAiB,aAEnBiG,eAAgB,SAAC3G,GAAD,mBAAC,eACZA,GADW,IAEd4G,cAAe,MACfC,SAAU,YAEZjG,gBAAiB,SAACZ,GAAD,mBAAC,eACbA,GADY,IAEf1F,MAAO,cAIIwM,GAhFe,SAAC,GAQxB,IAPLnS,EAOI,EAPJA,KACAE,EAMI,EANJA,YACA0K,EAKI,EALJA,QACAwH,EAII,EAJJA,eACA/R,EAGI,EAHJA,cACAP,EAEI,EAFJA,UACAD,EACI,EADJA,MAEA,OACE,sBACEC,UAAS,yBAAoBA,GAC7BY,MAAO,CACLgL,aAAc,OAHlB,UAME,mBAAG5L,UAAU,cAAb,SAA4BE,IAC5B,cAAC,KAAD,CACEqS,kBAAmBV,GACnB/G,QAASA,EACT0H,aAAcF,EACd7R,SAAU,SAACC,GACTH,EACEL,EACAQ,EAAEqK,KAAI,SAAClC,GACL,OAAOA,EAAEvI,WAIf0K,OAAQC,GACR/K,KAAMA,EACNE,YAAaA,EACb8K,SAAO,IAERnL,GAAS,cAACD,EAAD,CAAYC,MAAOA,QCpCpB,SAAS0S,GAAT,GAAyD,IAA/BvS,EAA8B,EAA9BA,KAAMK,EAAwB,EAAxBA,cAAeR,EAAS,EAATA,MAC5D,OACE,sBAAKC,UAAU,kBAAf,UACE,sBAAMA,UAAU,iBAAhB,SAAkCE,IAClC,0BACEA,KAAMA,EACNF,UAAU,+BACV0S,KAAK,aACLjS,SAAU,SAACC,GAAD,OAAOH,EAAcL,EAAMQ,EAAEC,OAAOL,UAEhD,cAACR,EAAD,CAAYC,MAAOA,O,ICoMV4S,G,kDAxMb,WAAY3Q,GAAQ,IAAD,8BACjB,cAAMA,IAqBRL,UAAY,WACV,IAAMM,EAASC,OAAOC,OAAO,EAAKC,MAAMH,QAClCI,EAAUH,OAAOI,KAAK,EAAKF,MAAMG,QAAQC,OAQ/C,OALEP,EAAOO,OAASH,EAAU,GAEtBJ,EAAOQ,MAAK,SAAC/B,GACX,MAAa,KAANA,MA9BE,EAmCnBgC,YAAc,WACZR,OAAOS,QAAQ,EAAKP,MAAMG,QAAQK,SAAQ,SAAClC,GAAO,IAAD,cAChCA,EADgC,GACxCmC,EADwC,KACrCC,EADqC,KAE/C,EAAKC,SAASF,EAAGC,OAtCF,EA0CnBC,SAAW,SAACC,EAAO1C,GACjB,EAAK2C,SAAS,CACZvB,aAAc,KAEhB,IAAIwB,EAAW,GACf,OAAQF,GACN,IAAK,MACC1C,EAAMkC,OAAS,GAAe,KAAVlC,KACtB4C,EAAW,iCACb,MACF,IAAK,UACC5C,EAAMkC,OAAS,MACjBU,EAAW,sBAAwB,IAAM5C,EAAMkC,QAAU,KAC3D,MACF,IAAK,UACW,KAAVlC,IAAc4C,EAAW,oBACzB5C,EAAMkC,OAAS,MACjBU,EAAW,6BAA+B,IAAM5C,EAAMkC,QAAU,KAItE,EAAKS,SAAS,CACZhB,OAAO,2BAAM,EAAKG,MAAMH,QAAlB,kBAA2Be,EAAQE,OAhE1B,EAoEnB3C,cAAgB,SAACyC,EAAO1C,GACtB,EAAKyC,SAASC,EAAO1C,GAErB,EAAK2C,SAAS,CACZV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,kBAA2BS,EAAQ1C,OAxE1B,EA4EnBsS,WAAa,SAACC,GACZ,EAAK5P,SAAS,CACZV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,IAA0BuQ,KAAMD,OA9EvB,EAkFnBzP,kBAAoB,SAACc,EAAIsI,EAAS/K,EAAM0O,EAAOC,EAAMyC,GACnDrP,QAAQC,IAAI,aACZD,QAAQC,IAAIoP,GAEZ,IADA,IAAIE,EAAW,IAAIC,SACVC,EAAI,EAAGA,GAAKJ,EAAMrQ,OAAS,EAAGyQ,IACrCF,EAASG,OAAO,QAASL,EAAMI,IAEjC,IAAIlJ,EAAU,CACZW,iBAAkBxG,EAClBsI,QAASA,EACT/K,KAAMA,EACNgL,MAAM,EACNC,SAAUyD,GAAmB,KAAVA,EAAeA,EAAQ,GAC1CxD,QAASyD,GAAiB,KAATA,EAAcA,EAAO,IAExC2C,EAASG,OACP,UACA,IAAIC,KAAK,CAAC5C,KAAKC,UAAUzG,IAAW,CAAE5J,KAAM,sBAE9CqD,QAAQC,IAAIsG,GACZzL,IAAM,CACJ8U,OAAQ,OACRnV,IAAK,eACLQ,KAAMsU,EACNM,QAAS,CACP,eAAgB,0BA3GH,EAgHnB3P,cAAgB,SAACC,GAGf,GAFAA,EAAMC,iBACN,EAAKlB,cACA,EAAKf,YAUR6B,QAAQC,IAAI,iCACZD,QAAQC,IAAI,EAAKrB,MAAMH,YAXF,CACrB,IAAIiC,EAAK,EAAK9B,MAAMG,OAAO+Q,GACvB9G,EAAU,EAAKpK,MAAMG,OAAOgR,QAC5B9R,EAAO,EAAKW,MAAMG,OAAOiR,QACzBrD,EAAQ,EAAK/N,MAAMG,OAAOkR,MAC1BrD,EAAO,EAAKhO,MAAMG,OAAOmR,KACzBb,EAAQ,EAAKzQ,MAAMG,OAAOuQ,KAC9B,EAAK1P,kBAAkBc,EAAIsI,EAAS/K,EAAM0O,EAAOC,EAAMyC,GACvD,EAAKc,0BAzHP,EAAKvR,MAAQ,CACXG,OAAQ,CACN+Q,GAAI,GACJI,KAAM,GACNH,QAAS,GACTE,MAAO,GACPD,QAAS,GACTV,KAAM,IAER7Q,OAAQ,GACRP,aAAc,IAGhB,EAAKiS,sBAAwB3R,EAAM2R,sBACnC,EAAKC,YAAc5R,EAAM4R,YACzB,EAAKC,YAAc7R,EAAM6R,YACzB,EAAKC,WAAa9R,EAAM8R,WACxB,EAAKC,QAAUC,oBAAU,MAnBR,E,qDAkIT,IAAD,OACP,OACE,uBAAMnQ,SAAUC,KAAKJ,cAAe1D,UAAU,aAA9C,UACE,cAAC,GAAD,CACEE,KAAK,KACLE,YAAY,QACZG,cAAeuD,KAAKvD,cACpBuK,QAAShH,KAAK8P,YACd7T,MAAO+D,KAAK1B,MAAMH,OAAOqR,KAE3B,sBAAKtT,UAAU,iBAAf,UACE,cAAC,GAAD,CACEE,KAAK,OACLE,YAAY,OACZG,cAAeuD,KAAKvD,cACpBuK,QAAShH,KAAKgQ,WACd9T,UAAU,oBAEZ,cAAC,GAAD,CACEE,KAAK,QACLE,YAAY,QACZ0K,QAAShH,KAAK+P,YACdtT,cAAeuD,KAAKvD,cACpBP,UAAU,uBAGd,sBAAKA,UAAU,SAAf,UACE,sBAAKA,UAAU,kBAAf,UACE,sBAAMA,UAAU,iBAAhB,qBACA,cAACC,EAAD,CACEC,KAAK,UACLG,WAAW,+BACXD,YAAY,eACZL,MAAO+D,KAAK1B,MAAMH,OAAOsR,QACzBhT,cAAeuD,KAAKvD,mBAIxB,cAACkS,GAAD,CACEvS,KAAK,UACLH,MAAO+D,KAAK1B,MAAMH,OAAOuR,QACzBjT,cAAeuD,KAAKvD,mBAGxB,sBAAKP,UAAU,oBAAf,UACE,uBACEQ,GAAG,QACHL,KAAK,OACL8T,IAAKnQ,KAAKiQ,QACVG,UAAQ,EACRzT,SAAU,SAACC,GAAD,OAAO,EAAKkS,WAAWlS,EAAEC,OAAOkS,QAC1CjE,QAAM,IAER,qBACE5O,UAAU,eACVkG,IAAI,yjHACJhF,QAAS,kBAAM,EAAK6S,QAAQI,QAAQC,WAEtC,cAAC5S,EAAD,CACEC,KAAM,OACNzB,UAAU,mBACV0B,aAAcoC,KAAK1B,MAAMV,aACzBC,UAAWmC,KAAKnC,wB,GAjMCoC,IAAMC,WCyFpBqQ,GAxFI,SAAC,GAA+B,IAA7BV,EAA4B,EAA5BA,sBAA4B,EACV9M,mBAAS,IADC,mBACzC+M,EADyC,KAC5BU,EAD4B,OAEVzN,mBAAS,IAFC,mBAEzCgN,EAFyC,KAE5BU,EAF4B,OAGZ1N,mBAAS,IAHG,mBAGzCiN,EAHyC,KAG7BU,EAH6B,KA+DhD,OA1DArN,qBAAU,WACRG,EAAaG,WACVlJ,MAAK,SAACC,GACLgF,QAAQC,IAAI,6BACZ,IAAIiM,EAAWlR,EAAIuM,KAAI,SAACpD,GACtB,MAAO,CAAEgI,MAAOhI,EAAKzH,KAAO,MAAQyH,EAAK4E,MAAOjM,MAAOqH,EAAK4E,UAE9D+H,EAAe5E,GACflM,QAAQC,IAAIiM,MAEbhR,OAAM,SAACqB,GACNyD,QAAQC,IAAI,qCACZD,QAAQC,IAAI1D,QAEf,CAAC4T,IAEJxM,qBAAU,WACRgK,GAAYE,eACT9S,MAAK,SAACC,GACLgF,QAAQC,IAAI,6BACZ,IAAIgR,EAAUvS,OAAOS,QAAQnE,GAAKuM,KAAI,SAAC2J,GACrC,OAAOA,EAAS,GAAG3J,KAAI,SAACkE,GACtB,MAAO,CACLU,MAAOV,EAAIZ,MAAQ,MAAQqG,EAAS,GAAK,IACzCpU,MAAO2O,EAAIzO,UAIjBgD,QAAQC,IAAIgR,EAAQ,IACpBD,EAAcC,EAAQ,OAEvB/V,OAAM,SAACqB,GACNyD,QAAQC,IAAI,qCACZD,QAAQC,IAAI1D,QAEf,CAAC4T,IAEJxM,qBAAU,WACR0F,GAAaI,gBACV1O,MAAK,SAACC,GACLgF,QAAQC,IAAI,sBACZ,IAAIiJ,EAAWxK,OAAOS,QAAQnE,GAAKuM,KAAI,SAAC2J,GACtC,OAAOA,EAAS,GAAG3J,KAAI,SAACoC,GACtB,MAAO,CACLwC,MAAOxC,EAAKkB,MAAQ,MAAQqG,EAAS,GAAK,IAC1CpU,MAAO6M,EAAK3M,UAIlBgD,QAAQC,IAAIiJ,EAAS,IACrB6H,EAAe7H,EAAS,OAEzBhO,OAAM,SAACqB,GACNyD,QAAQC,IAAI,sCACZD,QAAQC,IAAI1D,QAEf,CAAC4T,IAGF,qBAAK3T,UAAU,cAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,qBACEkB,QAASyS,EACT/S,MAAO,CAAEmO,QAAS,QAASnD,aAAc,QAF3C,SAIE,cAAC,IAAD,CACEjG,KAAMgP,IACNC,KAAM,MACNhU,MAAO,CAAEkO,MAAO,QAAS+F,SAAU,UAGvC,cAAC,GAAD,CAEEjB,YAAaA,EACbC,YAAaA,EACbC,WAAYA,EACZH,sBAAuBA,GAJlBpD,KAAKC,UAAUoD,EAAcC,EAAcC,UC5E3CgB,I,OARC,SAAC9S,GACb,OACI,qBAAKhC,UAAU,UAAf,SACKgC,EAAMhB,aCiBJ+T,I,MAnBS,SAAC,GAMlB,IALLtT,EAKI,EALJA,KACAuT,EAII,EAJJA,YACAC,EAGI,EAHJA,eACAC,EAEI,EAFJA,MACAlU,EACI,EADJA,SAEIhB,EAAYkV,EAAQ,6BAA+B,aAKvD,OAJIF,IAAgBvT,IAClBzB,GAAa,yBAIb,qBAAKA,UAAWA,EAAWkB,QAAS,kBAAM+T,EAAexT,IAAzD,SACGT,MCiBQmU,GA/BC,SAAC,GAKV,IAJLC,EAII,EAJJA,sBACAC,EAGI,EAHJA,qBACAL,EAEI,EAFJA,YACAC,EACI,EADJA,eAEA,OACE,qCACE,oBAAIjV,UAAU,sBAAd,qBACA,eAAC,GAAD,CACEyB,KAAK,QACLuT,YAAaA,EACbC,eAAgBA,EAChBC,OAAO,EAJT,kBAOE,sBAAMtU,MAAO,CAAEkO,MAAO,SAAtB,SAAkCsG,OAEpC,eAAC,GAAD,CACE3T,KAAK,OACLuT,YAAaA,EACbC,eAAgBA,EAChBC,OAAO,EAJT,iBAOE,sBAAMtU,MAAO,CAAEkO,MAAO,SAAtB,SAAkCuG,WC3BpCC,GAAiB,eA2BRC,GAxBY,CAEzBC,eAAgB,kBAAMzX,EAASC,IAAIsX,KACnCG,eAAgB,SAACC,GAAD,OAAgB3X,EAASkB,KAAKqW,sBAA4BI,IAC1EC,iBAAkB,SAACD,GAAD,OAAgB3X,EAASoB,MAAMmW,GAAc,+BAA2BI,EAAWlV,IAAMkV,IAC3GE,iBAAkB,SAACpV,GAAD,OAAQzC,EAASqB,OAAOkW,gBAAuB9U,EAAK,YACtEqV,iBAAkB,kBAAM9X,EAASC,IAAIsX,sBACrCQ,oBAAqB,SAACvN,EAAcf,EAAQuO,GAE1C,YAA0BC,IAAtBD,EAEKhY,EAASkB,KAAKqW,uBAAA,+BAAuD/M,EAAvD,yBAAoFf,EAApF,gCAAkHuO,IAGhIhY,EAASkB,KAAKqW,uBAAA,+BAAuD/M,EAAvD,yBAAoFf,KAG7GyO,yBAA0B,SAAC1N,EAAcf,GAEvC,OAAOzJ,EAASqB,OAAOkW,uBAAA,+BAAuD/M,EAAvD,yBAAoFf,KAE7G0O,yBAA0B,SAAC3N,GAAD,OAAkBxK,EAASC,IAAIsX,uBAAA,wBAAgD/M,MCxBrG4N,GAAc,YA2BLC,GAxBS,CAEtBC,YAAa,SAAC9N,GAAD,OAAkBxK,EAASC,IAAImY,GAAW,wBAAoB5N,KAC3E+N,cAAe,SAAC/N,GAAD,OAAkBxK,EAASC,IAAImY,+BAAsC5N,IACpFgO,YAAa,SAAChO,EAAcwJ,GAAf,OAA2BhU,EAASkB,KAAKkX,GAAW,+BAA2B5N,GAAgBwJ,IAC5GyE,cAAe,SAACjO,EAAcO,EAAWiJ,GAA1B,OAAsChU,EAASoB,MAAMgX,GAAW,+BAA2B5N,EAA3B,sBAAqDO,GAAaiJ,IACjJ0E,cAAe,SAAClO,EAAcO,GAAf,OAA6B/K,EAASqB,OAAO+W,GAAW,+BAA2B5N,EAA3B,sBAAqDO,KAC5H4N,iBAAkB,SAAC5N,EAAWtB,EAAQmP,GAEpC,YAAuBX,IAAnBW,EAEK5Y,EAASkB,KAAKkX,0BAAA,4BAAuDrN,EAAvD,gCAAwFtB,EAAxF,iCAAuHmP,IAGrI5Y,EAASkB,KAAKkX,0BAAA,4BAAuDrN,EAAvD,gCAAwFtB,KAGjHoP,sBAAuB,SAAC9N,EAAWtB,GAEjC,OAAOzJ,EAASqB,OAAO+W,0BAAA,4BAAuDrN,EAAvD,gCAAwFtB,KAEjHqP,sBAAuB,SAAC/N,GAAD,OAAe/K,EAASC,IAAImY,0BAAA,qBAAgDrN,MCwEtFgO,I,OA5FO,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,cAAeC,EAAuB,EAAvBA,iBAAuB,EACjBnQ,mBAAS,IADQ,mBACtDoQ,EADsD,KACtCC,EADsC,OAEvBrQ,mBAAS,IAFc,mBAEtDsQ,EAFsD,KAEzCC,EAFyC,OAGzBvQ,mBAAS,MAHgB,mBAGtD6O,EAHsD,KAG1C2B,EAH0C,OAIbxQ,mBAAS,IAJI,mBAItDyQ,EAJsD,KAIpCC,EAJoC,OAKjC1Q,oBAAS,GALwB,mBAKtD2Q,EALsD,KAK9CC,EAL8C,KAO7DtQ,qBAAU,WACRoO,GAAmBM,mBAChBtX,MAAK,SAACC,GACL0Y,EAAkB1Y,MAEnBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,0CAEf,IAEH0D,qBAAU,WACW,OAAfuO,GACFU,GAAgBE,cAAcZ,EAAWlV,IACtCjC,MAAK,SAACC,GACL4Y,EAAe5Y,MAEhBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,uCAEjB,IAEH,IAAMiU,EAAc,WAClBD,GAAWD,IAqBb,OACE,sBAAK5W,MAAO,CAAEmO,QAASkI,GAAkB,EAAI,OAAS,IAAtD,UACE,oBAAIjX,UAAU,sBAAd,qBAEA,yBAAQA,UAAU,YAAYkB,QAASwW,EAAvC,iBACGhC,QADH,IACGA,OADH,EACGA,EAAYxV,KADf,aACwB6W,QADxB,IACwBA,OADxB,EACwBA,EAAe7W,QAEvC,sBACEF,UAAU,qBACVY,MAAO,CAAE+W,UAAWH,EAAS,OAAS,OAFxC,UAIE,qBAAKxX,UAAU,mBAAf,SACGiX,EAAelM,KAAI,SAACrC,GACnB,OACE,wBAEE1I,UAAU,oBACVkB,QAAS,kBAnCM,SAACwH,GAC5BlF,QAAQC,IAAI,mBACZ8T,EAAoB7O,GACpB0N,GAAgBE,cAAc5N,EAAIlI,IAC/BjC,MAAK,SAACC,GACL4Y,EAAe5Y,MAEhBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,qCA2BWmU,CAAqBlP,IAHtC,SAKGA,EAAIxI,MAJAwI,EAAIlI,SASjB,qBAAKR,UAAU,gBAAf,SACGmX,EAAYpM,KAAI,SAACgH,GAChB,OACE,wBAEE/R,UAAU,oBACVkB,QAAS,kBApCG,SAAC6Q,GACzBsF,EAAcC,GACdN,EAAiBjF,GACjB2F,IAiC2BG,CAAkB9F,IAHnC,SAKGA,EAAQ7R,MAJJ6R,EAAQvR,iBCiBdsX,I,yDA3Fb,WAAY9V,GAAQ,IAAD,8BACjB,cAAMA,IAWRL,UAAY,WACV,IAAMM,EAASC,OAAOC,OAAO,EAAKC,MAAMH,QACxBC,OAAOI,KAAK,EAAKF,MAAMG,QAAQC,OAI/C,OAHQP,EAAOQ,MAAK,SAAC/B,GACnB,MAAa,KAANA,MAhBQ,EAqBnBqC,SAAW,SAACzC,GACV,EAAK2C,SAAS,CACZvB,aAAc,KAGhB,IAAIwB,EAAW,GACD,KAAV5C,EAAc4C,EAAW,gBACpB5C,EAAMkC,OAAS,KAAIU,EAAW,iBAEvC,EAAKD,SAAS,CACZhB,OAAO,2BAAM,EAAKG,MAAMH,QAAlB,IAA0BkL,KAAMjK,OA/BvB,EAmCnB3C,cAAgB,SAACyC,EAAO1C,GACtB,EAAKyC,SAASzC,GACd,EAAK2C,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,IAA0B4K,KAAM7M,OArCrC,EAwCnB8C,kBAAoB,SAAC2U,GACnBlL,GAAaK,mBAAmB,EAAKlL,MAAM+K,YAAa,CACtDsB,MAAO0J,EACPzJ,MAAM,IAEL/P,MAAK,SAACC,GACL,EAAKwD,MAAMgW,gBAAe,MAE3BtZ,OAAM,SAACqB,GACNyD,QAAQC,IAAI,kCACZD,QAAQC,IAAI1D,EAAMnB,UAClB,EAAKqE,SAAS,CACZvB,aAAc3B,EAAMnB,SAASH,WApDlB,EAyDnBiF,cAAgB,SAACC,GAEf,GADAA,EAAMC,iBACD,EAAKjC,YAOR6B,QAAQC,IAAI,iCACZD,QAAQC,IAAI,EAAKrB,MAAMH,YARF,CACrBuB,QAAQC,IAAI,qBACZ,IAAIsU,EAAY,EAAK3V,MAAMG,OAAO4K,KAClC,EAAKlK,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,IAA0B4K,KAAM,OACtD,EAAK/J,kBAAkB2U,GACvBpU,EAAMhD,OAAOyE,UA9Df,EAAKhD,MAAQ,CACXG,OAAQ,CACN4K,KAAM,IAERlL,OAAQ,GACRP,aAAc,IAEhB,EAAKuW,QAAUjW,EAAMkW,cATJ,E,qDAwEjB,OACE,uBAAMrU,SAAUC,KAAKJ,cAArB,UACE,sBAAM1D,UAAU,UAAUkB,QAAS,KAAnC,SACE,cAAC,IAAD,CAAiByE,KAAMwS,IAAQvX,MAAO,CAAEiF,MAAO,iBACzC,IACR,cAAC5F,EAAD,CACEG,YAAY,mBACZC,WAAW,eACXE,cAAeuD,KAAKvD,cACpBR,MAAO+D,KAAK1B,MAAMH,OAAOkL,OAE3B,cAACrM,EAAD,CACEf,MAAmC,KAA5B+D,KAAK1B,MAAMV,cAAuBoC,KAAK1B,MAAMV,sB,GArFpCqC,IAAMC,YCP1BoU,GAAgB,cAYPC,GATW,CAExBC,cAAe,SAACxP,GAAD,OAAe/K,EAASC,IAAIoa,GAAa,qBAAiBtP,KACzEyP,iBAAkB,SAACzP,EAAWiE,GAAZ,OAA4BhP,EAASC,IAL5B,aAKoD,qBAAiB8K,EAAjB,wBAA0CiE,KACzHyL,iBAAkB,SAAC1P,GAAD,OAAe/K,EAASC,IAAIoa,GAAa,0BAAsBtP,KACjF2P,gBAAiB,SAAC3P,EAAW4P,GAAZ,OAA0B3a,EAASkB,KAAKmZ,GAAa,0BAAsBtP,GAAa4P,IACzGC,gBAAiB,SAAC5L,GAAD,OAAiBhP,EAASqB,OAAOgZ,GAAa,8BAA0BrL,MCmE5E6L,GAtEQ,SAAC,GAAmB,IAAjB9P,EAAgB,EAAhBA,UAAgB,EACNjC,mBAAS,IADH,mBACjC6R,EADiC,KACtBG,EADsB,OAERhS,mBAAS,IAFD,mBAEjC6F,EAFiC,KAEvBoM,EAFuB,OAGFjS,oBAAS,GAHP,mBAGjCkS,EAHiC,KAGpBf,EAHoB,KAgDxC,OA3CA7Q,qBAAU,WACR3D,QAAQC,IAAI,0BACZ4U,GAAkBG,iBAAiB1P,GAChCvK,MAAK,SAACC,GACLqa,EAAara,GACbgF,QAAQC,IAAI,iBACZoJ,GAAaG,WAAWxO,EAAIgC,IACzBjC,MAAK,SAACC,GACLgF,QAAQC,IAAIjF,GACZsa,EAAYta,MAEbE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,6BACZD,QAAQC,IAAI1D,GACZ+Y,EAAY,UAGjBpa,OAAM,SAACqB,GACNyD,QAAQC,IAAI,wCACZD,QAAQC,IAAI1D,GACZ8Y,EAAa,IACbC,EAAY,SAEf,CAAChQ,IAEJ3B,qBAAU,WACJ4R,GAAeL,EAAUlY,KAC3BgD,QAAQC,IAAI,iBACZoJ,GAAaG,WAAW0L,EAAUlY,IAC/BjC,MAAK,SAACC,GACLgF,QAAQC,IAAIjF,GACZsa,EAAYta,MAEbE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,6BACZD,QAAQC,IAAI1D,GACZ+Y,EAAY,OAGhBd,GAAe,MAEhB,CAACU,EAAWK,IAGb,sBAAKnY,MAAO,CAAEmO,QAA2C,IAAlC7M,OAAOI,KAAKoW,GAAWlW,OAAe,OAAS,IAAtE,UACE,oBAAIxC,UAAU,sBAAsBY,MAAO,CAAEmO,QAAS,gBAAtD,kBAGA,uBAAM/O,UAAU,gBAAhB,kBAAsC0Y,EAAUM,OAAhD,OACCtM,EAAS3B,KAAI,SAACoC,GACb,OACE,cAAC,GAAD,CAEE3M,GAAI2M,EAAK3M,GACT6N,MAAOlB,EAAKkB,MACZ1B,QAASQ,EAAKiD,KACd9B,KAAMnB,EAAKmB,MAJNnB,EAAK3M,OAQhB,cAAC,GAAD,CAAauM,YAAa2L,EAAUlY,GAAIwX,eAAgBA,QChD/CiB,GApBH,SAAC,GAA6D,IAA3DzY,EAA0D,EAA1DA,GAAIqF,EAAsD,EAAtDA,MAAOwI,EAA+C,EAA/CA,MAAO6K,EAAwC,EAAxCA,eAAgBvI,EAAwB,EAAxBA,kBAAwB,EACvB9J,mBAAS,GADc,mBAChEsS,EADgE,KAC9CC,EAD8C,KAYvE,OAVAjS,qBAAU,WACRkC,EAAgBQ,+BAA+BrJ,GAC5CjC,MAAK,SAACC,GACL4a,EAAoB5a,MAErBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,yDAEhBkN,GAAkB,KACjB,CAACnQ,EAAI0Y,IAEN,qCACE,cAAC,EAAD,CAAQrT,MAAOA,IADjB,IAC2B,iCAAOwI,EAAP,OAAsB,IAC/C,uBAAMzN,MAAO,CAAEkO,MAAO,SAAtB,cAAmCqK,EAAnC,WC0BSE,GAvCK,SAAC,GAMd,IALL1M,EAKI,EALJA,QACAqI,EAII,EAJJA,YACAC,EAGI,EAHJA,eACAiE,EAEI,EAFJA,eACAvI,EACI,EADJA,kBAEA,OACE,qCACE,oBACE/P,MAAO,CAAEmO,QAASpC,GAAW,EAAI,OAAS,gBAC1C3M,UAAU,sBAFZ,kBAMC2M,EAAQ5B,KAAI,SAACkE,GACZ,OACE,cAAC,GAAD,CAEExN,KAAMwN,EAAIzO,GACVwU,YAAaA,EACbC,eAAgBA,EAChBC,OAAO,EALT,SAOE,cAAC,GAAD,CAEE1U,GAAIyO,EAAIzO,GACR6N,MAAOY,EAAIZ,MACXxI,MAAOoJ,EAAIpJ,MACXqT,eAAgBA,EAChBvI,kBAAmBA,GALd1B,EAAIzO,KAPNyO,EAAIzO,WCkCN8Y,GAlDM,SAAC,GAWf,IAVLlE,EAUI,EAVJA,sBACAC,EASI,EATJA,qBACA6D,EAQI,EARJA,eACAvI,EAOI,EAPJA,kBACAqE,EAMI,EANJA,YACAC,EAKI,EALJA,eACAsE,EAII,EAJJA,mBACAC,EAGI,EAHJA,gBACAzC,EAEI,EAFJA,cACAC,EACI,EADJA,iBAMA,OACE,eAAC,GAAD,WACE,cAAC,EAAD,CAAgB9V,QANU,WAC5BqY,GAAoBC,IAK8BxZ,UAAU,aAA1D,yBAIA,oBAAIA,UAAU,cAEd,cAAC,GAAD,CACEoV,sBAAuBA,EACvBC,qBAAsBA,EACtBL,YAAaA,EACbC,eAAgBA,IAElB,cAAC,GAAD,CACE8B,cAAeA,EACfC,iBAAkBA,IAEI,QAAvBD,EAAc7W,MACb,cAAC,GAAD,CACEyM,QAASoK,EAAc3G,KACvB4E,YAAaA,EACbC,eAAgBA,EAChBiE,eAAgBA,EAChBvI,kBAAmBA,IAGC,QAAvBoG,EAAc7W,MACb,cAAC,GAAD,CAAgB4I,UAAWiO,EAAcvW,SCxClCiZ,I,MAVC,SAACzX,GAGb,OACI,qBAAKhC,UAAS,kBAAagC,EAAMhC,WAAjC,SACKgC,EAAMhB,aCsGJ0Y,GAtGD,SAAC,GAA2B,IAAzB/P,EAAwB,EAAxBA,OAAQgQ,EAAgB,EAAhBA,UAAgB,EACD9S,mBAAS,SADR,mBAChCmO,EADgC,KACnBC,EADmB,OAESpO,mBAAS,IAFlB,mBAEhC+S,EAFgC,KAEdC,EAFc,OAGKhT,mBAAS,IAHd,mBAGhCiT,EAHgC,KAGhBC,EAHgB,OAIGlT,mBAAS,CACjD3G,KAAM,MACNM,GAAI,KACJ4P,KAAM,KAP+B,mBAIhC2G,EAJgC,KAIjBC,EAJiB,OASKnQ,oBAAS,GATd,mBAShCqS,EATgC,KAShBvI,EATgB,KAWvCxJ,qBAAU,WACJ+R,GACF7P,EAAgBO,6BACbrL,MAAK,SAACC,GACLub,EAAkBvb,MAEnBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,iDAElBkN,GAAkB,KACjB,CAACuI,IAEJ/R,qBAAU,WACR,GAAe,KAAXwC,EACFnG,QAAQC,IAAI,mCAAqCkG,GACjDsL,EAAe,UACf5L,EAAgBK,sBAAsBC,GACnCpL,MAAK,SAACC,GACLgF,QAAQC,IAAI,6BACZoW,EAAoBrb,MAErBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,8CAEhBkW,EAAU,SAEV,OAAQ3E,GACN,IAAK,QACH3L,EAAgBC,qBACb/K,MAAK,SAACC,GACLgF,QAAQC,IAAI,0BACZoW,EAAoBrb,MAErBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,uCAEhB,MACF,IAAK,OACH4F,EAAgBE,oBACbhL,MAAK,SAACC,GACLgF,QAAQC,IAAI,yBACZoW,EAAoBrb,MAErBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,sCAEhB,MACF,QACE4F,EAAgBG,mBAAmBwL,GAChCzW,MAAK,SAACC,GACLgF,QAAQC,IAAI,wBACZoW,EAAoBrb,MAErBE,OAAM,SAACqB,GACNyD,QAAQC,IAAI,wCAIrB,CAACuR,EAAarL,EAAQuP,IArEc,MAuEOrS,oBAAS,GAvEhB,mBAuEhC2S,EAvEgC,KAuEfD,EAvEe,KAyEvC,OACE,sBAAKvZ,UAAU,UAAf,UACE,cAAC,GAAD,CACEoV,sBAAuB0E,EACvBzE,qBAAsB,GACtB6D,eAAgBA,EAChBvI,kBAAmBA,EACnBqE,YAAaA,EACbC,eAAgBA,EAChBuE,gBAAiBA,EACjBD,mBAAoBA,EACpBxC,cAAeA,EACfC,iBAAkBA,IAEpB,eAAC,GAAD,CAAShX,UAAU,mBAAnB,UACGwZ,GACC,cAAC,GAAD,CACE7F,sBAAuB,kBAAM4F,GAAoBC,MAGrD,cAAC,GAAD,CACE7I,kBAAmBA,EACnBK,SAAU4I,WCtFL7U,gBAbI,SAAC,GACnB,IADoBtD,EACrB,EADqBA,KAAMwD,EAC3B,EAD2BA,KAAMD,EACjC,EADiCA,QAIzBhF,GAHR,EAD0CkE,GAItB,cAMhB,OARiBgD,cAGJD,WAAahC,IAEtBjF,GAAa,yBAGV,qBAAKA,UAAWA,EAAWkB,QAAS,kBAAM8D,EAAQO,KAAKN,IAAvD,SAA+DxD,OCmB3DuY,I,OAzBS,WAGtB,IAAMxa,EAAcya,qBAAWlS,GAE/B,YAAkCiO,IAA9BxW,EAAYiJ,cAEP,cAAC,GAAD,IAIP,eAAC,GAAD,WACGjJ,EAAYiJ,cAAiB,qCAC5B,cAAC,EAAD,CAAYvD,UAAQ,EAAClF,UAAU,aAAaiF,KAAK,kBAAjD,4BACA,oBAAIjF,UAAU,iBACT,GACP,oBAAIA,UAAU,sBAAd,2BACCR,EAAYiJ,cAAgB,cAAC,GAAD,CAAYhH,KAAK,OAAOwD,KAAK,mBAAsB,GAChF,cAAC,GAAD,CAAYxD,KAAK,cAAcwD,KAAK,0BACpC,cAAC,GAAD,CAAYxD,KAAK,WAAWwD,KAAK,uBACjC,cAAC,GAAD,CAAYxD,KAAK,QAAQwD,KAAK,yBCSrBiV,I,MA/BO,SAAC,GACtB,IADuBhU,EACxB,EADwBA,IAAK+C,EAC7B,EAD6BA,KAAM/I,EACnC,EADmCA,KAAMmG,EACzC,EADyCA,KAAMrF,EAC/C,EAD+CA,SAG3C,OAAIqF,EAGI,sBAAKrG,UAAU,oCAAf,UACKgB,EACD,cAAC,EAAD,CAAYkF,IAAKA,EAAKlG,UAAU,qBAChC,sBAAKA,UAAU,wBAAf,UACI,oBAAIA,UAAU,YAAd,SAA2BiJ,IAC3B,oBAAIjJ,UAAU,0BAAd,SAAyCE,UAQjD,sBAAKF,UAAU,gBAAf,UACI,cAAC,EAAD,CAAYkG,IAAKA,IACjB,sBAAKlG,UAAU,wBAAf,UACI,oBAAIA,UAAU,YAAd,SAA2BiJ,IAC3B,oBAAIjJ,UAAU,WAAd,SAA0BE,YC3BxCia,GAAoB,QAQXC,GANc,CAC3BC,YAAa,kBAAMtc,EAASC,IAAImc,KAChCG,WAAY,SAACpb,GAAD,OAAkBnB,EAASkB,KAAKkb,eAA+Bjb,IAC3Eqb,WAAY,kBAAMxc,EAASqB,OAAO+a,kBC4GrBK,I,OA3GO,SAAC,GAA+E,IAA9Ela,EAA6E,EAA7EA,MAAOma,EAAsE,EAAtEA,UAAWC,EAA2D,EAA3DA,QAASC,EAAkD,EAAlDA,SAAUC,EAAwC,EAAxCA,aAAcC,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,UACpF,SAASC,IACP,GAAKH,GAAiBC,GAAaG,IAAcC,EAAjD,CAKA,IAAKA,EAIH,OAFAC,EAAcF,QACdG,GAAW,GAGb,IAAIC,EAAU,GACdA,EAAQP,GAAaI,EACrBL,EAAaQ,GACZ1c,OAAM,WAEL2c,GAAW,GACXC,EAAaN,GACbE,EAAcF,GACVF,GACFA,EAAUD,EAAWG,GACvBrM,YAAW,kBAAM0M,GAAW,KAAQ,QAGtCC,EAAaN,GACbG,GAAW,GACPL,GACFA,EAAUD,EAAWI,QAzBrBE,GAAW,GAJoF,IAoD/FI,EAuCEC,EA3F6F,EA6CrE3U,oBAAS,GA7C4D,mBA6C5F4U,EA7C4F,KA6CnFN,EA7CmF,OA8CjEtU,mBAASvG,GA9CwD,mBA8C5F0a,EA9C4F,KA8CjFM,EA9CiF,OA+C/DzU,mBAASvG,GA/CsD,mBA+C5F2a,EA/C4F,KA+ChFC,EA/CgF,OAgDrErU,oBAAU6U,QAAQpb,IAhDmD,mBAgD5FwB,EAhD4F,KAgDnF6Z,EAhDmF,OAiDvE9U,oBAAS,GAjD8D,mBAiD5F+U,EAjD4F,KAiDpFC,EAjDoF,OAkDrEhV,mBAAS,MAlD4D,mBAkD5FiV,EAlD4F,KAkDnFT,EAlDmF,KAuEnG,OAlBAlU,qBAAU,WAEJsU,GACFF,EAAUQ,UACX,CAACN,EAASF,IAEbpU,qBAAU,WAEJ7G,IAEF4a,EAAc5a,GACdgb,EAAahb,GACbqb,GAAW,MAEZ,CAACrb,IAIAmb,EAEA,sBAAKzb,UAAS,+CAA0C0a,EAAU,yBAA2B,IAA7F,UACE,uBACE1a,UAAU,+CACVG,KAAI,OAAEsa,QAAF,IAAEA,IAAa,OACnBjI,aAAcyI,EACdxa,SAAU,SAACC,GAAD,OAAOwa,EAAcxa,EAAEC,OAAOL,QACxC0b,UAAW,SAACtb,GAAsB,UAAVA,EAAEub,KAAiBlB,KAC3C9G,IAAK,SAACiI,GAAD,OAAWX,EAAYW,KAE9B,cAAC,EAAD,CACElc,UAAU,kBACVkB,QAAS,kBAAM6Z,KAFjB,qBAUa,IAAbJ,IAEFa,EAAU,mBAAGxb,UAAU,wBAGvB,sBAAKA,UAAS,wBAAmB0a,EAAU,yBAA2B,IAAMxZ,QAAS,YA/DtE,IAAbyZ,EAEFQ,GAAW,IAGXU,GAAU,GACVM,UAAUC,UAAUC,UAAUpB,GAC9BtM,YAAW,kBAAMkN,GAAU,KAAQ,OAwDnC,UACE,oBAAI7b,UAAS,oBAAe0a,EAAU,qBAAuB,GAAhD,YAAsD5Y,EAAU,qBAAuB,IAApG,SAA2GmZ,IAC1GO,EACAI,EAAS,sBAAM5b,UAAU,aAAhB,oBAA6C,GACtD8b,EAAU,sBAAM9b,UAAU,+BAAhB,iEAA4G,SC/EhHsc,I,OA1BM,SAACta,GAElB,IAAIqM,EAUAkO,EAKJ,OAZIlO,EAFArM,EAAMwa,OAEE,qBAAIxc,UAAU,aAAd,UAA2B,sBAAMA,UAAU,cAAhB,yBAA3B,WAA+EgC,EAAM9B,QAIrF,oBAAIF,UAAU,aAAd,SAA4BgC,EAAM9B,OAI1C8B,EAAMya,cAENF,EAAe,mBAAGvc,UAAU,kBAAkB+P,wBAAyB,CAACC,OAAQhO,EAAMya,gBAGtF,sBAAKzc,UAAU,uBAAf,UACKqO,EACAkO,EACAva,EAAMhB,cCYJ0b,GA9BM,WACrB,MAWoC7V,mBAAS,IAX7C,mBAWW8V,EAXX,KAWqBC,EAXrB,KAiBI,OALAzV,qBAAU,WAENiT,GAAqBC,cAAc9b,MAAK,SAAA2B,GAAI,OAAI0c,EAAY1c,QAC7D,IAGC,sBAAKF,UAAU,yBAAf,UACI,cAAC,GAAD,CAAcE,KAAK,YAAYuc,YAAY,0CAA3C,SACI,cAAC,GAAD,CAAenc,MAAOqc,EAAU/B,aAAcR,GAAqBE,WAAYO,UAAU,WAE7F,cAAC,GAAD,CAAc2B,QAAM,EAACtc,KAAK,cAAcuc,YAAY,0HAApD,SACI,cAAC,EAAD,CAAQzc,UAAU,cAAckB,QArB5C,WAEQpC,OAAO+d,QAAQ,mHAEfzC,GAAqBG,aAAahc,MAAK,kBAAMO,OAAOC,SAASC,QAAQ,SAiBjE,+BC0KD8d,I,wDA/Lb,WAAY9a,GACX,IAAD,8BACE,cAAMA,IAeRL,UAAY,WAEV,IAAMM,EAASC,OAAOC,OAAO,EAAKC,MAAMH,QAClCI,EAAUH,OAAOI,KAAK,EAAKF,MAAMG,QAAQC,OAQ/C,OANEP,EAAOO,OAASH,GAEZJ,EAAOQ,MAAK,SAAC/B,GAEb,MAAa,KAANA,MAzBf,EA8BAgC,YAAc,WAEZR,OAAOS,QAAQ,EAAKP,MAAMG,QAAQK,SAAQ,SAAClC,GAC1C,IAAD,cACiBA,EADjB,GACSmC,EADT,KACYC,EADZ,KAEE,EAAKC,SAASF,EAAGC,OAnCrB,EAuCAC,SAAW,SAACC,EAAO1C,GAEjB,EAAK2C,SAAS,CACZvB,aAAc,KAEhB,IAAIwB,EAAW,GACf,OAAQF,GAEN,IAAK,OACW,KAAV1C,EAEF4C,EAAW,sBACD,oCAA8BC,KAAK7C,KAE7C4C,EAAW,oCAEb,MACF,IAAK,WACW,KAAV5C,EAEF4C,EAAW,qBACD,oCAA8BC,KAAK7C,KAE7C4C,EAAW,oCAEb,MACF,IAAK,WACW,KAAV5C,EAEF4C,EAAW,oBACF5C,EAAMkC,OAAS,IAExBU,EAAW,mCAKjB,EAAKD,SAAS,CACZhB,OAAO,2BAAM,EAAKG,MAAMH,QAAlB,kBAA2Be,EAAQE,OA7E7C,EAiFA3C,cAAgB,SAACyC,EAAO1C,GAEtB,EAAKyC,SAASC,EAAO1C,GACrB,EAAK2C,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,kBAA2BS,EAAQ1C,OApF3D,EAuFA8C,kBAAoB,SAAClD,EAAMqE,EAAUjB,GAEnC,EAAKL,SAAS,CAAE8Z,cAAc,IAC9BzV,EAAaI,aAAa,CACxBxH,OACAqE,WACAjB,aAEC/E,MAAK,WAEJ,EAAK0E,SAAS,CACZV,OAAQ,GACRN,OAAQ,GACRP,aAAc,GACdqb,cAAc,IAEhB,EAAKC,sBAENte,OAAM,SAAAC,GAEL6E,QAAQC,IAAI,cAEZ,IAAI1D,EAAQ,wBACA,mBAFZpB,EAAMA,EAAIC,SAASH,MAGjBsB,EAAQ,yCACO,WAARpB,IACPoB,EAAQ,oCACV,EAAKkD,SAAS,CACZvB,aAAc3B,EACdgd,cAAc,QApHtB,EAyHArZ,cAAgB,SAACC,GAIf,GAFAA,EAAMC,iBACN,EAAKlB,cACA,EAAKf,YAaR6B,QAAQC,IAAI,iCACZD,QAAQC,IAAI,EAAKrB,MAAMH,YAbzB,CACE,IAAI/B,EAAO,EAAKkC,MAAMG,OAAOrC,KACzBqE,EAAW,EAAKnC,MAAMG,OAAOgC,SAC7BjB,EAAW,EAAKlB,MAAMG,OAAOe,SAEjC,EAAKF,kBACHlD,EACAqE,EACAjB,KApIJ,EAAKlB,MAAQ,CACXG,OAAQ,CACNrC,KAAM,GACNqE,SAAU,GACVjB,SAAU,IAEZrB,OAAQ,GACRP,aAAc,GACdqb,cAAc,GAGhB,EAAKC,iBAAmBhb,EAAMgb,iBAbhC,E,qDAgJC,IAAD,MACE,OACE,uBAAMnZ,SAAUC,KAAKJ,cAAeuZ,aAAa,MAAjD,UACE,mBAAGjd,UAAU,aAAb,wBACA,qBAAKA,UAAU,yCAAf,SACE,cAACC,EAAD,CACEC,KAAK,OACLG,WAAW,qBACXD,YAAY,SACZL,MAAO+D,KAAK1B,MAAMH,OAAO/B,KACzBK,cAAeuD,KAAKvD,cACpBD,MAAK,UAAEwD,KAAK1B,MAAMG,OAAOrC,YAApB,QAA0B,OAEnC,mBAAGF,UAAU,aAAb,uBACA,qBAAKA,UAAU,yCAAf,SACE,cAACC,EAAD,CACEC,KAAK,WACLG,WAAW,qBACXD,YAAY,OACZL,MAAO+D,KAAK1B,MAAMH,OAAOsC,SACzBhE,cAAeuD,KAAKvD,cACpBD,MAAK,UAAEwD,KAAK1B,MAAMG,OAAOgC,gBAApB,QAA8B,OAEvC,mBAAGvE,UAAU,aAAb,sBACA,qBAAKA,UAAU,yCAAf,SACE,cAACC,EAAD,CACEC,KAAK,WACLC,KAAK,WACLE,WAAW,qBACXD,YAAY,yBACZL,MAAO+D,KAAK1B,MAAMH,OAAOqB,SACzB/C,cAAeuD,KAAKvD,cACpBD,MAAK,UAAEwD,KAAK1B,MAAMG,OAAOe,gBAApB,QAA8B,OAEvC,cAAC9B,EAAD,CACEI,aAAW,EACXH,KAAK,WACLC,aAAcoC,KAAK1B,MAAMV,aACzBC,UAAWmC,KAAKnC,YAChBG,QAASgC,KAAK1B,MAAM2a,sB,GA1LJhZ,IAAMC,YCwCjBkZ,I,MA1CE,SAAC,GAAe,IAO3BC,EAPaC,EAAa,EAAbA,QAEjB,OAAKA,GAMDA,GAAWA,EAAQ5a,OAAS,IAE9B2a,EAAWC,EAAQrS,KAAI,SAAAsS,GAErB,IACM/Y,GADe+Y,EAAOnd,KAAO,IAAMmd,EAAO9Y,UAClBC,cAAcxF,QAAQ,KAAM,IAC1D,OACE,+BACE,6BAAI,eAAC,IAAD,CAAMkF,GAAE,0BAAqBmZ,EAAO7c,GAA5B,YAAkC8D,GAA1C,UAAuD+Y,EAAO9Y,SAA9D,KAA0E8Y,EAAOnd,UACrF,6BAAKmd,EAAO9Q,QACZ,6BAAqB,eAAhB8Q,EAAOpU,KAAwB,eAAiB,WACrD,6BAAKoU,EAAOC,aAJLD,EAAO7c,QAWpB,wBAAOR,UAAU,WAAjB,UACE,uBAAOA,UAAU,kBAAjB,SACE,+BACE,sCACA,gDACA,sCACA,mDAGJ,gCACGmd,QAhCE,cAAC,EAAD,MCgCII,GAhCM,WAEnB,IAAM/d,EAAcya,qBAAWlS,GADjC,EAEgClB,mBAAS,MAFzC,mBAESuW,EAFT,KAEkBI,EAFlB,KAKE,SAASC,IAEPnW,EAAaG,WACVlJ,MAAK,SAAAmf,GAAK,OAAIF,EAAWE,EAAMC,MAAK,SAAC9U,EAAE+U,GAAH,OAAU/U,EAAEtE,SAASsE,EAAE3I,MAAM2d,cAAcD,EAAErZ,SAASqZ,EAAE1d,aAC5FxB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAIhC,OAVA6E,QAAQC,IAAIjE,GAQZ2H,qBAAU,kBAAMsW,MAAgB,IAG9B,sBAAKzd,UAAU,yBAAf,UACGR,EAAYiJ,cACX,cAAC,GAAD,CACEvI,KAAK,iBACLuc,YAAY,kCAFd,SAGE,cAAC,GAAD,CAAaO,iBAAkBS,MAE/B,GACJ,cAAC,GAAD,CACEvd,KAAK,QACLuc,YAAY,yCAFd,SAGE,cAAC,GAAD,CAAUW,QAASA,U,oBC0IZU,I,OAtKe,SAAC,GAC9B,IADgC5d,EACjC,EADiCA,KAAME,EACvC,EADuCA,YAAamI,EACpD,EADoDA,aAAcO,EAClE,EADkEA,UAAWiV,EAC7E,EAD6EA,eAAgBC,EAC7F,EAD6FA,IAAKC,EAClG,EADkGA,gBAW9F,SAASC,EAAmBC,GAExB,OAAOA,EAAWje,KAAO,IAAMie,EAAW5Z,SA0C9C,SAAS6Z,EAAU5X,EAAE6X,GACjB,OAAI7X,EAAEtG,KAAOme,EAAEne,KACJ,EACAsG,EAAEtG,KAAOme,EAAEne,MAKlBsG,EAAEjC,SAAW8Z,EAAE9Z,UAJP,EAMDiC,EAAEjC,SAAW8Z,EAAE9Z,SACf,EAEA,EAnEnB,MAuE8BsC,mBAAS,MAvEvC,mBAuEW6W,EAvEX,KAuEkBY,EAvElB,OAwEgDzX,oBAAU,GAxE1D,mBAwEW0X,EAxEX,KAwE2BC,EAxE3B,OAyE0C3X,mBAAS,IAzEnD,mBAyEW4X,EAzEX,KAyEwBC,EAzExB,KA2EIvX,qBAAU,WAEF2B,EAEAsN,GAAgBS,sBAAsB/N,GACrCvK,MAAK,SAAAC,GACF,IAAMmgB,EAAMngB,EAAIuM,KAAI,SAAAlC,GAEhB,OADAA,EAAErI,GAAKqI,EAAErB,OACFqB,KACR8U,KAAKS,GACRE,EAASK,MAEZjgB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MACrB4J,EAEPgN,GAAmBW,yBAAyB3N,GAC3ChK,MAAK,SAAAC,GACF,IAAMmgB,EAAMngB,EAAIuM,KAAI,SAAAlC,GAEhB,OADAA,EAAErI,GAAKqI,EAAErB,OACFqB,KACR8U,KAAKS,GACRE,EAASK,MAEZjgB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAG5B2I,EAAaG,WACZlJ,MAAK,SAAAC,GAAG,OAAI8f,EAAS9f,MACrBE,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,QAEjC,IAEH,IAAIigB,GAAc,EACdlB,GAA0B,IAAjBA,EAAMlb,SAIXoc,EAFA9V,EAEc,4BACPP,EAEO,+BAGA,mBAYtB,IAAMsW,EAAa,CACf3e,OACAE,YATAwe,IAEKlB,EACOtd,EAEA,oBAKZE,MAAO0d,EACPvd,SAlHJ,SAAkBkD,EAAlB,GACC,IAD0Bmb,EAC3B,EAD2BA,SAEvBb,EAAgB/d,EAAM4e,IACE,IAApBP,IAEAC,GAAmB,GACfT,GACAA,EAAe7d,EAAM4e,GAAW,KA4GxCC,OAvFJ,YAE4B,IAApBR,GACAN,EAAgB/d,EAAM,KAqF1Be,SAAUya,QAAQkD,KAAiBlB,EACnC1d,UAAW,sBAYf,OACI,qBAAKA,UAAU,yCAAf,SACI,cAAC,KAAD,CACIye,YAAaA,EACbO,4BA1HZ,YACC,IADqC1e,EACtC,EADsCA,MAElCoe,EAhCJ,SAAwCpe,GAEpC,IAAM2e,EAAa3e,EAAM4e,OAAO1a,cAC1B2a,EAAcF,EAAWzc,OAC/B,OAAuB,IAAhB2c,EAAoB,GAAKzB,EAAM0B,QAAO,SAAAC,GAAG,OAC3CA,EAAInf,KAAO,IAAMmf,EAAI9a,UAAUC,cAAc8a,MAAM,EAAGH,KAAiBF,KA2B7DM,CAA+Bjf,KAyHtCkf,4BAtHZ,WAEId,EAAe,KAqHPe,qBAlHZ,SAA8B9b,EAA9B,GACC,IADqCwa,EACtC,EADsCA,WAE9BJ,GACAA,EAAe7d,EAAMge,EAAmBC,GAAaA,EAAW3d,IACpEge,EAAkBL,EAAW3d,KA+GrB0d,mBAAoBA,EACpBwB,iBA9IZ,SAA0BvB,GAEtB,OAAO,gCAAMA,EAAWje,KAAjB,IAAwBie,EAAW5Z,aA6IlCob,MAjBZ,CACIC,UAAW,uBACXC,gBAAiB,kBACjB1B,WAAY,aACZ2B,sBAAuB,0BACvBC,qBAAsB,sBAadlB,WAAYA,QC6CbmB,G,kDA5Mb,WAAYhe,GACX,IAAD,sCACE,cAAMA,IAmBRL,UAAY,WAEV,QAAIO,OAAOC,OAAO,EAAKC,MAAMG,QAAQE,MAAK,SAAAoG,GAAC,OAAKA,MAEjC3G,OAAOC,OAAO,EAAKC,MAAMH,QAC1BQ,MAAK,SAAC/B,GAElB,MAAa,KAANA,MA3BX,EA+BAgC,YAAc,WAEZR,OAAOS,QAAQ,EAAKP,MAAMG,QAAQK,SAAQ,SAAClC,GAC1C,IAAD,cACiBA,EADjB,GACSmC,EADT,KACYC,EADZ,KAEE,EAAKC,SAASF,EAAGC,OApCrB,EAwCAC,SAAW,SAACC,EAAO1C,GAKjB,GAHA,EAAK2C,SAAS,CACZvB,aAAc,OAEZ,EAAKue,sBAAsBC,QAAQld,IAAU,GAAjD,CAEA,IAAIE,EAAW,GAED,KAAV5C,EAEF4C,EAAW,mCACD,uCAAiCC,KAAK7C,KAEhD4C,EAAW,oCAEb,EAAKD,SAAS,CACZhB,OAAO,2BAAM,EAAKG,MAAMH,QAAlB,kBAA2Be,EAAQE,QAzD7C,EA6DA3C,cAAgB,SAACyC,EAAO1C,GAEtB,EAAKyC,SAASC,EAAO1C,GACrB,EAAK2C,SAAS,CAAEV,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,kBAA2BS,EAAQ1C,OAhE3D,EAmEA8C,kBAAoB,SAAC+c,GAEd,EAAKvF,cASV,EAAK3X,SAAS,CAAE8Z,cAAc,IAC9B,EAAKnC,aAAauF,GACf5hB,MAAK,WAEJ,EAAK0E,SAAS,CACZV,OAAQ,GACRN,OAAQ,GACRP,aAAc,GACdqb,cAAc,OAGjBre,OAAM,SAACqB,GAGN,IAAI2B,EADJ8B,QAAQzD,MAAMA,GAIZ2B,EAF0B,kBAAxB3B,EAAMnB,SAASH,MAAoD,YAAxBsB,EAAMnB,SAASH,KAErB,YAAxBsB,EAAMnB,SAASH,KAAqB,EAAK2hB,iBAAmB,EAAKC,uBAGjE,uBAEjB,EAAKpd,SAAS,CACZvB,aAAcA,EACdqb,cAAc,QA/BlB,EAAK9Z,SAAS,CACZV,OAAQ,GACRN,OAAQ,GACRP,aAAc,MA1EpB,EA2GAgC,cAAgB,SAACC,GAIf,GAFAA,EAAMC,iBACN,EAAKlB,cACA,EAAKf,YAOR6B,QAAQC,IAAI,iCACZD,QAAQC,IAAI,EAAKrB,MAAMH,YAPzB,CACE,IAAIke,EAAa,EAAK/d,MAAMG,OAE5B,EAAKa,kBAAkB+c,KAnH3B,EA2HAG,eAAiB,SAACtd,EAAOud,EAAWjgB,GAElC,EAAK2C,SAAS,CAACud,gBAAiBlgB,EAAOiC,OAAO,2BAAM,EAAKH,MAAMG,QAAlB,kBAA2BS,EAAQud,MAC5E,EAAKE,wBACP,EAAKA,uBAAuBzd,EAAO1C,IA7HrC,EAAK8B,MAAQ,CACXG,OAAQ,GACRN,OAAQ,GACRP,aAAc,GACdV,SAAU,GACV+b,cAAc,EACdyD,gBAAiB,MAEnB,EAAKE,WAAL,UAAkB1e,EAAM0e,kBAAxB,QAAsC,cACtC,EAAK9F,aAAe5Y,EAAM4Y,aAC1B,EAAK5Z,SAAWgB,EAAMhB,SACtB,EAAKqf,uBAAL,UAA8Bre,EAAMqe,8BAApC,QAA8D,gDAC9D,EAAKD,iBAAL,UAAwBpe,EAAMoe,wBAA9B,QAAkD,mDAClD,EAAKnf,SAAWe,EAAMf,SACtB,EAAKwf,uBAAyBze,EAAMye,uBACpC,EAAKR,sBAAL,UAA6Bje,EAAMie,6BAAnC,QAA4D,GAjB9D,E,8DAmIC,IAAD,OACM1d,EAAS,GACPoe,EAAgB5c,IAAM6c,SAAS7V,IAAIjH,KAAK9C,UAAU,SAAA6f,GAEpD,GAAI9c,IAAM+c,eAAeD,GACzB,CACE,GAAIA,EAAM1gB,OAASF,EACnB,CAAC,IAAD,MACMC,EAAO2gB,EAAM7e,MAAM9B,KACnBE,EAAcygB,EAAM7e,MAAM5B,YAC1BD,EAAO0gB,EAAM7e,MAAM7B,KAEvB,OADAoC,EAAOrC,GAAP,UAAe,EAAKkC,MAAMG,OAAOrC,UAAjC,QAA0C,GAExC,qBAAKF,UAAU,yCAAf,SACE,cAACC,EAAD,CACEC,KAAMA,EACNC,KAAMA,EACNE,WAAW,qBACXD,YAAaA,EACbE,MAAK,UAAE,EAAK8B,MAAMG,OAAOrC,UAApB,QAA2B,GAChCH,MAAK,UAAE,EAAKqC,MAAMH,OAAO/B,UAApB,QAA2B,GAChCK,cAAe,EAAKA,kBAGrB,GAAIsgB,EAAM1gB,OAAS2d,GAC1B,CAAC,IAAD,IACM5d,EAAO2gB,EAAM7e,MAAM9B,KAIvB,OAHAqC,EAAOrC,GAAP,UAAe,EAAKkC,MAAMG,OAAOrC,UAAjC,QAA0C,GACrC,EAAKkC,MAAMoe,iBACd,EAAKvd,SAAS,CAACud,iBAAkB,IAC5Bzc,IAAMgd,aAAaF,EACxB,CACE9C,eAAgB,EAAKuC,eACrBrC,gBAAiB,EAAK1d,cACtByd,IAAG,UAAE,EAAK5b,MAAMG,OAAOrC,UAApB,QAA2B,MAItC,OAAO2gB,KAEX/c,KAAKb,SAAS,CAAEV,OAAQA,IACxBuB,KAAKb,SAAS,CAACjC,SAAU2f,M,0CAKzB7c,KAAKkd,oB,yCAGYC,EAAWC,GAExB3Q,KAAKC,UAAU1M,KAAK1B,MAAMG,UAAYgO,KAAKC,UAAU0Q,EAAU3e,SACjEuB,KAAKkd,oB,+BAKP,OACE,uBAAMnd,SAAUC,KAAKJ,cAArB,UACGI,KAAK1B,MAAMpB,SACZ,cAACQ,EAAD,CACEI,aAAW,EACXH,KAAMqC,KAAK4c,WACXhf,aAAcoC,KAAK1B,MAAMV,aACzBC,UAAWmC,KAAK7C,UAAY6C,KAAKnC,aAAgBmC,KAAK1B,MAAMoe,kBAAmD,IAAhC1c,KAAK1B,MAAMoe,gBAC1F1e,QAASgC,KAAK1B,MAAM2a,sB,GAvMRhZ,IAAMC,WC4Bbmd,GA5BW,SAAC,GAC1B,IAD2BC,EAC5B,EAD4BA,kBAkB1B,OACE,eAAC,GAAD,CAASV,WAAW,iBAAiB9F,aAhBvC,SAAuBlF,GAErB,OAAO,IAAIvX,SAAQ,SAACC,EAASC,GAE3BkX,GAAmBE,eAAeC,GACjCnX,MAAK,WAEJH,IACIgjB,GACFA,OAEH1iB,OAAM,SAACC,GAAD,OAASN,EAAOM,UAKyC0hB,uBAAuB,+CAAzF,UACE,mBAAGrgB,UAAU,aAAb,kBACA,cAACC,EAAD,CAAOC,KAAK,OAAOE,YAAY,iBAC/B,mBAAGJ,UAAU,aAAb,yBACA,cAACC,EAAD,CAAOC,KAAK,cAAcE,YAAY,4BCS7BihB,GAhCa,SAAC,GAC5B,IAD8BC,EAC/B,EAD+BA,YAAaZ,EAC5C,EAD4CA,WAAYnY,EACxD,EADwDA,aAsBtD,IAAMgZ,EAAeC,kBAAQ,GAE7B,OACE,eAAC,GAAD,CAASC,iBAAe,EAACf,WAAYA,EAAY9F,aAlBnD,WAEE,OAAO,IAAIzc,SAAQ,SAACC,EAASC,GAE3BkX,GAAmBO,oBAAoBvN,EAAcgZ,EAAapN,SAC/D5V,MAAK,WAEJH,IACIkjB,GACFA,OAEH5iB,OAAM,SAACC,GAAD,OAASN,EAAOM,UAOyD0hB,uBAAuB,oDAAoDI,uBAvBjK,SAAwBzd,EAAOwE,GAE7B+Z,EAAapN,QAAU3M,GAqBvB,UACE,mBAAGxH,UAAU,aAAb,uBACA,cAAC,GAAD,CAA0CE,KAAK,OAAOE,YAAY,kBAAtCmhB,OCfnBG,I,MAhBS,SAAC,GACxB,IADyB1gB,EAC1B,EAD0BA,SAAUyQ,EACpC,EADoCA,SAAUkQ,EAC9C,EAD8CA,YAAaC,EAC3D,EAD2DA,WAAYC,EACvE,EADuEA,eAAgB3gB,EACvF,EADuFA,QAE/ElB,EAAY,mBAQhB,OAPIyR,IACAzR,GAAa,6BACb2hB,IACA3hB,GAAa,gCACb6hB,IACA7hB,GAAa,mCAEb4hB,EACO,qBAAK5hB,UAAWA,EAAWkB,QAASA,EAApC,SAA8CF,IAE9C,mBAAGhB,UAAWA,EAAWkB,QAASA,EAAlC,SAA4CF,MCgJ5C8gB,GAvJc,SAAC,GAC7B,IA4EK3E,EAsCA4E,EAnH0BxZ,EAChC,EADgCA,aAAc6U,EAC9C,EAD8CA,QAAStb,EACvD,EADuDA,QAASkgB,EAChE,EADgEA,cAGxDxiB,EAAcya,qBAAWlS,GACzBG,EAAsB1I,EAAY0I,oBAAoBK,GAoE5D,OAAIzG,EAEK,cAAC,EAAD,IAILsb,GAAWA,EAAQ5a,OAAS,GAE9B2a,EAAWC,EAAQrS,KAAI,SAAAsS,GAErB,IACM/Y,GADe+Y,EAAOnd,KAAO,IAAMmd,EAAO9Y,UAClBC,cAAcxF,QAAQ,KAAM,IAC1D,OAAIkJ,EAGA,+BACE,6BAAI,eAAC,IAAD,CAAMhE,GAAE,0BAAqBmZ,EAAO7V,OAA5B,YAAsClD,GAA9C,UAA2D+Y,EAAO9Y,SAAlE,KAA8E8Y,EAAOnd,UACzF,6BAAKmd,EAAO9Q,QACZ,6BAAK8Q,EAAOnV,oBAAsB,eAAiB,WACnD,6BAAKmV,EAAO4E,cACZ,qBAAIjiB,UAAU,cAAd,UACE,sBAAMkB,QAAS,kBAvF3B,SAA0Bmc,GAExB,IAAI6E,GAAwB1iB,EAAYiJ,eAAiBP,EACzD,GAAImV,EAAOnV,oBACX,CACE,IAAIia,EAAc,iCAA6B9E,EAAOnd,KAApC,YAA4Cmd,EAAO9Y,SAAnD,4BACd2d,IAEFC,EAAc,gJAEZrjB,OAAO+d,QAAQsF,IAEjB5M,GAAmBO,oBAAoBvN,EAAc8U,EAAO7V,QAAQ,GACjEjJ,MAAK,WACA2jB,EACFpjB,OAAOC,SAASC,QAAQ,yBAExBgjB,OAEHtjB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,UAGlC,CACE,IAAIwjB,EAAc,iCAA6B9E,EAAOnd,KAApC,YAA4Cmd,EAAO9Y,SAAnD,4BACd2d,IAEFC,EAAc,kCAA8B9E,EAAOnd,KAArC,YAA6Cmd,EAAO9Y,SAApD,qIAEZzF,OAAO+d,QAAQsF,IAEjB5M,GAAmBO,oBAAoBvN,EAAc8U,EAAO7V,QAAQ,GACjEjJ,MAAK,WAEA2jB,EACFpjB,OAAOC,SAASC,QAAQ,yBAExBgjB,OAEHtjB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,OAiDHyjB,CAAiB/E,IAASrd,UAAU,6CAAzD,SAAuGqd,EAAOnV,oBAAsB,SAAW,YAC/I,sBAAMhH,QAAS,kBA5C3B,SAAyBmc,GAEvB,IAAI6E,EAAuB7E,EAAO7V,SAAWhI,EAAYmI,KAAKnH,KAAOhB,EAAYiJ,eAAiBP,EAC9Fia,EAAc,iCAA6B9E,EAAOnd,KAApC,YAA4Cmd,EAAO9Y,SAAnD,yBACd2d,IAEFC,EAAiB,uGAEfrjB,OAAO+d,QAAQsF,IAEjB5M,GAAmBU,yBAAyB1N,EAAc8U,EAAO7V,QAC9DjJ,MAAK,WAEA2jB,EACFpjB,OAAOC,SAAS0H,SAEhBub,OAEHtjB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MA0BD0jB,CAAgBhF,IAASrd,UAAU,6CAAxD,yBAPKqd,EAAO7c,IAchB,+BACE,6BAAI,eAAC,IAAD,CAAM0D,GAAE,0BAAqBmZ,EAAO7V,OAA5B,YAAsClD,GAA9C,UAA2D+Y,EAAO9Y,SAAlE,KAA8E8Y,EAAOnd,UACzF,6BAAKmd,EAAO9Q,QACZ,6BAAK8Q,EAAOnV,oBAAsB,eAAiB,WACnD,6BAAKmV,EAAO4E,gBAJL5E,EAAO7c,OAiBtBuhB,EAFE7Z,EAGA,+BACE,sCACA,gDACA,sCACA,8CACA,4CAMF,+BACE,sCACA,gDACA,sCACA,iDAMJ,wBAAOlI,UAAU,WAAjB,UACE,uBAAOA,UAAU,kBAAjB,SACG+hB,IAEH,gCACG5E,QAjCE,qE,oBCsEImF,GAhLc,SAAC,GAC7B,IAD+BC,EAChC,EADgCA,YAAaC,EAC7C,EAD6CA,oBAGrChjB,EAAcya,qBAAWlS,GAE/B,SAAS0a,EAA6Bzf,EAAO1C,GAEvCA,IAAUoiB,EAAcC,GAAe3f,IAGzC4f,EAAiB1gB,OAAOC,OAAPD,OAAA,IAAAA,QAAA,IAAAA,CAAA,GACZwgB,GADY,GAAAxgB,OAAA,IAAAA,CAAA,GAEdygB,EAFczgB,OAAA,IAAAA,QAAA,IAAAA,CAAA,GAIVwgB,EAAcC,IAJJ,GAAAzgB,OAAA,IAAAA,CAAA,GAKZc,EAAQ1C,QA0BjB,SAASqV,EAAiBkN,GAIxB,OADAA,EAAkBriB,GAAKkiB,EAAcC,GAAeniB,GAC7C+U,GAAmBI,iBAAiBkN,GAQ7C,SAASC,IAEkB,MAArBC,GACFC,EAAqB,MACvBzN,GAAmBW,yBAAyBwM,EAAcC,GAAeniB,IACtEjC,MAAK,SAAAE,GAAI,OAAIukB,EAAqBvkB,MAClCC,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MA1DlC,MA6D4CkI,mBAAS,GA7DrD,mBA6DS8b,EA7DT,KA6DwBM,EA7DxB,OA8D4Cpc,mBAAS0b,GA9DrD,mBA8DSG,EA9DT,KA8DwBE,EA9DxB,OA+DsC/b,oBAAS,GA/D/C,mBA+DSqc,EA/DT,KA+DqBC,EA/DrB,OAgEoDtc,mBAAS,MAhE7D,mBAgESkc,EAhET,KAgE4BC,EAhE5B,KAuEE,GALA7b,qBAAU,kBAAM2b,MAA0B,CAACH,EAAeD,IAEtDA,EAAclgB,SAAW+f,EAAY/f,QACvCogB,EAAiBL,IAEdG,EAEH,OAAO,sDAGT,KAAIC,GAAiBD,EAAclgB,QAAnC,CAOA,IADA,IAAI4gB,EAAmB,GAlFzB,WAmFWnQ,GAEP,IAAMvK,EAAMga,EAAczP,GAC1BmQ,EAAiB7d,KAAK,cAAC,GAAD,CAAyBkM,SAAUwB,IAAM0P,EAAezhB,QAAS,kBAAM+hB,EAAiBhQ,IAAxF,SAA6FvK,EAAIxI,MAA3E+S,KAHrCA,EAAI,EAAGA,EAAIyP,EAAclgB,OAAQyQ,IACzC,EADQA,GAMT,IAIIoQ,EACAC,EALEC,EAAoBb,EAAcC,GAElCza,EAAsB1I,EAAY0I,oBAAoBqb,EAAkB/iB,IAiC9E,OA7BI0H,IAEFmb,EACE,cAAC,GAAD,CACEnjB,KAAK,yBACLuc,YAAY,iCAFd,SAGE,cAAC,GAAD,CAEE6E,YAxDR,WAEEwB,KAuDMva,aAAcgb,EAAkB/iB,GAChCkgB,WAAU,iBAAY6C,EAAkBrjB,OAHnCqjB,EAAkBrjB,QAO7BojB,EACE,cAAC,GAAD,CACE9G,QAAM,EACNtc,KAAK,oBACLuc,YAAY,4GAHd,SAIE,cAAC,EAAD,CACEzc,UAAU,cACVkB,QAhGR,WAEMpC,OAAO+d,QAAQ,+FAEjBsG,GAAc,GACd5N,GAAmBK,iBAAiB8M,EAAcC,GAAeniB,IAC9DjC,MAAK,WAEJ4kB,GAAc,GACVX,GACFA,OAEH9jB,OAAM,SAACC,GAENwkB,GAAc,GACd3f,QAAQzD,MAAMpB,QA+EhB,SAGGukB,EAAa,cAAC,EAAD,CAAS5hB,KAAG,IAAM,yBAQtC,sBAAKtB,UAAU,sBAAf,UACE,qBAAKA,UAAU,qBAAf,SACE,cAAC,KAAD,CACEwjB,gBAAgB,sBAChBC,WAAY,IACZC,YAAa,CAAEC,UAAW,qBAH5B,SAIGP,MAGL,sBAAKpjB,UAAU,yBAAf,UACE,cAAC,GAAD,CACEE,KAAK,kBACLuc,YAAY,8CAFd,SAGE,cAAC,GAAD,CAEEnc,MAAOijB,EAAkBrjB,KACzB2a,UAAU,OACVF,SAAUzS,EACV0S,aAAcjF,EACdmF,UAAW2H,GALNE,KAOT,cAAC,GAAD,CACEziB,KAAK,cACLuc,YAAY,kEAFd,SAGE,cAAC,GAAD,CAEE/B,SAAO,EACPpa,MAAOijB,EAAkB9G,YACzB9B,SAAUzS,EACV2S,UAAU,cACVD,aAAcjF,EACdmF,UAAW2H,GANNE,KAQRU,EACD,cAAC,GAAD,CACEnjB,KAAK,UACLuc,YAAavU,EAAsB,4EAA8E,wCAFnH,SAGE,cAAC,GAAD,CAEEK,aAAcgb,EAAkB/iB,GAChCsB,QAA8B,MAArBihB,EACT3F,QAAS2F,EACTf,cAAec,GAJVH,KAMRW,QA3FLL,EAAiBN,EAAgB,IChBtBiB,GApEY,WAGzB,IAAMpkB,EAAcya,qBAAWlS,GAE/B,SAAS8b,KAEIrkB,EAAYiJ,cAAgB8M,GAAmBC,eAAiBD,GAAmBM,oBAE3FtX,MAAK,SAAAulB,GAAI,OAAIC,EAAeD,EAAKnG,MAAK,SAACnX,EAAE6X,GAAH,OAAS7X,EAAEtG,KAAK2d,cAAcQ,EAAEne,aACtExB,OAAM,SAACC,GAAD,OAAS6E,QAAQzD,MAAMpB,MATpC,IAkBMqlB,EA+BAC,EAjDN,EAYwCpd,mBAAS,MAZjD,mBAYS0b,EAZT,KAYsBwB,EAZtB,KA2DE,OA9CA5c,qBAAU,WAER0c,MACC,IAeDG,EAZGzB,EAUIA,EAAY/f,OAAS,EAG1B,cAAC,GAAD,CACEtC,KAAK,qBACLuc,YAAY,IAFd,SAGE,cAAC,GAAD,CAAsB8F,YAAaA,EAAaC,oBAAqBqB,MAOvE,cAAC,GAAD,CACE3jB,KAAK,qBACLuc,YAAajd,EAAYiJ,cAAgB,oCAAsC,4CAtBjF,cAAC,GAAD,CACEvI,KAAK,qBACLuc,YAAY,IAFd,SAGE,cAAC,EAAD,MAyBFjd,EAAYiJ,gBACdwb,EACE,cAAC,GAAD,CACE/jB,KAAK,wBACLuc,YAAY,8CAFd,SAGE,cAAC,GAAD,CAAmB2E,kBAAmByC,OAK1C,sBAAK7jB,UAAU,yBAAf,UACGikB,EACAD,MCvCQE,GA3BU,SAAC,GACzB,IAD0Bpb,EAC3B,EAD2BA,UAAWqb,EACtC,EADsCA,iBAiBpC,OACE,eAAC,GAAD,CAASzD,WAAW,gBAAgB9F,aAhBtC,SAAsBlC,GAEpB,OAAO,IAAIva,SAAQ,SAACC,EAASC,GAE3Bga,GAAkBI,gBAAgB3P,EAAW4P,GAC5Cna,MAAK,WAEJH,IACI+lB,GACFA,OAEHzlB,OAAM,SAACC,GAAD,OAASN,EAAOM,UAKuCshB,sBAAuB,CAAC,UAAxF,UACE,mBAAGjgB,UAAU,aAAb,kBACA,cAACC,EAAD,CAAOC,KAAK,OAAOE,YAAY,kBAC/B,mBAAGJ,UAAU,aAAb,oBACA,cAACC,EAAD,CAAOC,KAAK,SAASC,KAAK,aCqBjBikB,GA3CI,SAAC,GACnB,IADoBtb,EACrB,EADqBA,UAAWub,EAChC,EADgCA,WAG9B,SAASC,EAASC,EAAGC,EAAGC,GACtBA,GAAK,IACL,IAAMje,EAAIge,EAAIE,KAAKC,IAAIF,EAAG,EAAIA,GAAK,IAC7BG,EAAI,SAAAC,GACR,IAAMhiB,GAAKgiB,EAAIN,EAAI,IAAM,GACnB1e,EAAQ4e,EAAIje,EAAIke,KAAKI,IAAIJ,KAAKC,IAAI9hB,EAAI,EAAG,EAAIA,EAAG,IAAK,GAC3D,OAAO6hB,KAAKK,MAAM,IAAMlf,GAAOmf,SAAS,IAAIC,SAAS,EAAG,MAE1D,MAAM,IAAN,OAAWL,EAAE,IAAb,OAAkBA,EAAE,IAApB,OAAyBA,EAAE,IAwB7B,OACE,eAAC,GAAD,CAASlE,WAAW,UAAU9F,aAtBhC,SAAgB3L,GAGd,IAAMhQ,EACN,CACEoP,MAAOY,EAAIZ,MACXxI,MAAOye,EAAyB,IAAhBI,KAAKQ,SAAgB,IAAK,KAE5C,OAAO,IAAI/mB,SAAQ,SAACC,EAASC,GAE3B8S,GAAYG,UAAUxI,EAAW7J,GAChCV,MAAK,WAEJH,IACIimB,GACFA,OAEH3lB,OAAM,SAACC,GAAD,OAASN,EAAOM,UAK2B0hB,uBAAuB,uDAAuDD,iBAAiB,qDAAnJ,UACE,mBAAGpgB,UAAU,aAAb,iBACA,cAACC,EAAD,CAAOC,KAAK,QAAQE,YAAY,oBCNvB+kB,GAhCU,SAAC,GACzB,IAD2B7D,EAC5B,EAD4BA,YAAaZ,EACzC,EADyCA,WAAY5X,EACrD,EADqDA,UAAWP,EAChE,EADgEA,aAsB9D,IAAMgZ,EAAeC,kBAAQ,GAE7B,OACE,eAAC,GAAD,CAASC,iBAAe,EAACf,WAAYA,EAAY9F,aAlBnD,WAEE,OAAO,IAAIzc,SAAQ,SAACC,EAASC,GAE3B+X,GAAgBM,iBAAiB5N,EAAWyY,EAAapN,SACtD5V,MAAK,WAEJH,IACIkjB,GACFA,OAEH5iB,OAAM,SAACC,GAAD,OAASN,EAAOM,UAOsD0hB,uBAAuB,yCAAyCI,uBAvBnJ,SAAwBzd,EAAOwE,GAE7B+Z,EAAapN,QAAU3M,GAqBvB,UACE,mBAAGxH,UAAU,aAAb,uBACA,cAAC,GAAD,CAA0CuI,aAAcA,EAAcrI,KAAK,OAAOE,YAAY,kBAAlEmhB,OCkCnB6D,GA5DO,SAAC,GACtB,IAqBKjI,EAtBmB5U,EACzB,EADyBA,aAAc8c,EACvC,EADuCA,YAAavc,EACpD,EADoDA,UAAWwc,EAC/D,EAD+DA,cAC/D,EAEsCze,mBAAS,MAF/C,mBAES0e,EAFT,KAEqBC,EAFrB,OAGgC3e,oBAAS,GAHzC,mBAGS/E,EAHT,KAGkB6Z,EAHlB,KAgBE,GAXAxU,qBAAU,WAERkR,GAAkBC,cAAcxP,GAC7BvK,MAAK,SAAAE,GAEJ+mB,EAAc/mB,GACdkd,GAAW,MAEZjd,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,QAC7B,CAACmK,EAAWwc,IAEXxjB,EAEF,OAAO,cAAC,EAAD,IAIT,KAAIyjB,GAAcA,EAAW/iB,OAAS,GAkBpC,OAAO,oEAhBP,IAAMijB,EAAQ,IAAIC,KAmBpB,OAlBEvI,EAAWoI,EAAWxa,KAAI,SAAA2N,GAExB,IAAMiN,EAAWjN,EAAUxY,KAAKlB,QAAQ,KAAK,KACvC4mB,EAAWP,EAAYrmB,QAAQ,KAAM,KACrC6mB,EAAW,IAAIH,KAAKhN,EAAUM,QAAUyM,EAAQ,WAAa,GACnE,OACE,+BACE,+BAAI,4BAAII,IAAR,IAAsB,cAAC,IAAD,CAAM3hB,GAAE,6BAAwBqE,EAAxB,YAAwCqd,EAAxC,YAAoD9c,EAApD,YAAiE6c,EAAjE,YAA6EjN,EAAUlY,IAA/F,SAAsGkY,EAAUxY,UACtI,6BAAKwY,EAAUvI,MAAM3N,SACrB,6BAAKkW,EAAUM,WAHRN,EAAUlY,OAavB,wBAAOR,UAAU,6BAAjB,UACE,uBAAOA,UAAU,kBAAjB,SACE,+BACE,sCACA,uCACA,6CAGJ,gCACGmd,QC8EM2I,GAlIW,SAAC,GAAgE,IA6ErF3I,EAgCA4I,EA7GsBxd,EAA8D,EAA9DA,aAAcO,EAAgD,EAAhDA,UAAWsU,EAAqC,EAArCA,QAAStb,EAA4B,EAA5BA,QAASkgB,EAAmB,EAAnBA,cAE/DxiB,EAAcya,qBAAWlS,GACzBI,EAAmB3I,EAAY2I,iBAAiBW,EAAWP,GAqEjE,OAAIzG,EAEK,cAAC,EAAD,IAILsb,GAAWA,EAAQ5a,OAAS,GAE9B2a,EAAWC,EAAQrS,KAAI,SAAAsS,GAErB,IAEI2I,EADE1hB,GADe+Y,EAAOnd,KAAO,IAAMmd,EAAO9Y,UAClBC,cAAcxF,QAAQ,KAAM,IAW1D,OATImJ,IAEF6d,EACE,qBAAIhmB,UAAU,cAAd,UACE,sBAAMkB,QAAS,kBApFzB,SAA0Bmc,GAExB,IAAI6E,GAAwB1iB,EAAYiJ,gBAAkBjJ,EAAY0I,oBAAoBK,IAAiBJ,EAC3G,GAAIkV,EAAOlV,iBACX,CACE,IAAIga,EAAc,iCAA6B9E,EAAOnd,KAApC,YAA4Cmd,EAAO9Y,SAAnD,4BACd2d,IAEFC,EAAc,gJAEZrjB,OAAO+d,QAAQsF,IAEjB/L,GAAgBM,iBAAiB5N,EAAWuU,EAAO7V,QAAQ,GACxDjJ,MAAK,WAEA2jB,EACFpjB,OAAOC,SAAS0H,SAEhBub,OAEHtjB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,UAGlC,CACE,IAAIwjB,EAAc,kCAA8B9E,EAAOnd,KAArC,YAA6Cmd,EAAO9Y,SAApD,wBACd2d,IAEFC,EAAc,kCAA+B9E,EAAOnd,KAAtC,YAA8Cmd,EAAO9Y,SAArD,kIAEZzF,OAAO+d,QAAQsF,IAEjB/L,GAAgBM,iBAAiB5N,EAAWuU,EAAO7V,QAAQ,GACxDjJ,MAAK,WAEA2jB,EACFpjB,OAAOC,SAAS0H,SAEhBub,OAEHtjB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,OA6CLyjB,CAAiB/E,IAASrd,UAAU,6CAAzD,SAAuGqd,EAAOlV,iBAAmB,SAAW,YAC5I,sBAAMjH,QAAS,kBAxCzB,SAAyBmc,GAEvB,IAAI6E,EAAuB7E,EAAO7V,SAAWhI,EAAYmI,KAAKnH,KAAOhB,EAAYiJ,gBAAkBjJ,EAAY0I,oBAAoBK,IAAiBJ,EAChJga,EAAc,iCAA6B9E,EAAOnd,KAApC,YAA4Cmd,EAAO9Y,SAAnD,sBACd2d,IAEFC,EAAiB,oGAEfrjB,OAAO+d,QAAQsF,IAEjB/L,GAAgBQ,sBAAsB9N,EAAWuU,EAAO7V,QACvDjJ,MAAK,WAEA2jB,EACFpjB,OAAOC,SAAS0H,SAEhBub,OAEHtjB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAsBD0jB,CAAgBhF,IAASrd,UAAU,6CAAxD,wBAKJ,+BACE,6BAAI,eAAC,IAAD,CAAMkE,GAAE,0BAAqBmZ,EAAO7V,OAA5B,YAAsClD,GAA9C,UAA2D+Y,EAAO9Y,SAAlE,KAA8E8Y,EAAOnd,UACzF,6BAAKmd,EAAO9Q,QACZ,6BAAK8Q,EAAOlV,iBAAmB,gBAAkB,WACjD,6BAAKkV,EAAO4E,cACX+D,IALM3I,EAAO7c,OAelB2H,IACF4d,EAAY,0CAEZ,wBAAO/lB,UAAU,WAAjB,UACE,uBAAOA,UAAU,kBAAjB,SACE,+BACE,sCACA,gDACA,sCACA,8CACC+lB,OAGL,gCACG5I,QAlBE,kEC3BI8I,GA/EC,SAAC,GAChB,IAwCK9I,EAzCa5U,EACnB,EADmBA,aAAcO,EACjC,EADiCA,UAAWwc,EAC5C,EAD4CA,cAIpCnd,EADc8R,qBAAWlS,GACMI,iBAAiBW,EAAWP,GAHnE,EAK0B1B,mBAAS,MALnC,mBAKSuJ,EALT,KAKevC,EALf,OAMgChH,oBAAS,GANzC,mBAMS/E,EANT,KAMkB6Z,EANlB,KAcE,SAASuK,IAEP/U,GAAYC,QAAQtI,GACnBvK,MAAK,SAAAE,GAEJoP,EAAQpP,GACRkd,GAAW,MAEZjd,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAa9B,OA1BAwI,qBAAU,WAER+e,MACC,CAACpd,EAAWwc,IAuBXxjB,EAEK,cAAC,EAAD,IAILsO,GAAQA,EAAK5N,OAAS,GAExB2a,EAAW/M,EAAKrF,KAAI,SAAAkE,GAElB,OACE,+BACE,+BAAI,cAAC,EAAD,CAAQpJ,MAAOoJ,EAAIpJ,QAAvB,KAAmCoJ,EAAIZ,SACvC,6BAAKY,EAAIkX,gBACRhe,EACC,oBAAInI,UAAU,cAAd,SACE,sBAAMkB,QAAS,kBA1B3B,SAAyB+N,GAEnBnQ,OAAO+d,QAAP,sCAA8C5N,EAAIZ,MAAlD,yBAEF8C,GAAYI,UAAUzI,EAAWmG,EAAIzO,IACpCjC,MAAK,kBAAM2nB,OACXxnB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAoBC0jB,CAAgBpT,IAAMjP,UAAU,6CAArD,2BAEAgW,IAPG/G,EAAIzO,OAiBjB,wBAAOR,UAAU,6BAAjB,UACE,uBAAOA,UAAU,kBAAjB,SACE,+BACE,sCACA,uCACCmI,EAAmB,8CAAmB6N,OAG3C,gCACGmH,QAbE,+DCsQIiJ,GAvTW,SAAC,GAC1B,IAD4B7D,EAC7B,EAD6BA,YAAa8D,EAC1C,EAD0CA,eAAgBC,EAC1D,EAD0DA,iBAGlD9mB,EAAcya,qBAAWlS,GAFjC,EAIgDlB,mBAAS,GAJzD,mBAIS0f,EAJT,KAI0BC,EAJ1B,OAK0C3f,mBAAS,GALnD,mBAKS4f,EALT,KAKuBC,EALvB,OAM4C7f,mBAAS0b,GANrD,mBAMSG,EANT,KAMwBE,EANxB,OAO0C/b,oBAAS,GAPnD,mBAOS8f,EAPT,KAOuBC,EAPvB,OAQsC/f,oBAAS,GAR/C,mBAQSqc,EART,KAQqBC,EARrB,OAS8Ctc,mBAAS,MATvD,mBASSggB,EATT,KASyBC,EATzB,OAU8DjgB,mBAAS,GAVvE,mBAUSkgB,EAVT,KAUiCC,EAVjC,OAWkDngB,mBAAS,GAX3D,mBAWSogB,EAXT,KAW2BC,EAX3B,KAgBE,SAASC,EAAuBC,GAK9B,IAHA,IAAMC,EAAWD,EAAShI,QAAO,SAAAkI,GAAC,OAAIA,EAAEpnB,KAAKggB,QAAQ,gBAAkB,KACnEjN,EAAI,EACJ/S,EAAO,cAIJmnB,EAAS5kB,MAAK,SAAA6kB,GAAC,OAAIA,EAAEpnB,OAASA,MAEnC+S,IACA/S,EAAO,eAAiB+S,EAE1B,OAAO/S,EAuBT,SAASqnB,EAA0BvkB,EAAO1C,GAEpCA,IAAUoiB,EAAc6D,GAAiBa,SAASX,GAAczjB,KAElE0f,EAAc6D,GAAiBa,SAASX,GAAczjB,GAAS1C,EAE/DsiB,EAAiB1gB,OAAOC,OAAPD,OAAA,IAAAA,CAAA,GACZwgB,MAqCT,SAASlM,EAAcgR,GAGrB,IAAM9e,EAAMga,EAAc6D,GAE1B,OADAiB,EAAehnB,GAAKkI,EAAI0e,SAASX,GAAcjmB,GACxC4V,GAAgBI,cAAc9N,EAAIlI,GAAIgnB,EAAehnB,GAAIgnB,GAQlE,SAASC,IAIP,GAFsB,MAAlBZ,GACFC,EAAkB,MAChBpE,EAAc6D,GAAiBa,SAASX,GAC5C,CACE,IAAM3d,EAAY4Z,EAAc6D,GAAiBa,SAASX,GAAcjmB,GACxE4V,GAAgBS,sBAAsB/N,GACnCvK,MAAK,SAAAE,GAAI,OAAIqoB,EAAkBroB,MAC/BC,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,WAG9BmoB,EAAkB,MAItB,GA/GA3f,qBAAU,kBAAMsgB,MAAuB,CAAClB,EAAiBE,EAAc/D,IA+GnEnS,KAAKC,UAAUkS,KAAmBnS,KAAKC,UAAU+R,GAInD,OAFAqE,GAAgB,QAChBhE,EAAiBL,GAInB,IAAKG,EACH,OAAO,mDAMT,IAJA,IAAMa,EAAoBb,EAAc6D,GAClCre,IAAsBqb,GAAoB/jB,EAAY0I,oBAAoBqb,EAAkB/iB,IAC9FknB,EAAqB,GAzI3B,WA2IWzU,GAEP,IAAMvK,EAAMga,EAAczP,GAC1ByU,EAAmBniB,KAAK,cAAC,GAAD,CAAyBkM,SAAUwB,IAAMsT,EAAiBrlB,QAAS,kBAAMslB,EAAmBvT,IAA5F,SAAiGvK,EAAIxI,MAA/E+S,KAHvCA,GAAI,EAAGA,GAAIyP,EAAclgB,OAAQyQ,KACzC,EADQA,IAMT,IAMI0U,GAgHAC,GAtHER,GAAW7D,EAAkB6D,SAC7BS,GAAkBT,GAASrc,KAAI,SAAClC,EAAGoK,GAEvC,OAAO,cAAC,GAAD,CAAyBxB,SAAUwB,IAAMwT,EAAcvlB,QAAS,kBAAMwlB,EAAgBzT,IAAtF,SAA2FpK,EAAE3I,MAAvE+S,MAI/B,GAAwB,IAApBmU,GAAS5kB,OAITmlB,GAFEzf,EAEQ,0HAGA,8FAGd,CACE,GAAIue,GAAgBW,GAAS5kB,OAG3B,YADAkkB,EAAgB,GAGlB,IAAMoB,GAAiBV,GAASX,GAC1Bte,GAAmB3I,EAAY2I,iBAAiB2f,GAAetnB,GAAI+iB,EAAkB/iB,IAC3FmnB,GACE,qCACE,cAAC,GAAD,CACEznB,KAAK,eADP,SAEE,cAAC,GAAD,CAEEI,MAAOwnB,GAAe5nB,KACtBya,SAAUxS,GACV0S,UAAU,OACVD,aAAcpE,EACdsE,UAAWyM,GANb,UACUhB,EADV,YAC6BE,MAO/B,cAAC,GAAD,CACEvmB,KAAK,cADP,SAEE,cAAC,GAAD,CACEwa,SAAO,EAEPG,UAAU,cACVF,SAAUxS,GACV7H,MAAOwnB,GAAerL,YACtB7B,aAAcpE,EACdsE,UAAWyM,GAPb,UAEUhB,EAFV,YAE6BE,MAO/B,eAAC,GAAD,CACEvmB,KAAK,aACLuc,YAAatU,GAAmB,qCAAuC,IAFzE,UAGGA,GACC,cAAC,GAAD,CAEEW,UAAWgf,GAAetnB,GAC1B2jB,iBAxIZ,WAEE6C,EAA0BtC,KAAKQ,YAmIvB,kBACkB4C,GAAetnB,KAG/B,GACJ,cAAC,GAAD,CAEE+H,aAAcgb,EAAkB/iB,GAChC8kB,cAAeyB,EACf1B,YAAayC,GAAe5nB,KAC5B4I,UAAWgf,GAAetnB,IAL5B,cACcsnB,GAAetnB,QAM9B2H,GACC,cAAC,GAAD,CACEjI,KAAK,sBACLuc,YAAY,2DAFd,SAGE,cAACsL,GAAD,CAEEzG,YA/GZ,WAEEmG,KA8GU3e,UAAWgf,GAAetnB,GAC1B+H,aAAcga,EAAYgE,GAAiB/lB,GAC3CkgB,WAAU,iBAAYoH,GAAe5nB,OAJhC4nB,GAAe5nB,QAMtB,GACJ,cAAC,GAAD,CACEA,KAAK,UACLuc,YAAY,4EAFd,SAGE,cAAC,GAAD,CAEElU,aAAcgb,EAAkB/iB,GAChCsI,UAAWgf,GAAetnB,GAC1BsB,QAA2B,MAAlB+kB,EACTzJ,QAASyJ,EACT7E,cAAeyF,GANjB,UACUlB,EADV,YAC6BE,MAO/B,eAAC,GAAD,CACEvmB,KAAK,OACLuc,YAAatU,GAAmB,+BAAiC,IAFnE,UAGGA,GACC,cAAC,GAAD,CAEEW,UAAWgf,GAAetnB,GAC1B6jB,WA1KZ,WAEE6C,EAAoBxC,KAAKQ,YAqKjB,iBACiB4C,GAAetnB,KAG9B,GACJ,cAAC,GAAD,CAEE+H,aAAcgb,EAAkB/iB,GAChC8kB,cAAe2B,EACfne,UAAWgf,GAAetnB,IAJ5B,iBACiBsnB,GAAetnB,QAKjC2H,GACC,cAAC,GAAD,CACEqU,QAAM,EACNtc,KAAK,iBACLuc,YAAY,4GAHd,SAIE,cAAC,EAAD,CACEzc,UAAU,cACVkB,QApLZ,WAEE,GAAIpC,OAAO+d,QAAQ,8FACnB,CACE,IAAMnU,EAAMga,EAAc6D,GAC1BpD,GAAc,GACd/M,GAAgBK,cAAc/N,EAAIlI,GAAIkI,EAAI0e,SAASX,GAAcjmB,IAC9DjC,MAAK,WAEJ4kB,GAAc,GACdrkB,OAAOsI,SAAS,EAAG,GACfkf,GACFA,OAEH5nB,OAAM,SAACC,GAENwkB,GAAc,GACd3f,QAAQzD,MAAMpB,QAiKZ,SAGGukB,EAAa,cAAC,EAAD,CAAS5hB,KAAG,IAAM,qBAGlC,MAqBV,OAbEsmB,GAFEjB,EAEO,cAAC,EAAD,IAIP,qCACE,cAAC,IAAD,CACEhhB,KAAMwS,IACNnY,UAAU,YAHd,qBAUF,sBAAKA,UAAU,sBAAf,UACE,qBAAKA,UAAU,qBAAf,SACE,cAAC,KAAD,CACEwjB,gBAAgB,sBAChBC,WAAY,IACZC,YAAa,CAAEC,UAAW,qBAH5B,SAIG+D,MAGL,qBAAK1nB,UAAU,gDAAf,SACE,eAAC,KAAD,CACEwjB,gBAAgB,sBAChBC,WAAY,IACZC,YAAa,CAAEC,UAAW,qBAH5B,UAIGzb,EACC,cAAC,GAAD,CAAiB2Z,eAAgB8E,EAAczlB,QAvQzD,WAEE,IAAIylB,EAAJ,CAGA,IAAMje,EAAMga,EAAc6D,GACpBxU,EAAU,CACd7R,KAAMinB,EAAuBze,EAAI0e,UACjC3K,YAAa,gCAEfmK,GAAgB,GAChBxQ,GAAgBG,YAAY7N,EAAIlI,GAAIuR,GACjCxT,MAAK,WAEA8nB,GACFA,OAEH3nB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,QAuPpBgjB,aAAW,EAACC,WAAY+E,EAD1B,SAEGiB,UAED5R,EACH6R,QAGL,qBAAK7nB,UAAU,yBAAf,SACG2nB,SCpQMK,GAxDS,WAEtB,IAAMxoB,EAAcya,qBAAWlS,GAC/B,SAAS8b,IAEP,IAAIoE,EAAOzoB,EAAYiJ,cAAgB8M,GAAmBC,eAAiBD,GAAmBM,iBAC1FqS,EAAQ1oB,EAAYiJ,cAAgB2N,GAAgBC,YAAcD,GAAgBE,cACtF2R,IACG1pB,MAAK,SAAAulB,GAEJ3lB,QAAQgqB,IAAIrE,EAAK/Y,KAAI,SAAAqd,GAAC,OAAIF,EAAME,EAAE5nB,QAC/BjC,MAAK,SAAA6oB,GAEJ,IAAK,IAAInU,EAAI,EAAGA,EAAImU,EAAS5kB,OAAQyQ,IACrC,CACE,IAAMlK,EAAOqe,EAASnU,GACtB6Q,EAAK7Q,GAAGmU,SAAWre,EAAK4U,MAAK,SAACnX,EAAE6X,GAAH,OAAS7X,EAAEtG,KAAK2d,cAAcQ,EAAEne,SAE/D6jB,EAAeD,EAAKnG,MAAK,SAACnX,EAAE6X,GAAH,OAAS7X,EAAEtG,KAAK2d,cAAcQ,EAAEne,gBAG9DxB,OAAM,SAACC,GAAD,OAAS6E,QAAQzD,MAAMpB,MApBpC,MAuBwCkI,mBAAS,MAvBjD,mBAuBS0b,EAvBT,KAuBsBwB,EAvBtB,KA6BE,OALA5c,qBAAU,WAER0c,MACC,IAEEtB,EAcD,qBAAKviB,UAAU,yBAAf,SACE,cAAC,GAAD,CACEE,KAAK,kBACLuc,YAAY,IAFd,SAGE,cAAC,GAAD,CAAmB8F,YAAaA,EAAa8D,eAAgBxC,EAAqByC,iBAAkBzC,QAfxG,qBAAK7jB,UAAU,yBAAf,SACE,cAAC,GAAD,CACEE,KAAK,kBACLuc,YAAY,IAFd,SAGE,cAAC,EAAD,SCyDK4L,GAlGiB,SAAC,GAChC,IAOKlL,EAmDAmL,EAMAC,EAjE6B7S,EACnC,EADmCA,WAAY3D,EAC/C,EAD+CA,QAAS5P,EACxD,EADwDA,OAGtD,OAAKA,GAMDA,GAAUA,EAAOK,OAAS,IAU5B2a,GARAhb,EAASA,EAAOwb,MAAK,SAACnX,EAAG6X,GAEvB,OAAoB,OAAhB7X,EAAE0C,WAAsC,OAAhBmV,EAAEnV,WACpB,EACU,OAAhB1C,EAAE0C,WAAsC,OAAhBmV,EAAEnV,UACrB,EACF,IAAIwc,KAAKlf,EAAEyb,aAAe,IAAIyD,KAAKrH,EAAE4D,iBAE5BlX,KAAI,SAAAiT,GAEpB,IAAI9d,EAMA+I,EAOJ,EAWA,EAZA,OAXIyM,EACFxV,EAAO8d,EAAIwK,eACJzW,IACP7R,EAAO8d,EAAIqH,aAGT3P,EACFzM,EAAO+U,EAAI9V,oBAAsB,UAAY,SACtC6J,IACP9I,EAAO+U,EAAI7V,iBAAmB,UAAY,UAExC4J,EAGA,+BACE,6BAAKiM,EAAIwK,iBACT,6BAAKtoB,IACL,6BAAK8d,EAAIiE,cACT,uCAAKjE,EAAI9U,iBAAT,QAAsB,SACtB,6BAAKD,MALE+U,EAAIxd,IAWb,+BACE,6BAAKN,IACL,6BAAK8d,EAAIiE,cACT,uCAAKjE,EAAI9U,iBAAT,QAAsB,SACtB,6BAAKD,MAJE+U,EAAIxd,QAajBkV,EACF4S,EAAkB,aACXvW,IACPuW,EAAkB,WAIlBC,EADExW,EAEA,+BACE,4CACA,6BAAKuW,IACL,4CACA,0CACA,yCAKF,+BACE,6BAAKA,IACL,4CACA,0CACA,yCAKJ,wBAAOtoB,UAAU,WAAjB,UACE,uBAAOA,UAAU,kBAAjB,SACGuoB,IAEH,gCACGpL,QAvFE,cAAC,EAAD,KCsIIsL,GAnIE,SAAC,GACjB,IAAD,IADoBC,MAASC,OAAUnhB,EACvC,EADuCA,OAI7BiB,GAHV,EAD+CmgB,SAGvB3O,qBAAWlS,GACGU,eAHtC,EAK4B5B,mBAAS,MALrC,mBAKWc,EALX,KAKiBkhB,EALjB,KAOI,SAASC,IAELxhB,EAAaC,YAAYC,GACpBjJ,MAAK,SAAAwqB,GAAC,OAAIF,EAAQE,MAClBrqB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAQpC,SAASiJ,EAAWD,GAGhB,OADAA,EAAKnH,GAAKgH,EACH,IAAIrJ,SAAQ,SAACC,EAASC,GAEzBiJ,EAAaM,WAAWD,GACnBpJ,MAAK,WAEFuqB,IACA1qB,OAEHM,OAAM,SAAAC,GAAG,OAAIN,EAAOM,SAmBjC,GAnCAwI,qBAAU,WAEN2hB,MACD,CAACthB,IAgCS,OAATG,EAEA,OACI,qCACI,cAAC,GAAD,CACItB,MAAI,EACJH,IAAI,mBAFR,SAGI,cAAC,EAAD,CAAcT,QAAM,EAACC,UAAQ,MAEjC,qBAAK1F,UAAU,yBAAf,SACI,cAAC,EAAD,SAMhB,IAAIgpB,EAAYrhB,EAAKA,KACjBsB,EAAO,SAQX,MAPuB,eAAnB+f,EAAU/f,KACVA,EAAO,aACFtB,EAAKshB,kBAAkBxmB,MAAK,SAAAoG,GAAC,OAAIA,EAAEX,qBAAuC,OAAhBW,EAAEK,aACjED,EAAO,qBACFtB,EAAKuhB,sBAAsBzmB,MAAK,SAAAoG,GAAC,OAAIA,EAAEV,kBAAoC,OAAhBU,EAAEK,eAClED,EAAO,mBAGP,qCACI,cAAC,KAAD,CACIua,gBAAgB,WAChBC,WAAY,GACZC,YAAa,CAAEC,UAAW,mBAAoBwF,OAAQ,GAH1D,SAII,cAAC,GAAD,CACI9iB,MAAI,EACJH,IAAI,mBACJ+C,KAAMA,EACN/I,KAAI,UAAK8oB,EAAU9oB,KAAf,YAAuB8oB,EAAUzkB,UAJzC,SAKI,cAAC,EAAD,CAAckB,QAAM,EAACC,UAAQ,QAGrC,sBAAK1F,UAAU,yBAAf,UACI,cAAC,GAAD,CAAcE,KAAK,aAAnB,SACI,cAAC,GAAD,CACII,MAAO0oB,EAAU9oB,KACjBya,SAAUlS,EACVoS,UAAU,OACVD,aAAchT,MAEtB,cAAC,GAAD,CAAc1H,KAAK,YAAnB,SACI,cAAC,GAAD,CACII,MAAO0oB,EAAUzkB,SACjBoW,SAAUlS,EACVoS,UAAU,WACVD,aAAchT,MAEtB,cAAC,GAAD,CAAc1H,KAAK,QAAnB,SACI,cAAC,GAAD,CAAeI,MAAO0oB,EAAUzc,MAAOoO,UAAU,MAErD,cAAC,GAAD,CAAcza,KAAK,cAAnB,SACI,cAAC,GAAD,CAAeI,MAAO0oB,EAAU1L,SAAU3C,UAAU,MAExD,cAAC,GAAD,CAAcza,KAAK,cAAcuc,YAAY,iEAA7C,SACI,cAAC,GAAD,CAAyB/G,YAAU,EAACvT,OAAQwF,EAAKshB,sBAErD,cAAC,GAAD,CAAc/oB,KAAK,WAAWuc,YAAY,qEAA1C,SACI,cAAC,GAAD,CAAyB1K,SAAO,EAAC5P,OAAQwF,EAAKuhB,0BAEjDzgB,EACG,cAAC,GAAD,CAAc+T,QAAM,EAACtc,KAAK,oBAAoBuc,YAAY,4GAA1D,SACI,cAAC,EAAD,CAAQzc,UAAU,cAAckB,QAnFpD,WAEIkoB,MAAM,SAiFU,iCAEJ,GACH3gB,EACG,cAAC,GAAD,CAAc+T,QAAM,EAACtc,KAAK,cAAcuc,YAAY,oEAApD,SACI,cAAC,EAAD,CAAQzc,UAAU,cAAckB,QAnFpD,WAEQpC,OAAO+d,QAAQ,kFAEfvV,EAAaO,WAAWF,EAAKA,KAAKnH,IAC7BjC,MAAK,kBAAMO,OAAOC,SAASC,QAAQ,sBACnCN,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,OA6EpB,2BAEJ,UCpFL0qB,I,MAjDU,SAAC,GACzB,IAD2BjZ,EAC5B,EAD4BA,KAAMkZ,EAClC,EADkCA,uBAClC,EAE8CziB,mBAAS,GAFvD,mBAEW8b,EAFX,KAE0BM,EAF1B,KAeI,GAXA9b,qBAAU,WAEFmiB,GAGIA,EADkB,IAAlB3G,GACwB,EAEDvS,EAAKuS,EAAc,GAAGniB,MAEtD,CAACmiB,EAAe2G,EAAwBlZ,IAEvCA,EACJ,CACI,IAAImZ,EAAcnZ,EAAKrF,KAAI,SAAClC,EAAGoK,GAE3B,OACI,eAAC,WAAD,WACI,cAAC,GAAD,CACIxB,SAAUkR,EAAgB,IAAM1P,EAChCpN,MAAOgD,EAAEhD,MACT3E,QAAS,kBAAM+hB,EAAiBhQ,EAAE,IAHtC,SAIKpK,EAAEwF,QAEN4E,EAAI7C,EAAK5N,OAAS,EAAI,qBAAKxC,UAAU,iBAAoB,KAP/C6I,EAAErI,OAWzB,OACI,sBAAKR,UAAU,kBAAf,UACI,cAAC,GAAD,CACIyR,SAA4B,IAAlBkR,EACVzhB,QAAS,kBAAM+hB,EAAiB,IAFpC,uBAKA,qBAAKjjB,UAAU,iBACdupB,QCWFC,GApDU,SAAC,GACzB,IAEO1e,EAHoBsF,EAC5B,EAD4BA,KAAMqZ,EAClC,EADkCA,eAAgBC,EAClD,EADkDA,cAAelc,EACjE,EADiEA,KAIzD4C,GAAQqZ,IAER3e,EAAUsF,EAAKrF,KAAI,SAAA4e,GAEf,MAAO,CACHha,MAAOga,EAAEtb,MACT/N,MAAOqpB,EAAEnpB,GACTsR,SAAU6X,EAAE9jB,WAKxB,IAAM+jB,EAAkB9e,EAAQsU,QAAO,SAAAvW,GAAC,OAAI4gB,EAAevJ,QAAQrX,EAAEvI,QAAU,KAfnF,EAiBsDuG,mBAAS4iB,GAjB/D,mBAiBWI,EAjBX,KAiB8BC,EAjB9B,OAkB8CjjB,oBAAS,GAlBvD,mBAkBWkjB,EAlBX,KAkB0BC,EAlB1B,KAkCI,OACI,uBAAMnmB,SATV,SAAkBnD,GAEdA,EAAEkD,iBACFJ,QAAQC,IAAIomB,GACZH,EAAclc,EAAMqc,GACpBG,GAAiB,IAIjB,UACI,cAAC,GAAD,CACI9pB,KAAK,YACLK,cAlBZ,SAAkBqkB,EAAG9hB,GAEjBgnB,EAAqBhnB,GACrBknB,GAAiB,IAgBTlf,QAASA,EACTwH,eAAgBsX,IACpB,cAACpoB,EAAD,CACII,aAAW,EACXD,WAAYooB,EACZtoB,KAAK,oBCgBNwoB,GAzDQ,SAAC,GACvB,IAAD,EAgCMC,EAjCoBC,EAC1B,EAD0BA,eAAgBzJ,EAC1C,EAD0CA,WAAY3T,EACtD,EADsDA,YAAajE,EACnE,EADmEA,UAAW0E,EAC9E,EAD8EA,KAEtE+T,EAAeC,kBAAQ,GAD/B,EAE4D3a,mBAAS6U,QAAQlO,EAAKG,aAFlF,mBAESyc,EAFT,KAEgCC,EAFhC,KASE,SAAS3T,IAEP,OAAO,IAAIvY,SAAQ,SAACC,EAASC,GAE3BwO,GAAaY,WAAWV,EAAaS,EAAKhN,GAAI+gB,EAAapN,SACxD5V,MAAK,SAAA2B,GAEJ9B,IACAoF,QAAQC,IAAI8d,EAAapN,SACzBkW,GAAmD,IAA1B9I,EAAapN,SAClCgW,GACFA,EAAe,CAAC3c,OAAMhN,GAAI+gB,EAAapN,QAASjU,YAEnDxB,OAAM,SAACC,GAAD,OAASN,EAAOM,SAkB7B,OAPIyrB,IAEFF,EACE,cAAC,EAAD,CAAgBhpB,QAVpB,WACEqgB,EAAapN,SAAW,EACxBuC,KAQE,uBAKF,qCACA,eAAC,GAAD,CACE0J,iBAAiB,4DACjBnf,SAAQ,UAAEsgB,EAAapN,UAAY3G,EAAKG,kBAAhC,SAA6C,EACrD8T,iBAAe,EAACf,WAAYA,EAC5B9F,aAAclE,EACd+J,uBA3CJ,SAAwBzd,EAAOwE,GAE7B+Z,EAAapN,QAAU3M,GAoCvB,UAME,mBAAGxH,UAAU,aAAb,uBACA,cAAC,GAAD,CAA0C8I,UAAWA,EAAW5I,KAAK,OAAOE,YAAY,kBAA5DmhB,MAE7B2I,MCZUI,GA1CI,SAAC,GACnB,IACOC,EAFcC,EACtB,EADsBA,kBAAmBC,EACzC,EADyCA,oBAAqBC,EAC9D,EAD8DA,cAAeP,EAC7E,EAD6EA,eAAgBT,EAC7F,EAD6FA,cAAelc,EAC5G,EAD4GA,KAAM4C,EAClH,EADkHA,KAAMtH,EACxH,EADwHA,UAAWiE,EACnI,EADmIA,YAG/H,GAAIS,EAAKG,WACT,CACI,IACMrJ,GADekJ,EAAKmd,aAAe,IAAMnd,EAAKod,kBACtBpmB,cAAcxF,QAAQ,KAAM,IAC1DurB,EAAmB,yDAAqD/c,EAAKG,WAA1D,YAAwErJ,EAAxE,aAAqFkJ,EAAKmd,aAA1F,YAA0Gnd,EAAKod,iBAA/G,aAGnBL,EAAsB,gCAE1B,OACI,sBAAKvqB,UAAU,sBAAf,UACI,sBAAMkB,QAASspB,EAAmBxqB,UAAU,yDAA5C,sBACA,cAAC,EAAD,CACIA,UAAU,mBACVkB,QAAS,kBAAMupB,EAAoBjd,IACnC5L,aAAW,EAHf,SAIK4L,EAAKc,KAAO,iBAAmB,iBAEpC,cAAC,GAAD,CAAcpO,KAAK,QAAnB,SACI,cAAC,GAAD,CACII,MAAOkN,EAAKa,MACZuM,aAAc,SAAA0M,GAAC,OAAIoD,EAAcld,EAAM8Z,IACvCzM,UAAU,YAElB,cAAC,GAAD,CAAc3a,KAAK,WAAWuc,YAAa8N,EAA3C,SACI,cAAC,GAAD,CACIJ,eAAgBA,EAChBzJ,WAAU,iBACV5X,UAAWA,EACXiE,YAAaA,EACbS,KAAMA,MAEd,cAAC,GAAD,CAActN,KAAK,OAAOuc,YAAY,IAAtC,SACI,cAAC,GAAD,CAAkBrM,KAAMA,EAAMqZ,eAAgBjc,EAAK4C,KAAKrF,KAAI,SAAAlC,GAAC,OAAIA,EAAErI,MAAKgN,KAAMA,EAAMkc,cAAeA,UCqOpGmB,GApQG,SAAC,GAClB,IA2KO1N,EA5Ka/M,EACrB,EADqBA,KAAMtH,EAC3B,EAD2BA,UAAWiE,EACtC,EADsCA,YAAa+d,EACnD,EADmDA,cAAeviB,EAClE,EADkEA,aAGxDJ,EADc8R,qBAAWlS,GACMI,iBAAiBW,EAAWP,GAFrE,EAK8C1B,oBAAU,GALxD,mBAKW8b,EALX,KAK0BM,EAL1B,OAM8Bpc,mBAAS,IANvC,mBAMWkkB,EANX,KAMkBC,EANlB,OAOwCnkB,oBAAS,GAPjD,mBAOWokB,EAPX,KAOuBC,EAPvB,KASUC,EAAa,WAEflI,GAAkB,GAClBpW,GAAaC,SAASC,GACjBxO,MAAK,SAAAorB,GAEFqB,EAASrB,GACTuB,GAAc,MAEjBxsB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,OAG9BysB,EAAe,WAGjBJ,EAASza,KAAK8a,MAAM9a,KAAKC,UAAUua,KACnCG,GAAc,IAgClB,SAAShd,EAAWV,GAEhB0d,GAAc,GACdre,GAAaO,eAAeI,EAAKhN,GAAIgN,EAAKc,MACrC/P,MAAK,WAEFiP,EAAKc,MAAQd,EAAKc,KAClB8c,OAEH1sB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAmBpC,SAAS+rB,EAAcld,EAAM8Z,GAGzB,OADAA,EAAE9mB,GAAKgN,EAAKhN,GACL,IAAIrC,SAAQ,SAACC,EAASC,GAEzBwO,GAAae,YAAYb,EAAaua,GACjC/oB,MAAK,WAEFiP,EAAKa,MAAQiZ,EAAEjZ,MACf+c,IACAhtB,OAEHM,OAAM,SAAAC,GAAG,OAAIN,EAAOM,SAIjC,SAASwrB,EAAejrB,GAEpB,IAAIsO,EAAOtO,EAAasO,KACxBA,EAAKG,WAAazO,EAAasB,GAC/BgN,EAAKmd,aAAezrB,EAAagB,KACjCsN,EAAKod,iBAAmB,GACxBQ,IAGJ,SAAS1B,EAAclc,EAAM8d,GAEzBze,GAAagB,QAAQd,EAAaS,EAAKhN,GAAI8qB,GACtC/sB,MAAK,SAAAsK,GAEF2E,EAAK4C,KAAOvH,EAAEuH,KACdgb,OAEH1sB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAsDpC,GAhJAwI,qBAAU,WAENgkB,MACD,CAACpe,IA6IAge,EACJ,CACI,IAAIpM,EAAMoM,GACa,IAAnBD,IACAnM,EAAMoM,EAAM3L,QAAO,SAAAvW,GAAC,OAAIA,EAAEuH,KAAKrF,KAAI,SAAAlC,GAAC,OAAIA,EAAErI,MAAI0f,QAAQ4K,IAAkB,OAErD,IAAnBnI,IACAhE,EAAMA,EAAIhB,MA1DlB,SAAqBnX,EAAG6X,GA6BpB,SAASkN,EAAc1iB,EAAG+U,GAEtB,OAAO/U,EAAEgV,cAAcD,GAG3B,IAhCqB/U,EAAG+U,EAgClB4N,GAhCkB5N,EAgCQS,GAhCXxV,EAgCQrC,GA9BnB8H,OAASsP,EAAEtP,KACN,EACFzF,EAAEyF,KACA,GAEC,GA0BhB,GAAiB,IAAbkd,EACA,OAAOA,EAEX,IAAMC,EA1BN,SAAyB5iB,EAAG+U,GAExB,OAAI/U,EAAE8E,aAAeiQ,EAAEjQ,WACZ,EACe,OAAjB9E,EAAE8E,YAEC,EAEc,OAAjBiQ,EAAEjQ,WAEA,EAGA4d,EAAc1iB,EAAE8hB,aAAe9hB,EAAE+hB,iBAAkBhN,EAAE+M,aAAe/M,EAAEgN,kBAahEc,CAAgBllB,EAAG6X,GACxC,GAAqB,IAAjBoN,EACA,OAAOA,EAEX,IAAME,EAAUtN,EAAEjO,KAAK5N,OAASgE,EAAE4J,KAAK5N,OACvC,OAAgB,IAAZmpB,EACOA,EAEJJ,EAAc/kB,EAAE6H,MAAOgQ,EAAEhQ,WAgBhC8O,EAAWwB,EAAI5T,KAAI,SAAC4e,EAAG1W,GAEnB,IAKI2Y,EALArC,EAAcI,EAAEvZ,KAAKrF,KAAI,SAAAlC,GAEzB,OAAO,cAAC,EAAD,CAAsBhD,MAAOgD,EAAEhD,OAAlBgD,EAAEhD,UAItBoN,IAAM0P,IAENiJ,EACI,6BACI,oBAAIC,QAAS,EAAb,SACI,cAAC,GAAD,CACIre,KAAMmc,EACNa,kBAAmB,kBAAMvH,GAAkB,IAC3CwH,oBAAqBvc,EACrBwc,cAAeA,EACfP,eAAgBA,EAChBT,cAAeA,EACftZ,KAAMA,EACNtH,UAAWA,EACXiE,YAAaA,SAKjC,IACMzI,GADeqlB,EAAEgB,aAAe,IAAMhB,EAAEiB,kBAChBpmB,cAAcxF,QAAQ,KAAM,IAE1D,OACI,eAAC,WAAD,WACI,+BACI,qBAAIgB,UAAW2pB,EAAErb,KAAO,gBAAkB,GAA1C,UAA8C,4BAAIqb,EAAErb,KAAO,SAAW,KAAQqb,EAAEtb,SAChF,6BAAI,eAAC,IAAD,CAAMnK,GAAE,0BAAqBylB,EAAEhc,WAAvB,YAAqCrJ,GAA7C,UAA0DqlB,EAAEgB,aAA5D,IAA2EhB,EAAEiB,sBACjF,6BAAKrB,IACL,qBAAIvpB,UAAU,cAAd,UACKmI,EAAmB,sBAAMjH,QAAS,kBAAM+hB,EAAiBhQ,IAAIjT,UAAU,6CAApD,oBAAiH,GACrI,uBAAMkB,QAAS,kBAAMgN,EAAWyb,IAAI3pB,UAAU,6CAA9C,UAA4F2pB,EAAErb,KAAO,MAAQ,IAA7G,iBACCnG,EAAmB,sBAAMjH,QAAS,kBAzJvCsM,EAyJwDmc,OAvJpE7qB,OAAO+d,QAAP,uCAA+CrP,EAAKa,MAApD,SAEA6c,GAAc,GACdre,GAAakB,WAAWhB,EAAaS,EAAKhN,IACrCjC,MAAK,WAEF,IAAMutB,EAAMf,EAAM7K,QAAQ6K,EAAMniB,MAAK,SAAAC,GAAC,OAAIA,EAAErI,KAAOgN,EAAKhN,OACxDuqB,EAAMgB,OAAOD,EAAK,GAClBV,OAEH1sB,OAAM,SAAAC,GAAG,OAAI6E,QAAQC,IAAI9E,QAZtC,IAAoB6O,GAyJ4DxN,UAAU,6CAA9C,oBAA2G,SAGtI4rB,IAXUjC,EAAEnpB,OAiB7B,OACI,wBAAOR,UAAU,qBAAjB,UACI,uBAAOA,UAAU,kBAAjB,SACI,+BACI,sCACA,0CACA,sCACA,8CAGR,kCACKmI,EACG,6BACI,qBAAI0jB,QAAS,EAAG7rB,UAAU,gBAAgBkB,QAlN9D,WAEIgqB,GAAc,GACdre,GAAaU,WAAWR,EAAa,CAAEsB,MAAO,WAAYC,MAAM,IAC3D/P,MAAK,SAAAsK,IAEqB,IAAnBiiB,EAEAje,GAAagB,QAAQd,EAAalE,EAAErI,GAAI,CAACsqB,IACpCvsB,MAAK,WAEF4sB,OAEHzsB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAIhCwsB,OAGPzsB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,OA8LhB,UACI,cAAC,IAAD,CACIgH,KAAMwS,IACNnY,UAAU,YAHlB,WAKCirB,EAAa,cAAC,EAAD,CAAS1pB,OAAK,EAACvB,UAAU,uBAA0B,aAGrEgW,EACHmH,SC5OF6O,GAtBY,SAAC,GAC3B,IAD4BzjB,EAC7B,EAD6BA,aAAcwE,EAC3C,EAD2CA,YAAajE,EACxD,EADwDA,UAGpD3B,qBAAU,WAENgK,GAAYC,QAAQtI,GACnBvK,MAAK,SAAAorB,GAAC,OAAIsC,EAAWtC,MACrBjrB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,QAC7B,CAACmK,IAPR,MAUkCjC,mBAAS,IAV3C,mBAUW8F,EAVX,KAUoBsf,EAVpB,OAW8CplB,oBAAU,GAXxD,mBAWWikB,EAXX,KAW0BoB,EAX1B,KAaI,OACI,sBAAKlsB,UAAU,qBAAf,UACI,cAAC,GAAD,CAAkBoQ,KAAMzD,EAAS2c,uBAAwB,SAAAxmB,GAAC,OAAIopB,EAAiBppB,MAC/E,cAAC,GAAD,CAAWsN,KAAMzD,EAAS7D,UAAWA,EAAWP,aAAcA,EAAcwE,YAAaA,EAAa+d,cAAeA,QCqElHqB,GAlFO,SAAC,GACtB,IAAD,QADyBzD,MAASC,OAAUtD,EAC5C,EAD4CA,YAAa9c,EACzD,EADyDA,aAAcO,EACvE,EADuEA,UAAWsjB,EAClF,EADkFA,cAAerf,EACjG,EADiGA,YAIvF5E,EADc8R,qBAAWlS,GACMI,iBAAiBW,EAAWP,GAHrE,EAIsC1B,mBAAS,MAJ/C,mBAIW6R,EAJX,KAIsBG,EAJtB,KAMU+M,EAAWP,EAAYrmB,QAAQ,KAAK,KACpC2mB,EAAWyG,EAAcptB,QAAQ,KAAK,KAE5C,SAASqtB,IAELhU,GAAkBE,iBAAiBzP,EAAWiE,GAC7CxO,MAAK,SAAA+tB,GAAC,OAAIzT,EAAayT,MACvB5tB,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,MAOhC,SAAS4tB,EAAmBD,GAC3B,IAAD,IAII,OAHAA,EAAE9rB,GAAKuM,EACPuf,EAAEpsB,KAAF,UAASosB,EAAEpsB,YAAX,QAAmBwY,EAAUxY,KAC7BosB,EAAEtT,OAAF,UAAWsT,EAAEtT,cAAb,QAAuBN,EAAUM,OAC1B,IAAI7a,SAAQ,SAACC,EAASC,GAEzBga,GAAkBI,gBAAgB3P,EAAWwjB,GAC5C/tB,MAAK,WAEF8tB,IACAjuB,OAEHM,OAAM,SAAAC,GAAG,OAAIN,UActB,OAhCA8I,qBAAU,WAENklB,MACD,CAACvjB,EAAWiE,IA8BX,qCACI,cAAC,KAAD,CACAyW,gBAAgB,WAChBC,WAAY,GACZC,YAAa,CAAEC,UAAW,mBAAoBwF,OAAQ,GAHtD,SAII,sBAAKnpB,UAAU,oCAAf,UACI,cAAC,EAAD,CAAcyF,QAAM,EAACC,UAAQ,IAC7B,sBAAK1F,UAAU,wBAAf,UACI,oBAAIA,UAAU,YAAd,SAA2B4lB,IAC3B,oBAAI5lB,UAAU,0BAAd,0BAAyC0Y,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAWxY,YAApD,QAA0DylB,YAItE,sBAAK3lB,UAAU,yBAAf,UACI,cAAC,GAAD,CAAcE,KAAK,OAAnB,SACI,cAAC,GAAD,CAAeya,SAAUxS,EAAkB7H,MAAK,iBAAEoY,QAAF,IAAEA,OAAF,EAAEA,EAAWxY,YAAb,QAAmBylB,EAAU/K,aAAc2R,EAAoB1R,UAAU,WAE7H,cAAC,GAAD,CAAc3a,KAAK,SAAnB,SACI,cAAC,GAAD,CAAeya,SAAUxS,EAAkBsS,UAAU,OAAOna,MAAK,OAAEoY,QAAF,IAAEA,OAAF,EAAEA,EAAWM,OAAQ4B,aAAc2R,EAAoB1R,UAAU,aAEtI,cAAC,GAAD,CAAc3a,KAAK,QAAQuc,YAAY,IAAvC,SACI,cAAC,GAAD,CAAoBlU,aAAcA,EAAcO,UAAWA,EAAWiE,YAAaA,MAEtF5E,EACG,cAAC,GAAD,CAAcjI,KAAK,mBAAmBuc,YAAY,4DAAlD,SACI,cAAC,EAAD,CAAQzc,UAAU,cAAckB,QApCpD,WAEQpC,OAAO+d,QAAQ,gEAEfxE,GAAkBM,gBAAgB5L,GACjCxO,MAAK,kBAAMO,OAAOC,SAASC,QAAQ,yBACnCN,OAAM,SAAAC,GAAG,OAAI6E,QAAQzD,MAAMpB,OA8BhB,gCAEJ,UCvEd6tB,GAAQ,CAAC,iBAAkB,wBAAyB,qBAAsB,mBA4DjEC,GA1DE,WAEb,IAAMjtB,EAAcya,qBAAWlS,GACzBhJ,EAAWmI,cAEjB,YAAkC8O,IAA9BxW,EAAYiJ,cAER,sBAAKzI,UAAU,UAAf,UACI,cAAC,GAAD,IACA,cAAC,GAAD,CAASA,UAAU,mBAAnB,SACI,qBAAKA,UAAU,yBAAf,SACI,cAAC,EAAD,gBAMcgW,IAA9BxW,EAAYiJ,eAA+B1J,EAASkI,SAASiZ,QAAQ,cAAgB,IAA2C,IAAtCsM,GAAMtM,QAAQnhB,EAASkI,aAC5GlI,EAASkI,SAASiZ,QAAQ,uBAAyB,GAAKnhB,EAASkI,SAASiZ,QAAQ,oBAAsB,GAErG1gB,EAAYiJ,cAEL,cAAC,IAAD,CAAUvE,GAAG,mBAGb,cAAC,IAAD,CAAUA,GAAG,uBAK5B,sBAAKlE,UAAU,UAAf,UACI,cAAC,GAAD,IACA,eAAC,GAAD,CAASA,UAAU,mBAAnB,UACI,cAAC,GAAD,CACIkG,IAAI,mBACJ+C,KAAMzJ,EAAY4I,cAClBlI,KAAMV,EAAYmI,KAAKzH,KAAO,IAAMV,EAAYmI,KAAKpD,WACzD,eAAC,IAAD,WACI,cAAC,IAAD,CAAOU,KAAK,iBAAZ,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOA,KAAK,wBAAZ,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOA,KAAK,oCAAoCynB,UAAWjE,KAC3D,cAAC,IAAD,CAAOxjB,KAAK,uFAAuFynB,UAAWP,KAC9G,cAAC,IAAD,CAAOlnB,KAAK,qBAAZ,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOA,KAAK,kBAAZ,SACI,cAAC,GAAD,gBCpCT0nB,GAtBE,WAChB,IAAD,EAC8B9lB,mBAAS,IADvC,mBACS8C,EADT,KACiBgQ,EADjB,KAEE,OACE,eAAC,IAAD,WACE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,eAAC,IAAD,CAAO3T,OAAK,EAACf,KAAK,IAAlB,UACE,cAAC,EAAD,CAAQ2B,aAAc+S,IACtB,cAAC,GAAD,CAAOhQ,OAAQA,EAAQgQ,UAAWA,OAEpC,eAAC,IAAD,CAAO1U,KAAK,YAAZ,UACE,cAAC,EAAD,CAAQ0B,aAAW,IACnB,cAAC,EAAD,UACE,cAAC,GAAD,gBC2BGimB,OA5Cf,WACC,IAsBKC,EAtBN,EACsChmB,oBAAS,GAD/C,mBACSimB,EADT,KACqBC,EADrB,OAEoClmB,oBAAS,GAF7C,mBAESmmB,EAFT,KAEoBC,EAFpB,KAoCE,OAhCA9lB,qBAAU,WAEH2lB,GAAeE,GAElB1tB,EAAaG,WACVlB,MAAK,WAEJwuB,GAAc,GACdE,GAAa,MAEdvuB,OAAM,WAELquB,GAAc,GACdE,GAAa,SAMjBD,IAIAH,EAFEC,EAEK,cAAC,GAAD,CAAUvpB,eAAgBwpB,IAI1B,cAAC,EAAD,CAAWxpB,eAAgBwpB,KAMpC,qBAAK/sB,UAAU,MAAf,SACG6sB,KClCQK,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB7uB,MAAK,YAAkD,IAA/C8uB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.2991b262.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst API_URL = \"/api\";\r\n\r\nconst ApiUtils = {\r\n  get: (url, reloadOnUnauthorized = true) =>\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      axios.get(API_URL + url)\r\n      .then((res) => resolve(res.data))\r\n      .catch((err) =>\r\n      {\r\n        if (err.response?.status === 403 && reloadOnUnauthorized)\r\n        {\r\n          window.location.replace('/'); // unauthorized. refresh? \r\n        }\r\n        reject(err);\r\n      })\r\n    })\r\n  },\r\n  post: (url, updateObject, reloadOnUnauthorized = true) =>\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      axios.post(API_URL + url, updateObject)\r\n      .then((res) => resolve(res.data))\r\n      .catch((err) =>\r\n      {\r\n        if (err.response?.status === 403 && reloadOnUnauthorized)\r\n        {\r\n          window.location.replace('/'); // unauthorized. redirect to login \r\n        }\r\n        reject(err);\r\n      })\r\n    });\r\n  },\r\n  patch: (url, updateObject, reloadOnUnauthorized = true) =>\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      axios.patch(API_URL + url, updateObject)\r\n      .then((res) => resolve(res.data))\r\n      .catch((err) =>\r\n      {\r\n        if (err.response?.status === 403 && reloadOnUnauthorized)\r\n        {\r\n          window.location.replace('/'); // unauthorized. redirect to login \r\n        }\r\n        reject(err);\r\n      })\r\n    });\r\n  },\r\n  delete: (url, reloadOnUnauthorized = true) =>\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      axios.delete(API_URL + url)\r\n      .then((res) => resolve(res.data))\r\n      .catch((err) =>\r\n      {\r\n        if (err.response?.status === 403 && reloadOnUnauthorized)\r\n        {\r\n          window.location.replace('/'); // unauthorized. redirect to login \r\n        }\r\n        reject(err);\r\n      })\r\n    });\r\n  }\r\n};\r\n\r\nexport default ApiUtils;\r\n","import ApiUtils from \"./ApiUtils\";\r\nconst AUTH_URL = \"/auth\";\r\n\r\nconst AuthApiUtils = {\r\n  login: (credentials) =>\r\n    ApiUtils.post(AUTH_URL + \"/login\", credentials, false),\r\n  islogged: () => ApiUtils.get(AUTH_URL + \"/islogged\", false),\r\n  signup: (signUpProps) =>\r\n    ApiUtils.post(AUTH_URL + \"/signup\", signUpProps, false),\r\n  check: () => ApiUtils.get(AUTH_URL, false),\r\n  logout: () => ApiUtils.delete(AUTH_URL + \"/logout\", false),\r\n};\r\n\r\nexport default AuthApiUtils;\r\n","import React from \"react\";\r\nimport \"./Forms.css\";\r\nexport default function InputError({ error }) {\r\n  return <p className=\"Error\"> {error}</p>;\r\n}\r\n","import React from \"react\";\r\nimport \"./Forms.css\";\r\nimport InputError from \"./InputError\";\r\nexport default function Input({\r\n  name,\r\n  type,\r\n  placeholder,\r\n  styleClass,\r\n  value,\r\n  error,\r\n  changeHandler,\r\n}) {\r\n  return (\r\n    <>\r\n      <input\r\n        placeholder={placeholder}\r\n        className={styleClass}\r\n        id={name}\r\n        type={type}\r\n        name={name}\r\n        value={value}\r\n        onChange={(e) => changeHandler(name, e.target.value, type)}\r\n        style={{\r\n          border: error && error !== \"\" ? \"1px solid #e32d2d\" : \"\",\r\n        }}\r\n      />\r\n      <InputError error={error} />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Forms.css\";\r\nexport default function SubmitError({ error }) {\r\n  return <p className=\"SubmitError\"> {error}</p>;\r\n}\r\n","import React from 'react';\r\nimport \"./GradientButton.css\";\r\n\r\nconst GradientButton = ({children, disabled, onClick, className, type}) =>\r\n{\r\n    return <button className={`GradientButton ${className}`} onClick={onClick} action=\"none\" disabled={disabled}>{children} </button>\r\n}\r\n\r\nexport default GradientButton;","import \"./Spinner.css\";\r\n\r\nconst Spinner = ({dark, red, green, className}) =>\r\n{\r\n    return <div className={`Spinner ${dark ? 'Spinner--Dark' : ''} ${red ? 'Spinner--Red' : ''} ${green ? 'Spinner--Green' : ''} ${className}`}></div>;\r\n}\r\n\r\nexport default Spinner;","import React from \"react\";\r\nimport \"./Forms.css\";\r\nimport SubmitError from \"./SubmitError\";\r\nimport GradientButton from \"../buttons/GradientButton\";\r\nimport Spinner from \"../spinner/Spinner\";\r\n\r\nexport default function SubmitButton({ text, requestError, hasErrors, reducedsize, loading }) {\r\n  let content = loading ? <Spinner dark /> : text;\r\n  return (\r\n    <>\r\n      <br />\r\n      <GradientButton\r\n        className={ reducedsize ? \"\" : \"SubmitButton\"}\r\n        type=\"submit\"\r\n        disabled={hasErrors}\r\n      >{content}</GradientButton>\r\n      <SubmitError error={requestError !== \"\" && requestError} />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport AuthApiUtils from \"../../../utils/api/AuthApiUtils\";\r\nimport Input from \"../../forms/Input\";\r\nimport SubmitButton from \"../../forms/SubmitButton\";\r\n\r\nclass LoginForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputs: {\r\n        mail: \"\",\r\n        password: \"\",\r\n      },\r\n      errors: {},\r\n      requestError: \"\",\r\n    };\r\n  }\r\n\r\n  hasErrors = () => {\r\n    const errors = Object.values(this.state.errors);\r\n    const nInputs = Object.keys(this.state.inputs).length;\r\n    let b =\r\n      errors.length < nInputs\r\n        ? true\r\n        : errors.some((e) => {\r\n            return e !== \"\";\r\n          });\r\n    return b;\r\n  };\r\n\r\n  validateAll = () => {\r\n    Object.entries(this.state.inputs).forEach((e) => {\r\n      const [k, v] = e;\r\n      this.validate(k, v);\r\n    });\r\n  };\r\n\r\n  validate = (field, value) => {\r\n    this.setState({\r\n      requestError: \"\",\r\n    });\r\n    this.setState();\r\n    let errorMsg = \"\";\r\n    switch (field) {\r\n      case \"mail\":\r\n        if (value === \"\") {\r\n          errorMsg = \"Mail required\";\r\n        } else if (\r\n          !/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@+[a-zA-Z0-9-]/.test(value)\r\n        ) {\r\n          errorMsg = \"Invalid Mail\";\r\n        }\r\n        break;\r\n\r\n      case \"password\":\r\n        if (value === \"\") {\r\n          errorMsg = \"Password required\";\r\n        } else if (value.length < 8) {\r\n          errorMsg = \"Passwords are larger\";\r\n        }\r\n        break;\r\n      default:\r\n    }\r\n    this.setState({\r\n      errors: { ...this.state.errors, [field]: errorMsg },\r\n    });\r\n  };\r\n\r\n  changeHandler = (field, value) => {\r\n    this.validate(field, value);\r\n    this.setState({ inputs: { ...this.state.inputs, [field]: value } });\r\n  };\r\n\r\n  apiRequestHandler = (mail, password) => {\r\n    AuthApiUtils.login({ mail, password })\r\n      .then((res) => {\r\n        this.props.onLoginChanged(true);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"API ERROR!\");\r\n        console.log(error);\r\n        this.setState({\r\n          requestError: \"User not Found\",\r\n        });\r\n      });\r\n  };\r\n\r\n  submitHandler = (event) => {\r\n    event.preventDefault();\r\n    this.validateAll();\r\n    if (!this.hasErrors()) {\r\n      let mail = this.state.inputs.mail;\r\n      let password = this.state.inputs.password;\r\n      //Call API request in order to receive the user for the session\r\n      this.apiRequestHandler(mail, password);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.submitHandler}>\r\n        <br />\r\n        <Input\r\n          name=\"mail\"\r\n          type=\"text\"\r\n          placeholder=\"name@team\"\r\n          styleClass=\"Input InputLogin\"\r\n          error={this.state.errors.mail}\r\n          changeHandler={this.changeHandler}\r\n        />\r\n        <br />\r\n        <Input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          styleClass=\"Input InputLogin\"\r\n          error={this.state.errors.password}\r\n          changeHandler={this.changeHandler}\r\n        />\r\n        <br />\r\n        <SubmitButton\r\n          text=\"Log in\"\r\n          requestError={this.state.requestError}\r\n          hasErrors={this.hasErrors()}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Login.css\";\r\nimport LoginForm from \"./LoginForm\";\r\n\r\nconst Login = ({ onLoginChanged }) => {\r\n  return (\r\n    <div className=\"Container\">\r\n      <div className=\"LoginBox\">\r\n        <div className=\"Title\">\r\n          <span className=\"TeamWord\">TEAM</span>\r\n          <span className=\"WorksWord\">WORKS</span>\r\n        </div>\r\n        <LoginForm onLoginChanged={onLoginChanged} />\r\n        <Link to=\"/signup\" className=\"NewTeam\">\r\n          Create your own team\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport AuthApiUtils from \"../../../utils/api/AuthApiUtils\";\r\nimport Input from \"../../forms/Input\";\r\nimport SubmitButton from \"../../forms/SubmitButton\";\r\n\r\nclass SignUpForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputs: {\r\n        teamname: \"\",\r\n        identifier: \"\",\r\n        username: \"\",\r\n        lastname: \"\",\r\n        password: \"\",\r\n      },\r\n      errors: {},\r\n      requestError: \"\",\r\n    };\r\n  }\r\n\r\n  hasErrors = () => {\r\n    const errors = Object.values(this.state.errors);\r\n    const nInputs = Object.keys(this.state.inputs).length;\r\n    let b =\r\n      errors.length < nInputs\r\n        ? true\r\n        : errors.some((e) => {\r\n            return e !== \"\";\r\n          });\r\n    return b;\r\n  };\r\n\r\n  validateAll = () => {\r\n    Object.entries(this.state.inputs).forEach((e) => {\r\n      const [k, v] = e;\r\n      this.validate(k, v);\r\n    });\r\n  };\r\n\r\n  validate = (field, value) => {\r\n    this.setState({\r\n      requestError: \"\",\r\n    });\r\n    let errorMsg = \"\";\r\n    switch (field) {\r\n      case \"teamname\":\r\n        if (value === \"\") {\r\n          errorMsg = \"TeamName required\";\r\n        } else if (!/^[A-Za-z-0-9\\u00f1\\u00d1_-]*$/.test(value)) {\r\n          errorMsg = \"Invalid, use letters and numbers\";\r\n        } else if (value.length > 25) {\r\n          errorMsg = \"The name is too long\";\r\n        }\r\n        break;\r\n      case \"identifier\":\r\n        if (value === \"\") {\r\n          errorMsg = \"Identifier required\";\r\n        } else if (!/^[A-Za-z-\\u00f1\\u00d1_-]*$/.test(value)) {\r\n          errorMsg = \"Invalid, use letters and numbers\";\r\n        } else if (value.length > 25) {\r\n          errorMsg = \"The identifier is too long\";\r\n        }\r\n        break;\r\n      case \"username\":\r\n        if (value === \"\") {\r\n          errorMsg = \"Username required\";\r\n        } else if (!/^[A-Za-z-\\u00f1\\u00d1]*$/.test(value)) {\r\n          errorMsg = \"Invalid, use letters and numbers\";\r\n        } else if (value.length > 25) {\r\n          errorMsg = \"The name is too long\";\r\n        }\r\n        break;\r\n      case \"lastname\":\r\n        if (value === \"\") {\r\n          errorMsg = \"Lastname required\";\r\n        } else if (!/^[A-Za-z-\\u00f1\\u00d1]*$/.test(value)) {\r\n          errorMsg = \"Invalid, use letters and numbers\";\r\n        } else if (value.length > 120) {\r\n          errorMsg = \"The name is too long\";\r\n        }\r\n        break;\r\n      case \"password\":\r\n        if (value === \"\") {\r\n          errorMsg = \"Password required\";\r\n        } else if (value.length < 8) {\r\n          errorMsg = \"Passwords must be larger\";\r\n        } else if (value.length > 25) {\r\n          errorMsg = \"The password is too long\";\r\n        }\r\n        break;\r\n      default:\r\n    }\r\n    this.setState({\r\n      errors: { ...this.state.errors, [field]: errorMsg },\r\n    });\r\n  };\r\n\r\n  changeHandler = (field, value) => {\r\n    this.validate(field, value);\r\n    this.setState({ inputs: { ...this.state.inputs, [field]: value } });\r\n  };\r\n\r\n  apiRequestHandler = (teamname, identifier, username, lastname, password) => {\r\n    AuthApiUtils.signup({\r\n      teamname,\r\n      identifier,\r\n      username,\r\n      lastname,\r\n      password,\r\n    })\r\n      .then((res) => {\r\n        console.log(\"Signed Up, redirecting to login\");\r\n        const mail = `${username.toLowerCase()}${lastname.toLowerCase()}@${identifier}`;\r\n        AuthApiUtils.login({ mail, password }).then(() => {\r\n          window.location.replace(\"/\");\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        if (error.response.data.includes(\"constraint\")) {\r\n          this.setState({\r\n            requestError: \"There's already a team or identifier with that name.\",\r\n          });\r\n        } else {\r\n          console.log(\"API ERROR!\");\r\n          console.log(error);\r\n          this.setState({\r\n            requestError: \"We had a server problem\",\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  submitHandler = (event) => {\r\n    event.preventDefault();\r\n    this.validateAll();\r\n    if (!this.hasErrors()) {\r\n      let teamname = this.state.inputs.teamname;\r\n      let identifier = this.state.inputs.identifier;\r\n      let username = this.state.inputs.username;\r\n      let lastname = this.state.inputs.lastname;\r\n      let password = this.state.inputs.password;\r\n      //Call API request in order to receive the user for the session\r\n      this.apiRequestHandler(\r\n        teamname,\r\n        identifier,\r\n        username,\r\n        lastname,\r\n        password\r\n      );\r\n    } else {\r\n      console.log(\"There are errors in this form\");\r\n      console.log(this.state.errors);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.submitHandler}>\r\n        <p className=\"InputTitle\">Team name</p>\r\n        <Input\r\n          name=\"teamname\"\r\n          type=\"text\"\r\n          placeholder=\"Stark Industries\"\r\n          styleClass=\"Input InputLogin\"\r\n          error={this.state.errors.teamname}\r\n          changeHandler={this.changeHandler}\r\n        />\r\n        <p className=\"InputTitle\">Shorthand Identifier</p>\r\n        <Input\r\n          name=\"identifier\"\r\n          type=\"text\"\r\n          placeholder=\"stark\"\r\n          styleClass=\"Input InputLogin\"\r\n          error={this.state.errors.identifier}\r\n          changeHandler={this.changeHandler}\r\n        />\r\n        <br />\r\n        <span className={\"PreviewWord\"}>PREVIEW</span>{\" \"}\r\n        <span className={\"Preview\"}>\r\n          {this.state.inputs.username.toLowerCase()}\r\n          {this.state.inputs.lastname}@{this.state.inputs.identifier}\r\n        </span>\r\n        <svg className=\"Line\">\r\n          <line x1=\"0\" y1=\"0\" x2=\"1000\" y2=\"0\" className=\"ColorLine\" />\r\n        </svg>\r\n        <p className=\"InputTitle\">Name</p>\r\n        <Input\r\n          name=\"username\"\r\n          type=\"text\"\r\n          placeholder=\"Johnny\"\r\n          styleClass=\"Input InputLogin\"\r\n          error={this.state.errors.username}\r\n          changeHandler={this.changeHandler}\r\n        />\r\n        <p className=\"InputTitle\">LastName</p>\r\n        <Input\r\n          name=\"lastname\"\r\n          type=\"text\"\r\n          placeholder=\"Deep\"\r\n          styleClass=\"Input InputLogin\"\r\n          error={this.state.errors.lastname}\r\n          changeHandler={this.changeHandler}\r\n        />\r\n        <p className=\"InputTitle\">Password</p>\r\n        <Input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          styleClass=\"Input InputLogin\"\r\n          error={this.state.errors.password}\r\n          changeHandler={this.changeHandler}\r\n        />\r\n        <SubmitButton\r\n          text=\"Sign up\"\r\n          requestError={this.state.requestError}\r\n          hasErrors={this.hasErrors()}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignUpForm;\r\n","import React from 'react';\r\nimport \"./Button.css\";\r\n\r\nconst Button = ({children, className, onClick}) =>\r\n{\r\n    return (\r\n        <button className={`Button ${className}`} onClick={onClick} action=\"none\">\r\n            {children}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default Button","import { withRouter } from \"react-router-dom\";\r\nimport Button from \"./Button\";\r\nimport GradientButton from \"./GradientButton\";\r\n\r\nconst LinkButton = ({history, path, children, className, gradient, back, reset}) =>\r\n{\r\n    function onButtonClicked()\r\n    {\r\n        if (back)\r\n        {\r\n            history.goBack()\r\n        } else\r\n        {\r\n            history.push(path)\r\n        }\r\n    }\r\n\r\n    if (gradient)\r\n    {\r\n        return <GradientButton className={className} onClick={onButtonClicked}>{children}</GradientButton>\r\n    }\r\n    else\r\n    {\r\n        return <Button className={className} onClick={onButtonClicked}>{children}</Button>\r\n    }\r\n}\r\n\r\nexport default withRouter(LinkButton);","import { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport \"./GoBackButton.css\";\r\nimport LinkButton from \"./LinkButton\";\r\n\r\nconst GoBackButton = ({ path, darker, anchored, history }) =>\r\n{\r\n    return (\r\n        <LinkButton className={`GoBack ${darker ? \"Button--Darker\" : \"\"} ${anchored ? \"GoBack--Anchored\" : \"\"}`} back>\r\n            <span className=\"GoBackText\">\r\n                <FontAwesomeIcon icon={faArrowLeft} style={{ color: \"#A6CE56\" }} className=\"BackArrow\" />\r\n                GO BACK\r\n            </span>\r\n        </LinkButton>\r\n    );\r\n};\r\n\r\nexport default GoBackButton;","import React from \"react\";\r\nimport \"./SignUp.css\";\r\nimport SignUpForm from \"./SignUpForm\";\r\nimport GoBackButton from \"../../buttons/GoBackButton\";\r\n\r\n\r\nexport default function SignUp() {\r\n  return (\r\n    <div className=\"Container\">\r\n      <div className=\"SignUpBox\">\r\n        <GoBackButton path=\"/login\" />\r\n        <SignUpForm />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport Login from \"./Login/Login\";\r\nimport SignUp from \"./SignUp/SignUp\";\r\n\r\nconst LoginPage = ({ onLoginChanged }) =>\r\n{\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <Login onLoginChanged={onLoginChanged} />\r\n        </Route>\r\n        <Route path=\"/signup\">\r\n          <SignUp />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <Redirect to=\"/\" />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n","import \"./Profile.css\";\r\n\r\nconst ProfilePic = ({src, className, small, slim}) =>\r\n{\r\n    let picClass = small ? \"ProfilePicHeader\" : \"ProfilePic\";\r\n    return (\r\n        <img className={`${picClass} ${className??\"\"}`} src={src} alt=\"Profile\" ></img>\r\n    )\r\n}\r\n\r\nexport default ProfilePic;","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport \"../Auth/Login/Login\";\r\nimport \"./Header.css\";\r\n\r\nconst MainTitle = ({history}) => {\r\n  return (\r\n    <div className=\"HeaderTitle\" onClick={ () => history.push(\"/\") }>\r\n        <span className=\"TeamWord\">TEAM</span>\r\n        <span className=\"WorksWord\">WORKS</span>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(MainTitle);\r\n","import React, { useState } from \"react\";\r\nimport AuthApiUtils from \"../../utils/api/AuthApiUtils\";\r\nimport \"../Auth/Login/Login\";\r\nimport Button from \"../buttons/Button\";\r\nimport LinkButton from \"../buttons/LinkButton\";\r\nimport ProfilePic from \"../profile/ProfilePic\";\r\nimport \"./Header.css\";\r\nimport MainTitle from \"./MainTitle\";\r\n\r\nconst handleLogout = async event => {\r\n  AuthApiUtils.logout();\r\n  window.location.reload(false)\r\n}\r\n\r\nconst Header = ({ nosearchbar, handleSearch}) => {\r\n  let content;\r\n  const [searchWords, setSearchWords] = useState(\"\");\r\n\r\n\r\n  const changeHandler = (e) => {\r\n    setSearchWords(e.target.value);\r\n  };\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    handleSearch(searchWords);\r\n  };\r\n\r\n\r\n  if (nosearchbar) {\r\n    content = (\r\n      <LinkButton className=\"Button--green HeaderButton\" path=\"/\">\r\n        Go to Inbox\r\n      </LinkButton>\r\n    );\r\n  } else {\r\n    content = (\r\n      <>\r\n        <label className=\"HeaderSearchbar\">\r\n          <form onSubmit={submitHandler}>\r\n            <input\r\n              className=\"SearchInput\"\r\n              onChange={changeHandler}\r\n              placeholder=\"Search for messages\"\r\n            ></input>\r\n          </form>\r\n        </label>\r\n        <LinkButton\r\n          className=\"Button--green HeaderButton\"\r\n          path=\"/settings\"\r\n        >\r\n          Manage team\r\n        </LinkButton>\r\n      </>\r\n    );\r\n  }\r\n\r\n  \r\n\r\n  return (\r\n    <div className=\"Header\">\r\n      <MainTitle />\r\n      {content}\r\n      <Button className=\"Button--red HeaderButtonLogout\" onClick={handleLogout}>\r\n        <img className=\"LogoutIcon\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ4OS44ODggNDg5Ljg4OCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgY2xhc3M9IiI+PGc+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Cgk8Zz4KCQk8cGF0aCBkPSJNMjUuMzgzLDI5MC41Yy03LjItNzcuNSwyNS45LTE0Ny43LDgwLjgtMTkyLjNjMjEuNC0xNy40LDUzLjQtMi41LDUzLjQsMjVsMCwwYzAsMTAuMS00LjgsMTkuNC0xMi42LDI1LjcgICAgYy0zOC45LDMxLjctNjIuMyw4MS43LTU2LjYsMTM2LjljNy40LDcxLjksNjUsMTMwLjEsMTM2LjgsMTM4LjFjOTMuNywxMC41LDE3My4zLTYyLjksMTczLjMtMTU0LjVjMC00OC42LTIyLjUtOTIuMS01Ny42LTEyMC42ICAgIGMtNy44LTYuMy0xMi41LTE1LjYtMTIuNS0yNS42bDAsMGMwLTI3LjIsMzEuNS00Mi42LDUyLjctMjUuNmM1MC4yLDQwLjUsODIuNCwxMDIuNCw4Mi40LDE3MS44YzAsMTI2LjktMTA3LjgsMjI5LjItMjM2LjcsMjE5LjkgICAgQzEyMi4xODMsNDgxLjgsMzUuMjgzLDM5Ni45LDI1LjM4MywyOTAuNXogTTI0NC44ODMsMGMtMTgsMC0zMi41LDE0LjYtMzIuNSwzMi41djE0OS43YzAsMTgsMTQuNiwzMi41LDMyLjUsMzIuNSAgICBzMzIuNS0xNC42LDMyLjUtMzIuNVYzMi41QzI3Ny4zODMsMTQuNiwyNjIuODgzLDAsMjQ0Ljg4MywweiIgZmlsbD0iI2ZmM2MzYyIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgc3R5bGU9IiIgY2xhc3M9IiI+PC9wYXRoPgoJPC9nPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjwvZz48L3N2Zz4=\" />\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst ScrollToTop = () => {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default ScrollToTop;","import ApiUtils from \"./ApiUtils\";\r\nconst USER_URL = \"/user\";\r\nconst USERS_URL = \"/users\";\r\n\r\nconst UserApiUtils = {\r\n  getUserById: (userId) => ApiUtils.get(USER_URL + \"?userId=\" + userId),\r\n  getUsers: () => ApiUtils.get(USERS_URL),\r\n  registerUser: (user) => ApiUtils.post(USER_URL + \"/create\", user),\r\n  updateUser: (user) => ApiUtils.post(USER_URL + \"/update\", user),\r\n  deleteUser: (userId) => ApiUtils.delete(USER_URL + `/delete?userId=${userId}`),\r\n  getCredentials: () => ApiUtils.get(USER_URL + \"/credentials\")\r\n};\r\n\r\nexport default UserApiUtils;\r\n","import React from \"react\";\r\n\r\nconst UserCredentials = React.createContext({});\r\n\r\nexport default UserCredentials;","import { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport UserApiUtils from \"../utils/api/UserApiUtils\"\r\nimport UserCredentials from \"./UserCredentials\";\r\n\r\nconst UserCredentialsProvider = ({ children }) =>\r\n{\r\n    const [credentials, setCredentials] = useState({\r\n        isDepartmentManager: () => false,\r\n        isProjectManager: () => false,\r\n        getRoleName: () => \"Member\",\r\n\r\n    });\r\n\r\n    // right now if there's a breaking change we'll just reload the page. \r\n    // but there should be a way to request context provider refresh from children\r\n\r\n    useEffect(() =>\r\n    {\r\n        UserApiUtils.getCredentials()\r\n            .then(c =>\r\n            {\r\n                c.isDepartmentManager = (departmentId) =>\r\n                {\r\n                    departmentId = Number(departmentId);\r\n                    if (c.isTeamManager)\r\n                        return true;\r\n                    const dpt = c.currentDepartments?.find(x => x.id === departmentId);\r\n                    if (!dpt)\r\n                        return false;\r\n                    return dpt.isDepartmentManager;\r\n                };\r\n                c.isProjectManager = (projectId, departmentId) =>\r\n                {\r\n                    projectId = Number(projectId);\r\n                    departmentId = Number(departmentId);\r\n                    if (c.isTeamManager)\r\n                        return true;\r\n                    if (departmentId && c.isDepartmentManager(departmentId))\r\n                        return true; \r\n                    const proj = c.currentProjects?.find(x => x.id === projectId);\r\n                    if (!proj)\r\n                        return false;\r\n                    return proj.isProjectManager;\r\n                };\r\n                c.getRoleName = () =>\r\n                {\r\n                    let role = \"Member\";\r\n                    if (c.isTeamManager)\r\n                        role = \"Team manager\";\r\n                    else if (c.currentDepartments?.some(x => x.isDepartmentManager && x.finalDate === null))\r\n                        role = \"Department manager\";\r\n                    else if (c.currentProjects?.some(x => x.isProjectManager && x.finalDate === null))\r\n                        role = \"Project manager\";\r\n                    return role;\r\n                }\r\n                console.log(c);\r\n                setCredentials(c);\r\n            })\r\n            .catch(err => console.error(err))\r\n    }, []);\r\n\r\n    return (\r\n        <UserCredentials.Provider value={credentials}>\r\n            {children}\r\n        </UserCredentials.Provider>\r\n    );\r\n}\r\n\r\nexport default UserCredentialsProvider;","import ApiUtils from \"./ApiUtils\";\r\nconst MESSAGE_URL = \"/message\";\r\n\r\nconst MessageApiUtils = {\r\n  /*Inboxes*/\r\n  getMyInboxMessages: () => ApiUtils.get(MESSAGE_URL + \"/inbox\"),\r\n  getMySentMessages: () => ApiUtils.get(MESSAGE_URL + \"/sent\"),\r\n  getMyMessagesByTag: (tagId) =>\r\n    ApiUtils.get(MESSAGE_URL + \"/byTag?tagId=\" + tagId),\r\n  getMyMessagesBySearch: (search) =>\r\n    ApiUtils.get(MESSAGE_URL + \"/bySearch?search=\" + search),\r\n  getNumberOfNotReadMessages: () => ApiUtils.get(MESSAGE_URL + \"/noRead\"),\r\n  getNumberOfNoReadMessagesByTag: (tagId) =>\r\n    ApiUtils.get(MESSAGE_URL + \"/noReadByTag?tagId=\" + tagId),\r\n\r\n  /*Messages*/\r\n  newMessage: (message) => ApiUtils.post(MESSAGE_URL, message),\r\n  replyMessage: (message, repliedMessageId) =>\r\n    ApiUtils.post(\r\n      MESSAGE_URL + \"/reply?repliedMessageId=\" + repliedMessageId,\r\n      message\r\n    ),\r\n  forwardMessage: (forwardList, forwardedMessageId) =>\r\n    ApiUtils.post(\r\n      MESSAGE_URL + \"/forward?forwardedMessageId=\" + forwardedMessageId,\r\n      forwardList\r\n    ),\r\n  markMessageAsRead: (messageId) =>\r\n    ApiUtils.post(MESSAGE_URL + \"/markAsRead?messageId=\" + messageId),\r\n};\r\n\r\nexport default MessageApiUtils;\r\n","import React from \"react\";\r\nimport \"../tags/Tags.css\";\r\n\r\nconst Circle = ({ color, className }) => {\r\n  return (\r\n    <>\r\n      <div className={`Circle ${className}`} style={{ background: color }} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Circle;\r\n","import React from \"react\";\r\nimport MessageApiUtils from \"../../utils/api/MessageApiUtils\";\r\nimport GradientButton from \"../buttons/GradientButton\";\r\nimport Creatable from \"react-select/creatable\";\r\n\r\nclass ForwardForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputs: {\r\n        recipientsEmails: \"\",\r\n      },\r\n      errors: {},\r\n      requestError: \"\",\r\n    };\r\n    this.forwardedMessage = props.forwardedMessage;\r\n    this.forwardOptions = props.forwardOptions;\r\n    this.setOpenMessage = props.setOpenMessage;\r\n\r\n  }\r\n\r\n  hasErrors = () => {\r\n    const errors = Object.values(this.state.errors);\r\n    const nInputs = Object.keys(this.state.inputs).length;\r\n    let b =\r\n      errors.length < nInputs\r\n        ? true\r\n        : errors.some((e) => {\r\n            return e !== \"\";\r\n          });\r\n    return b;\r\n  };\r\n\r\n  validateAll = () => {\r\n    Object.entries(this.state.inputs).forEach((e) => {\r\n      const [k, v] = e;\r\n      this.validate(k, v);\r\n    });\r\n  };\r\n\r\n  validate = (field, value) => {\r\n    this.setState({\r\n      requestError: \"\",\r\n    });\r\n    let errorMsg = \"\";\r\n    switch (field) {\r\n      case \"recipientsEmails\":\r\n        if (value === []) errorMsg = \"Recipients required\";\r\n        break;\r\n      default:\r\n    }\r\n    this.setState({\r\n      errors: { ...this.state.errors, [field]: errorMsg },\r\n    });\r\n  };\r\n\r\n  changeHandler = (field, value) => {\r\n    this.validate(field, value);\r\n    this.setState({ inputs: { ...this.state.inputs, [field]: value } });\r\n  };\r\n\r\n  apiRequestHandler = (recipientsEmails) => {\r\n    console.log(\"Forwarding to:\");\r\n    console.log(recipientsEmails);\r\n\r\n    MessageApiUtils.forwardMessage(recipientsEmails, this.forwardedMessage.id)\r\n      .then(() => {\r\n        console.log(\"Mensaje enviado\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: no se pudo reenviar el mensaje\");\r\n      });\r\n  };\r\n\r\n  submitHandler = (event) => {\r\n    event.preventDefault();\r\n    this.validateAll();\r\n    if (!this.hasErrors()) {\r\n      let recipientsEmails = this.state.inputs.recipientsEmails;\r\n      //Call API request in order to receive the user for the session\r\n      this.apiRequestHandler(recipientsEmails);\r\n      this.setState({ inputs: { ...this.state.inputs, recipientsEmails: \"\" } });\r\n      this.setOpenMessage(\"\");\r\n    } else {\r\n      console.log(\"There are errors in this form\");\r\n      console.log(this.state.errors);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.submitHandler}>\r\n        <div className=\"MsgContentInput\">\r\n          <Creatable\r\n            options={this.forwardOptions}\r\n            onChange={(e) => {\r\n              this.changeHandler(\r\n                \"recipientsEmails\",\r\n                e.map((x) => {\r\n                  return x.value;\r\n                })\r\n              );\r\n            }}\r\n            styles={customStyles}\r\n            placeholder={\"Select the recipients\"}\r\n            isMulti\r\n          ></Creatable>\r\n        </div>\r\n        <div className=\"MsgContentButtons\">\r\n          <GradientButton\r\n            onClick={this.submitHandler}\r\n            className=\"GradientButton--OpenMessage\"\r\n          >\r\n            Send\r\n          </GradientButton>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ForwardForm;\r\n\r\nconst customStyles = {\r\n  option: (provided, state) => ({\r\n    ...provided,\r\n    color: \"#a6ce56\",\r\n    width: 700,\r\n  }),\r\n  control: (base, state) => ({\r\n    ...base,\r\n    background: \"#262626\",\r\n    borderRadius: 4,\r\n    // Overwrittes the different states of border\r\n    borderColor: \"rgba(166, 206, 86, 0.8)\",\r\n    // Removes weird border around container\r\n    boxShadow: state.isFocused ? null : null,\r\n    marginBottom: 10,\r\n  }),\r\n\r\n  dropdownIndicator: (base) => ({\r\n    ...base,\r\n    fill: \"#a6ce56\",\r\n    stroke: \"#a6ce56\",\r\n  }),\r\n  menu: (base) => ({\r\n    ...base,\r\n    backgroundColor: \"#292d22\",\r\n  }),\r\n  multiValue: (base) => ({\r\n    ...base,\r\n    backgroundColor: \"#a6ce56\",\r\n  }),\r\n  multiValueLabel: (base) => ({\r\n    ...base,\r\n    color: \"white\",\r\n  }),\r\n};\r\n","import React from \"react\";\r\nimport Input from \"../forms/Input\";\r\nimport MessageApiUtils from \"../../utils/api/MessageApiUtils\";\r\nimport GradientButton from \"../buttons/GradientButton\";\r\n\r\nclass ReplyForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputs: {\r\n        text: \"\",\r\n      },\r\n      errors: {},\r\n      requestError: \"\",\r\n    };\r\n    this.repliedMessage = props.repliedMessage;\r\n    this.setOpenMessage = props.setOpenMessage;\r\n  }\r\n\r\n  hasErrors = () => {\r\n    const errors = Object.values(this.state.errors);\r\n    const nInputs = Object.keys(this.state.inputs).length;\r\n    let b =\r\n      errors.length < nInputs\r\n        ? true\r\n        : errors.some((e) => {\r\n            return e !== \"\";\r\n          });\r\n    return b;\r\n  };\r\n\r\n  validateAll = () => {\r\n    Object.entries(this.state.inputs).forEach((e) => {\r\n      const [k, v] = e;\r\n      this.validate(k, v);\r\n    });\r\n  };\r\n\r\n  validate = (field, value) => {\r\n    this.setState({\r\n      requestError: \"\",\r\n    });\r\n    let errorMsg = \"\";\r\n    switch (field) {\r\n      case \"text\":\r\n        if (value === \"\") errorMsg = \"Text required\";\r\n        break;\r\n      default:\r\n    }\r\n    this.setState({\r\n      errors: { ...this.state.errors, [field]: errorMsg },\r\n    });\r\n  };\r\n\r\n  changeHandler = (field, value) => {\r\n    this.validate(field, value);\r\n    this.setState({ inputs: { ...this.state.inputs, [field]: value } });\r\n  };\r\n\r\n  apiRequestHandler = (text) => {\r\n    let message = {\r\n      recipientsEmails: [this.repliedMessage.strippedSender.email],\r\n      subject: \"Re: \" + this.repliedMessage.subject,\r\n      text: text,\r\n      read: false,\r\n      toDoList: [],\r\n      tagList: [],\r\n    };\r\n    console.log(\"Replying:\")\r\n    console.log(message);\r\n    MessageApiUtils.replyMessage(message, this.repliedMessage.id)\r\n      .then(() => {\r\n        console.log(\"Mensaje enviado\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: no se pudo responder el mensaje\");\r\n      });\r\n  };\r\n\r\n  submitHandler = (event) => {\r\n    event.preventDefault();\r\n    this.validateAll();\r\n    if (!this.hasErrors()) {\r\n      let text = this.state.inputs.text;\r\n      //Call API request in order to receive the user for the session\r\n      this.apiRequestHandler(text);\r\n      this.setState({ inputs: { ...this.state.inputs, text: \"\" } });\r\n      this.setOpenMessage(\"\");\r\n    } else {\r\n      console.log(\"There are errors in this form\");\r\n      console.log(this.state.errors);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.submitHandler}>\r\n        <div className=\"MsgContentInput\">\r\n          <Input\r\n            name=\"text\"\r\n            type=\"text\"\r\n            value={this.state.inputs.text}\r\n            placeholder=\"Write your reply\"\r\n            styleClass=\"Input ReplyInput\"\r\n            error={this.state.errors.text}\r\n            changeHandler={this.changeHandler}\r\n          />\r\n        </div>\r\n        <div className=\"MsgContentButtons\">\r\n          <GradientButton\r\n            onClick={this.submitHandler}\r\n            className=\"GradientButton--OpenMessage\"\r\n          >\r\n            Reply\r\n          </GradientButton>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ReplyForm;\r\n","import ApiUtils from \"./ApiUtils\";\r\nconst TODO_URL = \"/toDos\";\r\n\r\nconst ToDoApiUtils = {\r\n  /*ToDos*/\r\n  getToDos: (milestoneId) =>\r\n    ApiUtils.get(TODO_URL + \"?milestoneId=\" + milestoneId),\r\n  getMyToDos: (milestoneId) =>\r\n    ApiUtils.get(TODO_URL + \"/mine?milestoneId=\" + milestoneId),\r\n  getAllMyToDos: () => ApiUtils.get(TODO_URL + \"/mine/all\"),\r\n  addNewPersonalToDo: (milestoneId, toDo) =>\r\n    ApiUtils.post(TODO_URL + \"/mine/create?milestoneId=\" + milestoneId, toDo),\r\n  markToDoAsDone: (toDoId, unmark) => ApiUtils.post(TODO_URL + `/markAsDone?unmark=${unmark?1:0}&toDoId=${toDoId}`),\r\n  createTodo: (milestoneId, todo) => ApiUtils.post(TODO_URL + \"/create?milestoneId=\" + milestoneId, todo),\r\n  assignTodo: (milestoneId, todoId, assigneeId) => ApiUtils.post(TODO_URL + `/assign?todoId=${todoId}&milestoneId=${milestoneId}&assigneeId=${assigneeId}`),\r\n  updateTitle: (milestoneId, todo) => ApiUtils.post(TODO_URL + `/updateTitle?todoId=${todo.id}&milestoneId=${milestoneId}`, todo),\r\n  setTags: (milestoneId, todoId, tagIds) => ApiUtils.post(TODO_URL + `/setTags?todoId=${todoId}&milestoneId=${milestoneId}`, tagIds),\r\n  deleteTodo: (milestoneId, todoId) => ApiUtils.delete(TODO_URL + `/delete?milestoneId=${milestoneId}&toDoId=${todoId}`)\r\n\r\n};\r\n\r\nexport default ToDoApiUtils;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCheck } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst ToDoCircle = ({ isDone, markAsDone }) => {\r\n  return (\r\n    <>\r\n      <button className=\"ToDoCircle\" onClick={markAsDone}>\r\n        {isDone && <FontAwesomeIcon icon={faCheck} />}\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ToDoCircle;\r\n","import React, { useState } from \"react\";\r\nimport ToDoApiUtils from \"../../../utils/api/ToDoApiUtils\";\r\nimport Circle from \"../tags/Circle\";\r\nimport ToDoCircle from \"./ToDoCircle\";\r\n\r\nconst ToDo = ({ id, tagList, title, done, blocked }) => {\r\n  const [isDone, setIsDone] = useState(done);\r\n  const [isDoneAnimation, setIsDoneAnimation] = useState(done);\r\n\r\n  const markAsDone = () => {\r\n    if (!blocked) {\r\n      setIsDoneAnimation(true);\r\n      console.log(\"Marking the toDo as done\");\r\n\r\n      setTimeout(\r\n        () =>\r\n          ToDoApiUtils.markToDoAsDone(id)\r\n            .then(() => {\r\n              setIsDone(true);\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"ERROR: cannot mark the todo as done\");\r\n              setIsDoneAnimation(false);\r\n            }),\r\n        700\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"ToDoTab\"\r\n      onClick={markAsDone}\r\n      hidden={blocked ? false : isDone}\r\n    >\r\n      <ToDoCircle isDone={isDoneAnimation} markAsDone={markAsDone} />{\" \"}\r\n      <span\r\n        style={{ textDecoration: isDoneAnimation ? \"line-through\" : \"none\" }}\r\n      >\r\n        {title}{\" \"}\r\n      </span>\r\n      <div\r\n        style={{\r\n          float: blocked ? \"\" : \"right\",\r\n          display: blocked ? \"inline-block\" : \"\",\r\n          marginLeft: \"15px\",\r\n        }}\r\n      >\r\n        {tagList.map((tag) => {\r\n          return <Circle key={tag.color} color={tag.color} />;\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ToDo;\r\n","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faLongArrowAltDown } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst FilePreview = (url) => {\r\n  console.log(url.url);\r\n  return (\r\n    <a href={\"\" + url.url} target=\"_blank\">\r\n      <div className=\"FilePreview\" onClick={null}>\r\n        <FontAwesomeIcon icon={faLongArrowAltDown} />\r\n      </div>\r\n    </a>\r\n  );\r\n};\r\n\r\nexport default FilePreview;\r\n","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport UserApiUtils from \"../../utils/api/UserApiUtils\";\r\nimport GradientButton from \"../buttons/GradientButton\";\r\nimport ForwardForm from \"./ForwardForm\";\r\nimport ReplyForm from \"./ReplyForm\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faReply } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faForward } from \"@fortawesome/free-solid-svg-icons\";\r\nimport ToDo from \"../projects/toDos/ToDo\";\r\nimport FilePreview from \"./FilePreview\";\r\n\r\nconst OpenedMessage = ({ msg, setOpenMessage }) => {\r\n  const [forwardOptions, setForwardOptions] = useState([]);\r\n  const [messageOptions, setMessageOptions] = useState(\"\");\r\n  useEffect(() => {\r\n    if (messageOptions === \"Forward\")\r\n      UserApiUtils.getUsers()\r\n        .then((res) => {\r\n          console.log(\"Getting user mails\");\r\n          let mailList = res.map((user) => {\r\n            return { label: user.name + \" - \" + user.email, value: user.email };\r\n          });\r\n          setForwardOptions(mailList);\r\n          console.log(mailList);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"ERROR: cannot get the users mails\");\r\n        });\r\n  }, [messageOptions]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"MsgContentSentTo\">\r\n        <span style={{ fontWeight: \"bold\" }}>\r\n          Sent to{\" \"}\r\n          {msg.strippedRecipients.map((r) => {\r\n            return <b key={r.name}> {r.name} </b>;\r\n          })}\r\n        </span>\r\n      </div>\r\n      <div\r\n        className=\"MsgContentText\"\r\n        dangerouslySetInnerHTML={{ __html: msg.text.replace(/\\n/g, \"<br>\") }}\r\n      ></div>\r\n      <div className=\"MsgContentButtons\">\r\n        <GradientButton\r\n          onClick={() => {\r\n            messageOptions === \"Reply\"\r\n              ? setMessageOptions(\"\")\r\n              : setMessageOptions(\"Reply\");\r\n          }}\r\n          className=\"GradientButton--ReFor \"\r\n        >\r\n          <FontAwesomeIcon icon={faReply} />\r\n        </GradientButton>\r\n        <GradientButton\r\n          onClick={() => {\r\n            messageOptions === \"Forward\"\r\n              ? setMessageOptions(\"\")\r\n              : setMessageOptions(\"Forward\");\r\n          }}\r\n          className=\"GradientButton--ReFor\"\r\n        >\r\n          <FontAwesomeIcon icon={faForward} />\r\n        </GradientButton>\r\n      </div>\r\n      <div className=\"MsgContentToDos\">\r\n        {msg.toDos.map((toDo) => {\r\n          return (\r\n            <ToDo\r\n              key={toDo.id}\r\n              id={toDo.id}\r\n              tagList={toDo.tags}\r\n              title={toDo.title}\r\n              done={toDo.done}\r\n              blocked={true}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      <div className=\"MsgContentFiles\">\r\n        {msg.attatchments.map((file) => {\r\n          return <FilePreview key={file.id} id={file.id} url={file.url} />;\r\n        })}\r\n      </div>\r\n      {messageOptions === \"Reply\" && (\r\n        <ReplyForm repliedMessage={msg} setOpenMessage={setOpenMessage} />\r\n      )}\r\n      {messageOptions === \"Forward\" && (\r\n        <ForwardForm\r\n          key={JSON.stringify(forwardOptions)}\r\n          forwardOptions={forwardOptions}\r\n          forwardedMessage={msg}\r\n          setOpenMessage={setOpenMessage}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OpenedMessage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport MessageApiUtils from \"../../utils/api/MessageApiUtils\";\r\nimport Circle from \"../projects/tags/Circle\";\r\nimport OpenedMessage from \"./OpenedMessage\";\r\nconst MessagePreview = ({\r\n  msg,\r\n  openMessage,\r\n  setOpenMessage,\r\n  setReloadCounters,\r\n}) => {\r\n  const [read, setRead] = useState();\r\n\r\n  useEffect(() => {\r\n    setRead(msg.read);\r\n  }, [msg]);\r\n\r\n  const isOpen = () => {\r\n    return openMessage === msg.id;\r\n  };\r\n\r\n  const collapseMessage = () => {\r\n    isOpen() ? setOpenMessage(\"\") : setOpenMessage(msg.id);\r\n    setReloadCounters(true);\r\n    if (!read) {\r\n      MessageApiUtils.markMessageAsRead(msg.id)\r\n        .then((res) => {\r\n          setRead(true);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"ERROR: You cannot mark this message as read\");\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={\r\n          isOpen()\r\n            ? \"MsgPreviewContainer MsgPreviewContainer--Active\"\r\n            : read\r\n            ? \"MsgPreviewContainer MsgPreviewContainer--Read\"\r\n            : \"MsgPreviewContainer\"\r\n        }\r\n        onClick={collapseMessage}\r\n      >\r\n        <div className=\"SelectBox\" />\r\n        <h4 className=\"MsgTitle\">\r\n          {msg.strippedSender.name ? msg.strippedSender.name : \"Usuario\"}{\" \"}\r\n          {msg.strippedSender.lastname\r\n            ? msg.strippedSender.lastname\r\n            : \"Eliminado\"}{\" \"}\r\n          -{\" \"}\r\n        </h4>\r\n        <h5 className=\"MsgSubject\"> {msg.subject} </h5>\r\n\r\n        <h5 className=\"MsgDateTime\" style={{ float: \"right\" }}>\r\n          {msg.timestamp}\r\n        </h5>\r\n        <div className=\"MsgTags\" style={{ float: \"right\" }}>\r\n          {msg.tags.map((tag) => {\r\n            return <Circle key={tag.id} color={tag.color} />;\r\n          })}\r\n        </div>\r\n      </div>\r\n      <div\r\n        className={isOpen() ? \"MsgContent\" : \"MsgContent MsgContent--Collapsed\"}\r\n      >\r\n        <OpenedMessage key={msg.id} msg={msg} setOpenMessage={setOpenMessage} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MessagePreview;\r\n","import React, { useState } from \"react\";\r\nimport MessagePreview from \"./MessagePreview\";\r\nimport \"./Messages.css\";\r\nimport Spinner from \"../spinner/Spinner\";\r\n\r\nconst MessageList = ({ setReloadCounters, messages }) => {\r\n  const [openMessage, setOpenMessage] = useState(\"\");\r\n\r\n\r\n  if (!messages)\r\n  {\r\n    return <Spinner />\r\n  }\r\n\r\n  let messageList = messages.map((msg) => {\r\n    return (\r\n      <MessagePreview\r\n        key={msg.id}\r\n        msg={msg}\r\n        openMessage={openMessage}\r\n        setOpenMessage={setOpenMessage}\r\n        setReloadCounters={setReloadCounters}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"MsgListContainer\">\r\n      {messageList}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageList;\r\n","import ApiUtils from \"./ApiUtils\";\r\n\r\nconst TAGS_URL = \"/tags\";\r\n\r\nconst TagApiUtils = {\r\n  /*TAGS*/\r\n  getTags: (projectId) => ApiUtils.get(TAGS_URL + \"?projectId=\" + projectId),\r\n  getAllMyTags: () => ApiUtils.get(TAGS_URL + \"/mine/all\"),\r\n  addNewTag: (projectId, tag) =>\r\n    ApiUtils.post(TAGS_URL + \"/create?projectId=\" + projectId, tag),\r\n  deleteTag: (projectId, tagId) =>\r\n    ApiUtils.delete(TAGS_URL + `/delete?projectId=${projectId}&tagId=${tagId}`),\r\n};\r\n\r\nexport default TagApiUtils;\r\n","import Circle from \"../../projects/tags/Circle\";\r\n\r\nconst TagTab = ({ children, color, selected, onClick, inline, unselectable, light }) =>\r\n{\r\n    let styleClass = `TagTab ${light ? \"TagTab--Light\" : \"\"} ${selected ? \"TagTab--Selected\" : \"\"} ${inline ? \"TagTab--Inline\" : \"\"} ${unselectable ? \"TagTab--Unselectable\" : \"\"}`;\r\n    if (color)\r\n    {\r\n        return (\r\n            <div\r\n                className={styleClass}\r\n                onClick={onClick}>\r\n                <Circle\r\n                    className=\"TagTab__Circle\"\r\n                    color={selected ? \"#20290f\" : color} />\r\n                {children}\r\n            </div>\r\n        );\r\n    } else \r\n    {\r\n        return (\r\n            <div\r\n                className={styleClass}\r\n                onClick={onClick}>\r\n                {children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TagTab;","import TagTab from \"../../settings/milestone/TagTab\"\r\n\r\nconst CustomOptionComponent = ({ value, label, tagColor, project }, {context}) =>\r\n{\r\n    let isValue = context === \"value\";\r\n    let color = isValue ? \"#222\" : \"#a6ce56\";\r\n    if (tagColor)\r\n    {\r\n        let text = label;\r\n        if (project)\r\n            text += ` ${project}`;\r\n        return (\r\n            <div style={{ display: \"flex\" }}>\r\n                <div><TagTab light={isValue} inline unselectable color={tagColor}>{text}</TagTab></div>\r\n            </div>\r\n        );\r\n    } else\r\n    {\r\n        return (\r\n            <div style={{ display: \"flex\" }}>\r\n                <div style={{ color }}>{label}</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default CustomOptionComponent;","import React from \"react\";\r\nimport Creatable from \"react-select/creatable\";\r\nimport InputError from \"../../forms/InputError\";\r\nimport CustomOptionComponent from \"./CustomOptionComponent\";\r\n\r\nconst NewMessageMultiSelect = ({\r\n  name,\r\n  placeholder,\r\n  options,\r\n  defaultOptions,\r\n  changeHandler,\r\n  className,\r\n  error,\r\n}) => {\r\n  return (\r\n    <div\r\n      className={`InputContainer ${className}`}\r\n      style={{\r\n        marginBottom: \"0px\",\r\n      }}\r\n    >\r\n      <p className=\"TitleNewMsg\">{name}</p>\r\n      <Creatable\r\n        formatOptionLabel={CustomOptionComponent}\r\n        options={options}\r\n        defaultValue={defaultOptions}\r\n        onChange={(e) => {\r\n          changeHandler(\r\n            name,\r\n            e.map((x) => {\r\n              return x.value;\r\n            })\r\n          );\r\n        }}\r\n        styles={customStyles}\r\n        name={name}\r\n        placeholder={placeholder}\r\n        isMulti\r\n      ></Creatable>\r\n      {error && <InputError error={error} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst customStyles = {\r\n  option: (provided, state) => ({\r\n    ...provided,\r\n    color: \"#a6ce56\",\r\n    background: state.isFocused ? \"#ccc2\" : null\r\n  }),\r\n  control: (base, state) => ({\r\n    ...base,\r\n    background: \"#262626\",\r\n    borderRadius: 4,\r\n    // Overwrittes the different states of border\r\n    borderColor: \"rgba(166, 206, 86, 0.8)\",\r\n    // Removes weird border around container\r\n    boxShadow: state.isFocused ? null : null,\r\n    marginBottom: 10,\r\n  }),\r\n\r\n  dropdownIndicator: (base) => ({\r\n    ...base,\r\n    fill: \"#a6ce56\",\r\n    stroke: \"#a6ce56\",\r\n  }),\r\n  menu: (base) => ({\r\n    ...base,\r\n    backgroundColor: \"#292d22\",\r\n  }),\r\n  multiValue: (base) => ({\r\n    ...base,\r\n    backgroundColor: \"#a6ce56\",\r\n  }),\r\n  valueContainer: (base) => ({\r\n    ...base,\r\n    flexDirection: \"row\",\r\n    flexWrap: \"nowrap\",\r\n  }),\r\n  multiValueLabel: (base) => ({\r\n    ...base,\r\n    color: \"#262626\",\r\n  }),\r\n};\r\n\r\nexport default NewMessageMultiSelect;\r\n","import React from \"react\";\r\nimport InputError from \"../../forms/InputError\";\r\n\r\nexport default function NewMessageText({ name, changeHandler, error }) {\r\n  return (\r\n    <div className=\"NewMsgTextLabel\">\r\n      <span className=\"NewMsgBodyText\">{name}</span>\r\n      <textarea\r\n        name={name}\r\n        className=\"Input NewMsgBody InputNewMsg\"\r\n        form=\"NewMsgForm\"\r\n        onChange={(e) => changeHandler(name, e.target.value)}\r\n      ></textarea>\r\n      <InputError error={error} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { createRef } from \"react\";\r\nimport Input from \"../../forms/Input\";\r\nimport NewMessageMultiSelect from \"./NewMessageMultiSelect\";\r\nimport NewMessageText from \"./NewMessageText\";\r\n\r\nimport SubmitButton from \"../../forms/SubmitButton\";\r\nimport axios from \"axios\";\r\n\r\nclass NewMessageForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputs: {\r\n        To: \"\",\r\n        Tags: \"\",\r\n        Subject: \"\",\r\n        ToDos: \"\",\r\n        Message: \"\",\r\n        File: \"\",\r\n      },\r\n      errors: {},\r\n      requestError: \"\",\r\n    };\r\n\r\n    this.ChangeModalNewMessage = props.ChangeModalNewMessage;\r\n    this.mailOptions = props.mailOptions;\r\n    this.toDoOptions = props.toDoOptions;\r\n    this.tagOptions = props.tagOptions;\r\n    this.fileRef = createRef(null);\r\n  }\r\n\r\n  hasErrors = () => {\r\n    const errors = Object.values(this.state.errors);\r\n    const nInputs = Object.keys(this.state.inputs).length;\r\n\r\n    let b =\r\n      errors.length < nInputs - 3\r\n        ? true\r\n        : errors.some((e) => {\r\n            return e !== \"\";\r\n          });\r\n    return b;\r\n  };\r\n\r\n  validateAll = () => {\r\n    Object.entries(this.state.inputs).forEach((e) => {\r\n      const [k, v] = e;\r\n      this.validate(k, v);\r\n    });\r\n  };\r\n\r\n  validate = (field, value) => {\r\n    this.setState({\r\n      requestError: \"\",\r\n    });\r\n    let errorMsg = \"\";\r\n    switch (field) {\r\n      case \"To\":\r\n        if (value.length < 1 || value === \"\")\r\n          errorMsg = \"Select one recipient at least\";\r\n        break;\r\n      case \"Subject\":\r\n        if (value.length > 100)\r\n          errorMsg = \"Too Long Subject (\" + (100 - value.length) + \")\";\r\n        break;\r\n      case \"Message\":\r\n        if (value === \"\") errorMsg = \"Message required\";\r\n        if (value.length > 750)\r\n          errorMsg = \"The Message is too Long (\" + (750 - value.length) + \")\";\r\n        break;\r\n      default:\r\n    }\r\n    this.setState({\r\n      errors: { ...this.state.errors, [field]: errorMsg },\r\n    });\r\n  };\r\n\r\n  changeHandler = (field, value) => {\r\n    this.validate(field, value);\r\n\r\n    this.setState({\r\n      inputs: { ...this.state.inputs, [field]: value },\r\n    });\r\n  };\r\n\r\n  changeFile = (files) => {\r\n    this.setState({\r\n      inputs: { ...this.state.inputs, File: files },\r\n    });\r\n  };\r\n\r\n  apiRequestHandler = (to, subject, text, toDos, tags, files) => {\r\n    console.log(\"Sending: \");\r\n    console.log(files);\r\n    let formData = new FormData();\r\n    for (let i = 0; i <= files.length - 1; i++) {\r\n      formData.append(\"files\", files[i]);\r\n    }\r\n    let message = {\r\n      recipientsEmails: to,\r\n      subject: subject,\r\n      text: text,\r\n      read: false,\r\n      toDoList: toDos && toDos !== \"\" ? toDos : [],\r\n      tagList: tags && tags !== \"\" ? tags : [],\r\n    };\r\n    formData.append(\r\n      \"message\",\r\n      new Blob([JSON.stringify(message)], { type: \"application/json\" })\r\n    );\r\n    console.log(message);\r\n    axios({\r\n      method: \"POST\",\r\n      url: \"/api/message\",\r\n      data: formData,\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n  };\r\n\r\n  submitHandler = (event) => {\r\n    event.preventDefault();\r\n    this.validateAll();\r\n    if (!this.hasErrors()) {\r\n      let to = this.state.inputs.To;\r\n      let subject = this.state.inputs.Subject;\r\n      let text = this.state.inputs.Message;\r\n      let toDos = this.state.inputs.ToDos;\r\n      let tags = this.state.inputs.Tags;\r\n      let files = this.state.inputs.File;\r\n      this.apiRequestHandler(to, subject, text, toDos, tags, files);\r\n      this.ChangeModalNewMessage();\r\n    } else {\r\n      console.log(\"There are errors in this form\");\r\n      console.log(this.state.errors);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.submitHandler} className=\"NewMsgForm\">\r\n        <NewMessageMultiSelect\r\n          name=\"To\"\r\n          placeholder=\"Users\"\r\n          changeHandler={this.changeHandler}\r\n          options={this.mailOptions}\r\n          error={this.state.errors.To}\r\n        ></NewMessageMultiSelect>\r\n        <div className=\"SecondLineFlex\">\r\n          <NewMessageMultiSelect\r\n            name=\"Tags\"\r\n            placeholder=\"Tags\"\r\n            changeHandler={this.changeHandler}\r\n            options={this.tagOptions}\r\n            className=\"InputContainer2\"\r\n          ></NewMessageMultiSelect>\r\n          <NewMessageMultiSelect\r\n            name=\"ToDos\"\r\n            placeholder=\"ToDos\"\r\n            options={this.toDoOptions}\r\n            changeHandler={this.changeHandler}\r\n            className=\"InputContainer2\"\r\n          ></NewMessageMultiSelect>\r\n        </div>\r\n        <div className=\"NewMsg\">\r\n          <div className=\"NewMsgHeadLabel\">\r\n            <span className=\"NewMsgHeadText\">Subject</span>\r\n            <Input\r\n              name=\"Subject\"\r\n              styleClass=\"Input NewMsgHead InputNewMsg\"\r\n              placeholder=\"How are you?\"\r\n              error={this.state.errors.Subject}\r\n              changeHandler={this.changeHandler}\r\n            ></Input>\r\n          </div>\r\n\r\n          <NewMessageText\r\n            name=\"Message\"\r\n            error={this.state.errors.Message}\r\n            changeHandler={this.changeHandler}\r\n          ></NewMessageText>\r\n        </div>\r\n        <div className=\"NewMsgSendOptions\">\r\n          <input\r\n            id=\"files\"\r\n            type=\"file\"\r\n            ref={this.fileRef}\r\n            multiple\r\n            onChange={(e) => this.changeFile(e.target.files)}\r\n            hidden\r\n          />\r\n          <img\r\n            className=\"NewMsgUpload\"\r\n            src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ3NS4wNzggNDc1LjA3NyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgY2xhc3M9IiI+PGc+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Cgk8Zz4KCQk8cGF0aCBkPSJNNDY3LjA4MSwzMjcuNzY3Yy01LjMyMS01LjMzMS0xMS43OTctNy45OTQtMTkuNDExLTcuOTk0aC0xMjEuOTFjLTMuOTk0LDEwLjY1Ny0xMC43MDUsMTkuNDExLTIwLjEyNiwyNi4yNjIgICAgYy05LjQyNSw2Ljg1Mi0xOS45MzgsMTAuMjgtMzEuNTQ2LDEwLjI4aC03My4wOTZjLTExLjYwOSwwLTIyLjEyNi0zLjQyOS0zMS41NDUtMTAuMjhjLTkuNDIzLTYuODUxLTE2LjEzLTE1LjYwNC0yMC4xMjctMjYuMjYyICAgIEgyNy40MDhjLTcuNjEyLDAtMTQuMDgzLDIuNjYzLTE5LjQxNCw3Ljk5NEMyLjY2NCwzMzMuMDkyLDAsMzM5LjU2MywwLDM0Ny4xNzh2OTEuMzYxYzAsNy42MSwyLjY2NCwxNC4wODksNy45OTQsMTkuNDEgICAgYzUuMzMsNS4zMjksMTEuODAxLDcuOTkxLDE5LjQxNCw3Ljk5MWg0MjAuMjY2YzcuNjEsMCwxNC4wODYtMi42NjIsMTkuNDEtNy45OTFjNS4zMzItNS4zMjgsNy45OTQtMTEuOCw3Ljk5NC0xOS40MXYtOTEuMzYxICAgIEM0NzUuMDc4LDMzOS41NjMsNDcyLjQxNiwzMzMuMDk5LDQ2Ny4wODEsMzI3Ljc2N3ogTTM2MC4wMjUsNDIzLjk3OGMtMy42MjEsMy42MTctNy45MDUsNS40MjgtMTIuODU0LDUuNDI4ICAgIHMtOS4yMjctMS44MTEtMTIuODQ3LTUuNDI4Yy0zLjYxNC0zLjYxMy01LjQyMS03Ljg5OC01LjQyMS0xMi44NDdzMS44MDctOS4yMzYsNS40MjEtMTIuODQ3YzMuNjItMy42MTMsNy44OTgtNS40MjgsMTIuODQ3LTUuNDI4ICAgIHM5LjIzMiwxLjgxNCwxMi44NTQsNS40MjhjMy42MTMsMy42MSw1LjQyMSw3Ljg5OCw1LjQyMSwxMi44NDdTMzYzLjYzOCw0MjAuMzY0LDM2MC4wMjUsNDIzLjk3OHogTTQzMy4xMDksNDIzLjk3OCAgICBjLTMuNjE0LDMuNjE3LTcuODk4LDUuNDI4LTEyLjg0OCw1LjQyOGMtNC45NDgsMC05LjIyOS0xLjgxMS0xMi44NDctNS40MjhjLTMuNjEzLTMuNjEzLTUuNDItNy44OTgtNS40Mi0xMi44NDcgICAgczEuODA3LTkuMjM2LDUuNDItMTIuODQ3YzMuNjE3LTMuNjEzLDcuODk4LTUuNDI4LDEyLjg0Ny01LjQyOGM0Ljk0OSwwLDkuMjMzLDEuODE0LDEyLjg0OCw1LjQyOCAgICBjMy42MTcsMy42MSw1LjQyNyw3Ljg5OCw1LjQyNywxMi44NDdTNDM2LjcyOSw0MjAuMzY0LDQzMy4xMDksNDIzLjk3OHoiIGZpbGw9IiNhN2UzMmQiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIHN0eWxlPSIiPjwvcGF0aD4KCQk8cGF0aCBkPSJNMTA5LjYzMiwxNzMuNTloNzMuMDg5djEyNy45MDljMCw0Ljk0OCwxLjgwOSw5LjIzMiw1LjQyNCwxMi44NDdjMy42MTcsMy42MTMsNy45LDUuNDI3LDEyLjg0Nyw1LjQyN2g3My4wOTYgICAgYzQuOTQ4LDAsOS4yMjctMS44MTMsMTIuODQ3LTUuNDI3YzMuNjE0LTMuNjE0LDUuNDIxLTcuODk4LDUuNDIxLTEyLjg0N1YxNzMuNTloNzMuMDkxYzcuOTk3LDAsMTMuNjEzLTMuODA5LDE2Ljg0NC0xMS40MiAgICBjMy4yMzctNy40MjIsMS45MDItMTMuOTktMy45OTctMTkuNzAxTDI1MC4zODUsMTQuNTYyYy0zLjQyOS0zLjYxNy03LjcwNi01LjQyNi0xMi44NDctNS40MjZjLTUuMTM2LDAtOS40MTksMS44MDktMTIuODQ3LDUuNDI2ICAgIEw5Ni43ODYsMTQyLjQ2OWMtNS45MDIsNS43MTEtNy4yMzMsMTIuMjc1LTMuOTk5LDE5LjcwMUM5Ni4wMjYsMTY5Ljc4NSwxMDEuNjQsMTczLjU5LDEwOS42MzIsMTczLjU5eiIgZmlsbD0iI2E3ZTMyZCIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgc3R5bGU9IiI+PC9wYXRoPgoJPC9nPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjwvZz48L3N2Zz4=\"\r\n            onClick={() => this.fileRef.current.click()}\r\n          />\r\n          <SubmitButton\r\n            text={\"Send\"}\r\n            className=\"NewMsgSendButton\"\r\n            requestError={this.state.requestError}\r\n            hasErrors={this.hasErrors()}\r\n          />\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NewMessageForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport TagApiUtils from \"../../../utils/api/TagApiUtils\";\r\nimport ToDoApiUtils from \"../../../utils/api/ToDoApiUtils\";\r\nimport UserApiUtils from \"../../../utils/api/UserApiUtils\";\r\nimport NewMessageForm from \"./NewMessageForm\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst NewMessage = ({ ChangeModalNewMessage }) => {\r\n  const [mailOptions, setMailOptions] = useState([]);\r\n  const [toDoOptions, setToDoOptions] = useState([]);\r\n  const [tagOptions, setTagOptions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    UserApiUtils.getUsers()\r\n      .then((res) => {\r\n        console.log(\"Getting user mail options\");\r\n        let mailList = res.map((user) => {\r\n          return { label: user.name + \" - \" + user.email, value: user.email };\r\n        });\r\n        setMailOptions(mailList);\r\n        console.log(mailList);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: cannot get the users mails\");\r\n        console.log(error);\r\n      });\r\n  }, [ChangeModalNewMessage]);\r\n\r\n  useEffect(() => {\r\n    TagApiUtils.getAllMyTags()\r\n      .then((res) => {\r\n        console.log(\"Getting user tags options\");\r\n        let taglist = Object.entries(res).map((proyecto) => {\r\n          return proyecto[1].map((tag) => {\r\n            return {\r\n              label: tag.title + \": (\" + proyecto[0] + \")\",\r\n              value: tag.id,\r\n            };\r\n          });\r\n        });\r\n        console.log(taglist[0]);\r\n        setTagOptions(taglist[0]);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: cannot get the user's tags\");\r\n        console.log(error);\r\n      });\r\n  }, [ChangeModalNewMessage]);\r\n\r\n  useEffect(() => {\r\n    ToDoApiUtils.getAllMyToDos()\r\n      .then((res) => {\r\n        console.log(\"Getting user toDos\");\r\n        let toDoList = Object.entries(res).map((proyecto) => {\r\n          return proyecto[1].map((toDo) => {\r\n            return {\r\n              label: toDo.title + \": (\" + proyecto[0] + \")\",\r\n              value: toDo.id,\r\n            };\r\n          });\r\n        });\r\n        console.log(toDoList[0]);\r\n        setToDoOptions(toDoList[0]);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: cannot get the user's todos\");\r\n        console.log(error);\r\n      });\r\n  }, [ChangeModalNewMessage]);\r\n\r\n  return (\r\n    <div className=\"NewMsgModal\">\r\n      <div className=\"NewMsgContainer\">\r\n        <div\r\n          onClick={ChangeModalNewMessage}\r\n          style={{ display: \"block\", marginBottom: \"10px\" }}\r\n        >\r\n          <FontAwesomeIcon\r\n            icon={faTimes}\r\n            size={\"10x\"}\r\n            style={{ float: \"right\", fontSize: \"18\" }}\r\n          />\r\n        </div>\r\n        <NewMessageForm\r\n          key={JSON.stringify(mailOptions + toDoOptions + tagOptions)}\r\n          mailOptions={mailOptions}\r\n          toDoOptions={toDoOptions}\r\n          tagOptions={tagOptions}\r\n          ChangeModalNewMessage={ChangeModalNewMessage}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewMessage;\r\n","import './Sidebar.css';\r\n\r\nconst Sidebar = (props) => {\r\n    return (\r\n        <div className=\"Sidebar\">\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar;\r\n","import React from \"react\"\r\nimport \"./SidebarTab.css\";\r\n\r\nconst InboxSidebarTab = ({\r\n  text,\r\n  selectedTab,\r\n  setSelectedTab,\r\n  isTag,\r\n  children,\r\n}) => {\r\n  let className = isTag ? \"SidebarTab SidebarTab--Tag\" : \"SidebarTab\";\r\n  if (selectedTab === text) {\r\n    className += \" SidebarTab--Selected\";\r\n  }\r\n\r\n  return (\r\n    <div className={className} onClick={() => setSelectedTab(text)}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InboxSidebarTab;\r\n","import React from \"react\";\r\nimport InboxSidebarTab from \"../sidebar/InboxSidebarTab\";\r\n\r\nconst Inboxes = ({\r\n  numberOfInboxMessages,\r\n  numberOfSentMessages,\r\n  selectedTab,\r\n  setSelectedTab,\r\n}) => {\r\n  return (\r\n    <>\r\n      <h3 className=\"SidebarSectionTitle\">Inboxes</h3>\r\n      <InboxSidebarTab\r\n        text=\"Inbox\"\r\n        selectedTab={selectedTab}\r\n        setSelectedTab={setSelectedTab}\r\n        isTag={false}\r\n      >\r\n        Inbox\r\n        <span style={{ float: \"right\" }}>{numberOfInboxMessages}</span>\r\n      </InboxSidebarTab>\r\n      <InboxSidebarTab\r\n        text=\"Sent\"\r\n        selectedTab={selectedTab}\r\n        setSelectedTab={setSelectedTab}\r\n        isTag={false}\r\n      >\r\n        Sent\r\n        <span style={{ float: \"right\" }}>{numberOfSentMessages}</span>\r\n      </InboxSidebarTab>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Inboxes;\r\n","import ApiUtils from \"./ApiUtils\";\r\nconst DEPARTMENT_URL = \"/departments\";\r\nconst BELONGS_URL = \"/belongs\";\r\n\r\nconst DepartmentApiUtils = {\r\n  /*DEPARTMENTS*/\r\n  getDepartments: () => ApiUtils.get(DEPARTMENT_URL),\r\n  postDepartment: (department) => ApiUtils.post(DEPARTMENT_URL + \"/create\", department),\r\n  updateDepartment: (department) => ApiUtils.patch(DEPARTMENT_URL + `/update?departmentId=${department.id}`, department),\r\n  deleteDepartment: (id) => ApiUtils.delete(DEPARTMENT_URL + \"/\" + id + \"/delete\"),\r\n  getMyDepartments: () => ApiUtils.get(DEPARTMENT_URL + \"/mine\"),\r\n  addUserToDepartment: (departmentId, userId, departmentManager) => \r\n  {\r\n    if (departmentManager !== undefined)\r\n    {\r\n      return ApiUtils.post(DEPARTMENT_URL + BELONGS_URL + `/create?departmentId=${departmentId}&belongUserId=${userId}&isDepartmentManager=${departmentManager}`);\r\n    } else\r\n    {\r\n      return ApiUtils.post(DEPARTMENT_URL + BELONGS_URL + `/create?departmentId=${departmentId}&belongUserId=${userId}`);\r\n    }\r\n  },\r\n  removeUserFromDepartment: (departmentId, userId) => \r\n  {\r\n    return ApiUtils.delete(DEPARTMENT_URL + BELONGS_URL + `/delete?departmentId=${departmentId}&belongUserId=${userId}`);\r\n  },\r\n  getMembersFromDepartment: (departmentId) => ApiUtils.get(DEPARTMENT_URL + BELONGS_URL + `?departmentId=${departmentId}`)\r\n};\r\n\r\nexport default DepartmentApiUtils;\r\n","import ApiUtils from \"./ApiUtils\";\r\nconst PROJECT_URL = \"/projects\";\r\nconst PARTICIPATION_URL = \"/participation\";\r\n\r\nconst ProjectApiUtils = {\r\n  /*PROJECT*/\r\n  getProjects: (departmentId) => ApiUtils.get(PROJECT_URL + `?departmentId=${departmentId}`),\r\n  getMyProjects: (departmentId) => ApiUtils.get(PROJECT_URL + \"/mine?departmentId=\" + departmentId),\r\n  postProject: (departmentId, project) => ApiUtils.post(PROJECT_URL + `/create?departmentId=${departmentId}`, project),\r\n  updateProject: (departmentId, projectId, project) => ApiUtils.patch(PROJECT_URL + `/update?departmentId=${departmentId}&projectId=${projectId}`, project),\r\n  deleteProject: (departmentId, projectId) => ApiUtils.delete(PROJECT_URL + `/delete?departmentId=${departmentId}&projectId=${projectId}`),\r\n  addUserToProject: (projectId, userId, projectManager) => \r\n  {\r\n    if (projectManager !== undefined)\r\n    {\r\n      return ApiUtils.post(PROJECT_URL + PARTICIPATION_URL + `/create?projectId=${projectId}&participationUserId=${userId}&willBeProjectManager=${projectManager}`);\r\n    } else\r\n    {\r\n      return ApiUtils.post(PROJECT_URL + PARTICIPATION_URL + `/create?projectId=${projectId}&participationUserId=${userId}`);\r\n    }\r\n  },\r\n  removeUserFromProject: (projectId, userId) => \r\n  {\r\n    return ApiUtils.delete(PROJECT_URL + PARTICIPATION_URL + `/delete?projectId=${projectId}&participationUserId=${userId}`);\r\n  },\r\n  getMembersFromProject: (projectId) => ApiUtils.get(PROJECT_URL + PARTICIPATION_URL + `?projectId=${projectId}`)\r\n};\r\n\r\nexport default ProjectApiUtils;","import React, { useEffect, useState } from \"react\";\r\nimport DepartmentApiUtils from \"../../utils/api/DepartmentApiUtils\";\r\nimport ProjectApiUtils from \"../../utils/api/ProjectApiUtils\";\r\nimport \"./ProjectPicker.css\";\r\n\r\nconst ProjectPicker = ({ pickedProject, setPickedProject }) => {\r\n  const [departmentList, setDepartmentList] = useState([]);\r\n  const [projectList, setProjectList] = useState([]);\r\n  const [department, setDepartment] = useState(null);\r\n  const [pickedDepartment, setPickedDepartment] = useState({});\r\n  const [opened, setOpened] = useState(false);\r\n\r\n  useEffect(() => {\r\n    DepartmentApiUtils.getMyDepartments()\r\n      .then((res) => {\r\n        setDepartmentList(res);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: cannot get the departments\");\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (department !== null)\r\n      ProjectApiUtils.getMyProjects(department.id)\r\n        .then((res) => {\r\n          setProjectList(res);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"ERROR: cannot get the projects\");\r\n        });\r\n  }, []);\r\n\r\n  const openOrClose = () => {\r\n    setOpened(!opened);\r\n  };\r\n\r\n  const handlePickDepartment = (dpt) => {\r\n    console.log(\"GETTIN PROJECTS\");\r\n    setPickedDepartment(dpt);\r\n    ProjectApiUtils.getMyProjects(dpt.id)\r\n      .then((res) => {\r\n        setProjectList(res);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: cannot get the projects\");\r\n      });\r\n  };\r\n\r\n  const handlePickProject = (project) => {\r\n    setDepartment(pickedDepartment);\r\n    setPickedProject(project);\r\n    openOrClose();\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: departmentList <= 0 ? \"none\" : \"\" }}>\r\n      <h3 className=\"SidebarSectionTitle\">Project</h3>\r\n\r\n      <button className=\"PickerBox\" onClick={openOrClose}>\r\n        {department?.name} - {pickedProject?.name}\r\n      </button>\r\n      <div\r\n        className=\"CollapsedDPTPicker\"\r\n        style={{ maxHeight: opened ? \"none\" : \"0px\" }}\r\n      >\r\n        <div className=\"DepartmentPicker\">\r\n          {departmentList.map((dpt) => {\r\n            return (\r\n              <button\r\n                key={dpt.id}\r\n                className=\"CollapsedSelector\"\r\n                onClick={() => handlePickDepartment(dpt)}\r\n              >\r\n                {dpt.name}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className=\"ProjectPicker\">\r\n          {projectList.map((project) => {\r\n            return (\r\n              <button\r\n                key={project.id}\r\n                className=\"CollapsedSelector\"\r\n                onClick={() => handlePickProject(project)}\r\n              >\r\n                {project.name}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectPicker;\r\n","import { faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport ToDoApiUtils from \"../../../utils/api/ToDoApiUtils\";\r\nimport Input from \"../../forms/Input\";\r\nimport SubmitError from \"../../forms/SubmitError\";\r\n\r\n\r\nclass AddToDoForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputs: {\r\n        toDo: \"\",\r\n      },\r\n      errors: {},\r\n      requestError: \"\",\r\n    };\r\n    this.disable = props.shouldDisable;\r\n  }\r\n\r\n  hasErrors = () => {\r\n    const errors = Object.values(this.state.errors);\r\n    const nInputs = Object.keys(this.state.inputs).length;\r\n    let b = errors.some((e) => {\r\n      return e !== \"\";\r\n    });\r\n    return b;\r\n  };\r\n\r\n  validate = (value) => {\r\n    this.setState({\r\n      requestError: \"\",\r\n    });\r\n\r\n    let errorMsg = \"\";\r\n    if (value === \"\") errorMsg = \"ToDo required\";\r\n    else if (value.length > 30) errorMsg = \"Too Long toDo\";\r\n\r\n    this.setState({\r\n      errors: { ...this.state.errors, toDo: errorMsg },\r\n    });\r\n  };\r\n\r\n  changeHandler = (field, value) => {\r\n    this.validate(value);\r\n    this.setState({ inputs: { ...this.state.inputs, toDo: value } });\r\n  };\r\n\r\n  apiRequestHandler = (toDoTitle) => {\r\n    ToDoApiUtils.addNewPersonalToDo(this.props.milestoneId, {\r\n      title: toDoTitle,\r\n      done: false,\r\n    })\r\n      .then((res) => {\r\n        this.props.setReloadToDos(true);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: cannot add the new todo\");\r\n        console.log(error.response);\r\n        this.setState({\r\n          requestError: error.response.data,\r\n        });\r\n      });\r\n  };\r\n\r\n  submitHandler = (event) => {\r\n    event.preventDefault();\r\n    if (!this.hasErrors()) {\r\n      console.log(\"CREATING NEW TODO\");\r\n      let toDoTitle = this.state.inputs.toDo;\r\n      this.setState({ inputs: { ...this.state.inputs, toDo: \"\" } });\r\n      this.apiRequestHandler(toDoTitle);\r\n      event.target.reset();\r\n    } else {\r\n      console.log(\"There are errors in this form\");\r\n      console.log(this.state.errors);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.submitHandler}>\r\n        <span className=\"ToDoAdd\" onClick={null}>\r\n          <FontAwesomeIcon icon={faPlus} style={{ color: \"lightgray\" }} />\r\n        </span>{\" \"}\r\n        <Input\r\n          placeholder=\"Add new ToDo ...\"\r\n          styleClass=\"InputNewToDo\"\r\n          changeHandler={this.changeHandler}\r\n          error={this.state.errors.toDo}\r\n        />\r\n        <SubmitError\r\n          error={this.state.requestError !== \"\" && this.state.requestError}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddToDoForm;\r\n","import ApiUtils from \"./ApiUtils\";\r\nconst MILESTONE_URL = \"/milestones\";\r\nconst SINGLE_MILESTONE_URL = \"/milestone\";\r\n\r\nconst MilestoneApiUtils = {\r\n  /*MILESTONES*/\r\n  getMilestones: (projectId) => ApiUtils.get(MILESTONE_URL + `?projectId=${projectId}`),\r\n  getMilestoneById: (projectId, milestoneId) => ApiUtils.get(SINGLE_MILESTONE_URL + `?projectId=${projectId}&milestoneId=${milestoneId}`),\r\n  getNextMilestone: (projectId) => ApiUtils.get(MILESTONE_URL + `/next?projectId=${projectId}`),\r\n  createMilestone: (projectId, milestone) => ApiUtils.post(MILESTONE_URL + `/post?projectId=${projectId}`, milestone),\r\n  deleteMilestone: (milestoneId) => ApiUtils.delete(MILESTONE_URL + `/delete?milestoneId=${milestoneId}`)\r\n};\r\n\r\nexport default MilestoneApiUtils;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport ToDo from \"./ToDo\";\r\nimport \"./ToDos.css\";\r\nimport AddToDoForm from \"./AddToDoForm\";\r\nimport ToDoApiUtils from \"../../../utils/api/ToDoApiUtils\";\r\nimport MilestoneApiUtils from \"../../../utils/api/MilestoneApiUtils\";\r\n\r\nconst MyProjectToDos = ({ projectId }) => {\r\n  const [milestone, setMilestone] = useState({});\r\n  const [toDoList, setToDoList] = useState([]);\r\n  const [reloadToDos, setReloadToDos] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(\"GETTING NEXT MILESTONE\");\r\n    MilestoneApiUtils.getNextMilestone(projectId)\r\n      .then((res) => {\r\n        setMilestone(res);\r\n        console.log(\"GETTING TODOs\");\r\n        ToDoApiUtils.getMyToDos(res.id)\r\n          .then((res) => {\r\n            console.log(res);\r\n            setToDoList(res);\r\n          })\r\n          .catch((error) => {\r\n            console.log(\"ERROR: Cannot get myToDos\");\r\n            console.log(error);\r\n            setToDoList([]);\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: cannot get the next milestone\");\r\n        console.log(error);\r\n        setMilestone({});\r\n        setToDoList([]);\r\n      });\r\n  }, [projectId]);\r\n\r\n  useEffect(() => {\r\n    if (reloadToDos && milestone.id) {\r\n      console.log(\"GETTING TODOs\");\r\n      ToDoApiUtils.getMyToDos(milestone.id)\r\n        .then((res) => {\r\n          console.log(res);\r\n          setToDoList(res);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"ERROR: Cannot get myToDos\");\r\n          console.log(error);\r\n          setToDoList([]);\r\n        });\r\n\r\n      setReloadToDos(false);\r\n    }\r\n  }, [milestone, reloadToDos]);\r\n\r\n  return (\r\n    <div style={{ display: Object.keys(milestone).length === 0 ? \"none\" : \"\" }}>\r\n      <h3 className=\"SidebarSectionTitle\" style={{ display: \"inline-block\" }}>\r\n        ToDo\r\n      </h3>\r\n      <span className=\"MilestoneDate\"> for {milestone.dueFor} </span>\r\n      {toDoList.map((toDo) => {\r\n        return (\r\n          <ToDo\r\n            key={toDo.id}\r\n            id={toDo.id}\r\n            title={toDo.title}\r\n            tagList={toDo.tags}\r\n            done={toDo.done}\r\n          />\r\n        );\r\n      })}\r\n      <AddToDoForm milestoneId={milestone.id} setReloadToDos={setReloadToDos} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyProjectToDos;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport MessageApiUtils from \"../../../utils/api/MessageApiUtils\";\r\nimport Circle from \"./Circle\";\r\n\r\nconst Tag = ({ id, color, title, reloadCounters, setReloadCounters }) => {\r\n  const [noOpenedMessages, setNoOpenedMessages] = useState(0);\r\n  useEffect(() => {\r\n    MessageApiUtils.getNumberOfNoReadMessagesByTag(id)\r\n      .then((res) => {\r\n        setNoOpenedMessages(res);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERROR: cannot get the number of no opened messages\");\r\n      });\r\n    setReloadCounters(false);\r\n  }, [id, reloadCounters]);\r\n  return (\r\n    <>\r\n      <Circle color={color} /> <span>{title} </span>{\" \"}\r\n      <span style={{ float: \"right\" }}> {noOpenedMessages} </span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Tag;\r\n","import React from \"react\";\r\nimport InboxSidebarTab from \"../../sidebar/InboxSidebarTab\";\r\nimport Tag from \"./Tag\";\r\nimport \"./Tags.css\";\r\n\r\n\r\nconst ProjectTags = ({\r\n  tagList,\r\n  selectedTab,\r\n  setSelectedTab,\r\n  reloadCounters,\r\n  setReloadCounters,\r\n}) => {\r\n  return (\r\n    <>\r\n      <h3\r\n        style={{ display: tagList <= 0 ? \"none\" : \"inline-block\" }}\r\n        className=\"SidebarSectionTitle\"\r\n      >\r\n        Tags\r\n      </h3>\r\n      {tagList.map((tag) => {\r\n        return (\r\n          <InboxSidebarTab\r\n            key={tag.id}\r\n            text={tag.id}\r\n            selectedTab={selectedTab}\r\n            setSelectedTab={setSelectedTab}\r\n            isTag={true}\r\n          >\r\n            <Tag\r\n              key={tag.id}\r\n              id={tag.id}\r\n              title={tag.title}\r\n              color={tag.color}\r\n              reloadCounters={reloadCounters}\r\n              setReloadCounters={setReloadCounters}\r\n            />\r\n          </InboxSidebarTab>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProjectTags;\r\n","import React, { useState } from \"react\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport Inboxes from \"../inboxes/Inboxes\";\r\nimport ProjectPicker from \"../projects/ProjectPicker\";\r\nimport MyProjectToDos from \"../projects/toDos/MyProjectToDos\";\r\nimport ProjectTags from \"../projects/tags/ProjectTags\";\r\nimport GradientButton from \"../buttons/GradientButton\";\r\n\r\nconst InboxSidebar = ({\r\n  numberOfInboxMessages,\r\n  numberOfSentMessages,\r\n  reloadCounters,\r\n  setReloadCounters,\r\n  selectedTab,\r\n  setSelectedTab,\r\n  setModalNewMessage,\r\n  modalNewMessage,\r\n  pickedProject,\r\n  setPickedProject,\r\n}) => {\r\n  const ChangeModalNewMessage = () => {\r\n    setModalNewMessage(!modalNewMessage);\r\n  };\r\n\r\n  return (\r\n    <Sidebar>\r\n      <GradientButton onClick={ChangeModalNewMessage} className=\"MainButton\">\r\n        New message\r\n      </GradientButton>\r\n\r\n      <hr className=\"Separator\" />\r\n\r\n      <Inboxes\r\n        numberOfInboxMessages={numberOfInboxMessages}\r\n        numberOfSentMessages={numberOfSentMessages}\r\n        selectedTab={selectedTab}\r\n        setSelectedTab={setSelectedTab}\r\n      />\r\n      <ProjectPicker\r\n        pickedProject={pickedProject}\r\n        setPickedProject={setPickedProject}\r\n      />\r\n      {pickedProject.name !== \"Any\" && (\r\n        <ProjectTags\r\n          tagList={pickedProject.tags}\r\n          selectedTab={selectedTab}\r\n          setSelectedTab={setSelectedTab}\r\n          reloadCounters={reloadCounters}\r\n          setReloadCounters={setReloadCounters}\r\n        />\r\n      )}\r\n      {pickedProject.name !== \"Any\" && (\r\n        <MyProjectToDos projectId={pickedProject.id} />\r\n      )}\r\n    </Sidebar>\r\n  );\r\n};\r\n\r\nexport default InboxSidebar;\r\n","import \"./Section.css\"\r\n\r\nconst Section = (props) =>\r\n{\r\n\r\n    return (\r\n        <div className={`Section ${props.className}`}>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Section","import React, { useState, useEffect } from \"react\";\r\nimport MessageList from \"../components/messages/MessageList\";\r\nimport NewMessage from \"../components/messages/NewMessage/NewMessage\";\r\nimport InboxSidebar from \"../components/sidebar/InboxSidebar\";\r\nimport MessageApiUtils from \"../utils/api/MessageApiUtils\";\r\nimport Section from \"./Section\";\r\n\r\nconst Inbox = ({ search, setSearch }) => {\r\n  const [selectedTab, setSelectedTab] = useState(\"Inbox\");\r\n  const [selectedMessages, setSelectedMessages] = useState([]);\r\n  const [nInboxMessages, setNInboxMessages] = useState([]);\r\n  const [pickedProject, setPickedProject] = useState({\r\n    name: \"Any\",\r\n    id: 9999,\r\n    tags: [],\r\n  });\r\n  const [reloadCounters, setReloadCounters] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (reloadCounters)\r\n      MessageApiUtils.getNumberOfNotReadMessages()\r\n        .then((res) => {\r\n          setNInboxMessages(res);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"ERROR: cannot get number of inbox messages\");\r\n        });\r\n    setReloadCounters(false);\r\n  }, [reloadCounters]);\r\n\r\n  useEffect(() => {\r\n    if (search !== \"\") {\r\n      console.log(\"Searching messages by keywords: \" + search);\r\n      setSelectedTab(\"Search\");\r\n      MessageApiUtils.getMyMessagesBySearch(search)\r\n        .then((res) => {\r\n          console.log(\"Getting searched Messages\");\r\n          setSelectedMessages(res);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"ERROR: cannot get the searched messages\");\r\n        });\r\n      setSearch(\"\");\r\n    } else {\r\n      switch (selectedTab) {\r\n        case \"Inbox\":\r\n          MessageApiUtils.getMyInboxMessages()\r\n            .then((res) => {\r\n              console.log(\"Getting inbox Messages\");\r\n              setSelectedMessages(res);\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"ERROR: cannot get inbox messages\");\r\n            });\r\n          break;\r\n        case \"Sent\":\r\n          MessageApiUtils.getMySentMessages()\r\n            .then((res) => {\r\n              console.log(\"Getting sent Messages\");\r\n              setSelectedMessages(res);\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"ERROR: cannot get sent messages\");\r\n            });\r\n          break;\r\n        default:\r\n          MessageApiUtils.getMyMessagesByTag(selectedTab)\r\n            .then((res) => {\r\n              console.log(\"Getting Tag Messages\");\r\n              setSelectedMessages(res);\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"ERROR: cannot get tag messages\");\r\n            });\r\n      }\r\n    }\r\n  }, [selectedTab, search, reloadCounters]);\r\n\r\n  const [modalNewMessage, setModalNewMessage] = useState(false);\r\n\r\n  return (\r\n    <div className=\"Content\">\r\n      <InboxSidebar\r\n        numberOfInboxMessages={nInboxMessages}\r\n        numberOfSentMessages={\"\"}\r\n        reloadCounters={reloadCounters}\r\n        setReloadCounters={setReloadCounters}\r\n        selectedTab={selectedTab}\r\n        setSelectedTab={setSelectedTab}\r\n        modalNewMessage={modalNewMessage}\r\n        setModalNewMessage={setModalNewMessage}\r\n        pickedProject={pickedProject}\r\n        setPickedProject={setPickedProject}\r\n      />\r\n      <Section className=\"Section--Lighter\">\r\n        {modalNewMessage && (\r\n          <NewMessage\r\n            ChangeModalNewMessage={() => setModalNewMessage(!modalNewMessage)}\r\n          />\r\n        )}\r\n        <MessageList\r\n          setReloadCounters={setReloadCounters}\r\n          messages={selectedMessages}\r\n        />\r\n      </Section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Inbox;\r\n","import { useLocation, withRouter } from \"react-router-dom\";\r\nimport \"./SidebarTab.css\";\r\n\r\nconst SidebarTab = ({text, path, history, to}) =>\r\n{\r\n    const location = useLocation();\r\n    \r\n    let className = \"SidebarTab\";\r\n    if (location.pathname === path)\r\n    {\r\n        className += \" SidebarTab--Selected\";\r\n    }\r\n\r\n    return <div className={className} onClick={() => history.push(path)}>{text}</div>\r\n}\r\n\r\nexport default withRouter(SidebarTab);","import React, { useContext } from \"react\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport LinkButton from \"../buttons/LinkButton\";\r\nimport SidebarTab from \"./SidebarTab\";\r\nimport \"./SettingsSidebar.css\";\r\nimport UserCredentials from \"../../context/UserCredentials\";\r\n\r\nconst SettingsSidebar = () =>\r\n{\r\n\r\n  const credentials = useContext(UserCredentials);\r\n\r\n  if (credentials.isTeamManager === undefined)\r\n  {\r\n    return <Sidebar></Sidebar>\r\n  }\r\n\r\n  return (\r\n    <Sidebar>\r\n      {credentials.isTeamManager ? (<>\r\n        <LinkButton gradient className=\"MainButton\" path=\"/settings/users\">Add a new user</LinkButton>\r\n        <hr className=\"Separator\" />\r\n      </>) : \"\"}\r\n      <h3 className=\"SettingSidebarTitle\">Team Settings</h3>\r\n      {credentials.isTeamManager ? <SidebarTab text=\"Team\" path=\"/settings/team\" /> : \"\"}\r\n      <SidebarTab text=\"Departments\" path=\"/settings/departments\" />\r\n      <SidebarTab text=\"Projects\" path=\"/settings/projects\" />\r\n      <SidebarTab text=\"Users\" path=\"/settings/users\" />\r\n    </Sidebar>\r\n  );\r\n};\r\n\r\nexport default SettingsSidebar;\r\n","import \"../../FontStyles.css\";\r\nimport \"./Profile.css\";\r\nimport ProfilePic from \"./ProfilePic\";\r\n\r\n\r\nconst ProfileHeader = ({src, role, name, slim, children}) =>\r\n{\r\n\r\n    if (slim)\r\n    {\r\n        return (\r\n            <div className=\"ProfileHeader ProfileHeader--Slim\">\r\n                {children}\r\n                <ProfilePic src={src} className=\"ProfilePic--Slim\" />\r\n                <div className=\"ProfileTitleContainer\">\r\n                    <h3 className=\"TinyTitle\">{role}</h3>\r\n                    <h1 className=\"BigTitle BigTitle--Slim\">{name}</h1>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else\r\n    {\r\n        return (\r\n            <div className=\"ProfileHeader\">\r\n                <ProfilePic src={src} />\r\n                <div className=\"ProfileTitleContainer\">\r\n                    <h3 className=\"TinyTitle\">{role}</h3>\r\n                    <h1 className=\"BigTitle\">{name}</h1>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nexport default ProfileHeader;\r\n","import ApiUtils from \"./ApiUtils\";\r\nconst TEAM_SETTINGS_URL = \"/team\";\r\n\r\nconst TeamSettingsApiUtils = {\r\n  getTeamName: () => ApiUtils.get(TEAM_SETTINGS_URL),\r\n  updateTeam: (updateObject) => ApiUtils.post(TEAM_SETTINGS_URL + \"/update\", updateObject),\r\n  deleteTeam: () => ApiUtils.delete(TEAM_SETTINGS_URL + \"/delete\")\r\n};\r\n\r\nexport default TeamSettingsApiUtils;\r\n","import React, { useState } from \"react\";\r\nimport \"../../FontStyles.css\";\r\nimport \"./EditableField.css\";\r\nimport \"../forms/Forms.css\";\r\nimport GradientButton from \"../buttons/GradientButton\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst EditableField = ({value, inputType, smaller, editable, postFunction, fieldName, onUpdated}) => {\r\n  function onOkClicked() {\r\n    if (!postFunction || !fieldName || actualVal === currentVal)\r\n    {\r\n      setEditing(false);\r\n      return;\r\n    }\r\n    if (!currentVal)\r\n    {\r\n      setCurrentVal(actualVal);\r\n      setEditing(false);\r\n      return;\r\n    }\r\n    var postObj = {};\r\n    postObj[fieldName] = currentVal;\r\n    postFunction(postObj)\r\n    .catch(() =>\r\n    {\r\n      setErrored(true);\r\n      setActualVal(actualVal); // set the old values back\r\n      setCurrentVal(actualVal);\r\n      if (onUpdated)\r\n        onUpdated(fieldName, actualVal);\r\n      setTimeout(() => setErrored(false), 5000);\r\n    });\r\n    // Set values inmediately after update, dont wait for promise\r\n    setActualVal(actualVal);\r\n    setEditing(false);\r\n    if (onUpdated)\r\n      onUpdated(fieldName, currentVal);\r\n  }\r\n\r\n  function enterEditingMode()\r\n  {\r\n    if (editable !== false) // editable = true when prop is undefined\r\n    {\r\n      setEditing(true)\r\n    } else\r\n    {\r\n      setCopied(true);\r\n      navigator.clipboard.writeText(currentVal);\r\n      setTimeout(() => setCopied(false), 1000);\r\n    }\r\n  }\r\n\r\n  const [editing, setEditing] = useState(false);\r\n  const [actualVal, setActualVal] = useState(value);\r\n  const [currentVal, setCurrentVal] = useState(value);\r\n  const [loading, setLoading] = useState(!Boolean(value));\r\n  const [copied, setCopied] = useState(false);\r\n  const [errored, setErrored] = useState(null);\r\n\r\n  let textInput;\r\n  useEffect(() =>\r\n  {\r\n    if (editing)\r\n      textInput.focus();\r\n  }, [editing, textInput]);\r\n\r\n  useEffect(() =>\r\n  {\r\n    if (value)\r\n    {\r\n      setCurrentVal(value);\r\n      setActualVal(value);\r\n      setLoading(false);\r\n    }\r\n  }, [value]);\r\n\r\n  \r\n\r\n  if (editing) {\r\n    return (\r\n      <div className={`EditableField EditableField--Editing ${smaller ? \"EditableField--Smaller\" : \"\"}`}>\r\n        <input\r\n          className=\"Input EditingInput EditingInput--MinusButton\"\r\n          type={inputType ?? \"text\"}\r\n          defaultValue={currentVal}\r\n          onChange={(e) => setCurrentVal(e.target.value)}\r\n          onKeyDown={(e) => { if (e.key === \"Enter\") onOkClicked() }}\r\n          ref={(input) => textInput = input}\r\n        />\r\n        <GradientButton\r\n          className=\"EditingOkButton\"\r\n          onClick={() => onOkClicked()}\r\n        >\r\n          OK\r\n        </GradientButton>\r\n      </div>\r\n    );\r\n  } else {\r\n    let penIcon;\r\n    if (editable !== false)\r\n    {\r\n      penIcon = <i className=\"fas fa-pen PenIcon\"></i>;\r\n    }\r\n    return (\r\n      <div className={`EditableField ${smaller ? \"EditableField--Smaller\" : \"\"}`} onClick={() => enterEditingMode()}>\r\n        <h3 className={`BoldTitle ${smaller ? \"BoldTitle--Smaller\" : \"\"} ${loading ? \"LoadingPlaceholder\" : \"\"}`}>{currentVal}</h3>\r\n        {penIcon}\r\n        {copied ? <span className=\"CopiedSpan\">Copied</span> : \"\"}\r\n        {errored ? <span className=\"CopiedSpan CopiedSpan--Error\">Something went wrong updating the value. Try again?</span> : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default EditableField;\r\n","import \"../../FontStyles.css\";\r\nimport \"../../sections/Settings.css\";\r\n\r\nconst SettingGroup = (props) =>\r\n{\r\n    let title;\r\n    if (props.danger)\r\n    {\r\n        title = <h3 className=\"SmallTitle\"><span className=\"DangerTitle\">DANGER ZONE</span>  {props.name}</h3>\r\n    }\r\n    else\r\n    {\r\n        title = <h3 className=\"SmallTitle\">{props.name}</h3>\r\n    }\r\n\r\n    let descriptionP;\r\n    if (props.description)\r\n    {\r\n        descriptionP = <p className=\"SettingGroup__P\" dangerouslySetInnerHTML={{__html: props.description}}></p>\r\n    }\r\n    return (\r\n        <div className=\"EditableSettingGroup\">\r\n            {title}\r\n            {descriptionP}\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SettingGroup;","import { useEffect, useState } from 'react';\r\nimport TeamSettingsApiUtils from '../../../utils/api/TeamSettingsApiUtils';\r\nimport Button from '../../buttons/Button';\r\nimport EditableField from '../EditableField';\r\nimport SettingGroup from '../SettingGroup';\r\n\r\nconst TeamSettings = () =>\r\n{\r\n\r\n    function onDeleteClicked()\r\n    {\r\n        if (window.confirm(\"Are you sure to delete this team and associated data? This action cannot be undone and you will be signed out.\"))\r\n        {\r\n            TeamSettingsApiUtils.deleteTeam().then(() => window.location.replace('/'));\r\n            \r\n        }\r\n    }\r\n\r\n    const [teamName, setTeamName] = useState(\"\");\r\n    useEffect(() => \r\n    {\r\n        TeamSettingsApiUtils.getTeamName().then(name => setTeamName(name));\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"SettingGroupsContainer\">\r\n            <SettingGroup name=\"Team name\" description=\"Shown in messages sent by team members.\">\r\n                <EditableField value={teamName} postFunction={TeamSettingsApiUtils.updateTeam} fieldName=\"name\" />\r\n            </SettingGroup>\r\n            <SettingGroup danger name=\"Delete team\" description=\"Deletes the team, as well as its associated members, departments, projects and tasks. <br>This action cannot be undone.\">\r\n                <Button className=\"Button--red\" onClick={onDeleteClicked}>Delete team</Button>\r\n            </SettingGroup>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TeamSettings;","import React from \"react\";\r\nimport AuthApiUtils from \"../../utils/api/AuthApiUtils\";\r\nimport Input from \"./Input\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport \"./AddUserForm.css\";\r\nimport UserApiUtils from \"../../utils/api/UserApiUtils\";\r\n\r\nclass AddUserForm extends React.Component\r\n{\r\n  constructor(props)\r\n  {\r\n    super(props);\r\n    this.state = {\r\n      inputs: {\r\n        name: \"\",\r\n        lastname: \"\",\r\n        password: \"\",\r\n      },\r\n      errors: {},\r\n      requestError: \"\",\r\n      isSubmitting: false\r\n    };\r\n\r\n    this.onUserRegistered = props.onUserRegistered;\r\n  }\r\n\r\n  hasErrors = () =>\r\n  {\r\n    const errors = Object.values(this.state.errors);\r\n    const nInputs = Object.keys(this.state.inputs).length;\r\n    let b =\r\n      errors.length < nInputs\r\n        ? true\r\n        : errors.some((e) =>\r\n        {\r\n          return e !== \"\";\r\n        });\r\n    return b;\r\n  };\r\n\r\n  validateAll = () =>\r\n  {\r\n    Object.entries(this.state.inputs).forEach((e) =>\r\n    {\r\n      const [k, v] = e;\r\n      this.validate(k, v);\r\n    });\r\n  };\r\n\r\n  validate = (field, value) =>\r\n  {\r\n    this.setState({\r\n      requestError: \"\",\r\n    });\r\n    let errorMsg = \"\";\r\n    switch (field)\r\n    {\r\n      case \"name\":\r\n        if (value === \"\")\r\n        {\r\n          errorMsg = \"First name required\";\r\n        } else if (!/^[a-zA-Z-\\u00f1\\u00d1 ]+$/.test(value))\r\n        {\r\n          errorMsg = \"Invalid, use letters and numbers\";\r\n        }\r\n        break;\r\n      case \"lastname\":\r\n        if (value === \"\")\r\n        {\r\n          errorMsg = \"Last name required\";\r\n        } else if (!/^[a-zA-Z-\\u00f1\\u00d1 ]+$/.test(value))\r\n        {\r\n          errorMsg = \"Invalid, use letters and numbers\";\r\n        }\r\n        break;\r\n      case \"password\":\r\n        if (value === \"\")\r\n        {\r\n          errorMsg = \"Password required\";\r\n        } else if (value.length < 8)\r\n        {\r\n          errorMsg = \"Passwords at least 8 characters\";\r\n        }\r\n        break;\r\n      default:\r\n    }\r\n    this.setState({\r\n      errors: { ...this.state.errors, [field]: errorMsg },\r\n    });\r\n  };\r\n\r\n  changeHandler = (field, value) =>\r\n  {\r\n    this.validate(field, value);\r\n    this.setState({ inputs: { ...this.state.inputs, [field]: value } });\r\n  };\r\n\r\n  apiRequestHandler = (name, lastname, password) =>\r\n  {\r\n    this.setState({ isSubmitting: true });\r\n    UserApiUtils.registerUser({\r\n      name,\r\n      lastname,\r\n      password,\r\n    })\r\n      .then(() => \r\n      {\r\n        this.setState({\r\n          inputs: {},\r\n          errors: {},\r\n          requestError: \"\",\r\n          isSubmitting: false\r\n        });\r\n        this.onUserRegistered()\r\n      })\r\n      .catch(err =>\r\n      {\r\n        console.log(\"API ERROR!\");\r\n        err = err.response.data;\r\n        let error = \"Something went wrong.\"\r\n        if (err === \"alreadyexists\")\r\n          error = \"An user with that name already exists.\"\r\n        else if (err === \"errors\")\r\n          error = \"Check your inputs and try again.\"\r\n        this.setState({\r\n          requestError: error,\r\n          isSubmitting: false\r\n        });\r\n      });\r\n  };\r\n\r\n  submitHandler = (event) =>\r\n  {\r\n    event.preventDefault();\r\n    this.validateAll();\r\n    if (!this.hasErrors())\r\n    {\r\n      let name = this.state.inputs.name;\r\n      let lastname = this.state.inputs.lastname;\r\n      let password = this.state.inputs.password;\r\n      //Call API request in order to receive the user for the session\r\n      this.apiRequestHandler(\r\n        name,\r\n        lastname,\r\n        password\r\n      );\r\n    } else\r\n    {\r\n      console.log(\"There are errors in this form\");\r\n      console.log(this.state.errors);\r\n    }\r\n  };\r\n\r\n  render()\r\n  {\r\n    return (\r\n      <form onSubmit={this.submitHandler} autoComplete=\"off\">\r\n        <p className=\"InputTitle\">First Name</p>\r\n        <div className=\"EditableField EditableField--OnlyInput\">\r\n          <Input\r\n            name=\"name\"\r\n            styleClass=\"Input EditingInput\"\r\n            placeholder=\"Johnny\"\r\n            error={this.state.errors.name}\r\n            changeHandler={this.changeHandler}\r\n            value={this.state.inputs.name??''} />\r\n        </div>\r\n        <p className=\"InputTitle\">Last Name</p>\r\n        <div className=\"EditableField EditableField--OnlyInput\">\r\n          <Input\r\n            name=\"lastname\"\r\n            styleClass=\"Input EditingInput\"\r\n            placeholder=\"Depp\"\r\n            error={this.state.errors.lastname}\r\n            changeHandler={this.changeHandler}\r\n            value={this.state.inputs.lastname??''} />\r\n        </div>\r\n        <p className=\"InputTitle\">Password</p>\r\n        <div className=\"EditableField EditableField--OnlyInput\">\r\n          <Input\r\n            name=\"password\"\r\n            type=\"password\"\r\n            styleClass=\"Input EditingInput\"\r\n            placeholder=\"More than 8 characters\"\r\n            error={this.state.errors.password}\r\n            changeHandler={this.changeHandler}\r\n            value={this.state.inputs.password??''} />\r\n        </div>\r\n        <SubmitButton\r\n          reducedsize\r\n          text=\"Add user\"\r\n          requestError={this.state.requestError}\r\n          hasErrors={this.hasErrors()}\r\n          loading={this.state.isSubmitting}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddUserForm;\r\n","import { Link } from \"react-router-dom\";\r\nimport \"../../../FontStyles.css\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport \"../UserList.css\";\r\n\r\nconst UserList = ({members}) => {\r\n\r\n  if (!members)\r\n  {\r\n    return <Spinner />\r\n  }\r\n\r\n  let elements;\r\n  if (members && members.length > 0)\r\n  {\r\n    elements = members.map(member =>\r\n    {\r\n      const completename = member.name + \" \" + member.lastname;\r\n      const username = completename.toLowerCase().replace(/ /g, \"\");\r\n      return (\r\n        <tr key={member.id}>\r\n          <td><Link to={`/settings/users/${member.id}/${username}`}>{member.lastname}, {member.name}</Link></td>\r\n          <td>{member.email}</td>\r\n          <td>{member.role === \"team_owner\" ? \"Team manager\" : \"Member\"}</td>\r\n          <td>{member.joinDate}</td>\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <table className=\"UserList\">\r\n      <thead className=\"UserList__thead\">\r\n        <tr>\r\n          <th>Name</th>\r\n          <th>E-mail address</th>\r\n          <th>Role</th>\r\n          <th>Member since</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {elements}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default UserList;\r\n","import SettingGroup from \"../SettingGroup\";\r\nimport AddUserForm from \"../../forms/AddUserForm\";\r\nimport { useEffect, useState } from \"react\";\r\nimport UserList from \"./UserList\";\r\nimport UserApiUtils from \"../../../utils/api/UserApiUtils\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport { useContext } from \"react\";\r\n//import UserList from \"./UserList\";\r\n\r\nconst UserSettings = () =>\r\n{\r\n  const credentials = useContext(UserCredentials);\r\n  const [members, setMembers] = useState(null);\r\n  console.log(credentials);\r\n\r\n  function fetchMembers()\r\n  {\r\n    UserApiUtils.getUsers()\r\n      .then(users => setMembers(users.sort((x,y) => (x.lastname+x.name).localeCompare(y.lastname+y.name))))\r\n      .catch(err => console.error(err));\r\n  }\r\n  useEffect(() => fetchMembers(), []);\r\n\r\n  return (\r\n    <div className=\"SettingGroupsContainer\">\r\n      {credentials.isTeamManager ? (\r\n        <SettingGroup\r\n          name=\"Add a new user\"\r\n          description=\"Fill out the form fields below.\">\r\n          <AddUserForm onUserRegistered={fetchMembers} />\r\n        </SettingGroup>\r\n      ) : \"\"}\r\n      <SettingGroup\r\n        name=\"Users\"\r\n        description=\"Registered team users are shown below.\">\r\n        <UserList members={members} />\r\n      </SettingGroup>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserSettings;\r\n","import { useEffect, useState } from \"react\";\r\nimport Autosuggest from \"react-autosuggest\";\r\nimport DepartmentApiUtils from \"../../utils/api/DepartmentApiUtils\";\r\nimport ProjectApiUtils from \"../../utils/api/ProjectApiUtils\";\r\nimport UserApiUtils from \"../../utils/api/UserApiUtils\";\r\nimport \"./InputAutocomplete.css\";\r\n\r\nconst InputAutocompleteUser = ({ name, placeholder, departmentId, projectId, onUserSelected, val, onChangeHandler }) =>\r\n{\r\n    function getUserAutocompleteSuggestions(value)\r\n    {\r\n        const inputValue = value.trim().toLowerCase();\r\n        const inputLength = inputValue.length;\r\n        return inputLength === 0 ? [] : users.filter(usr =>\r\n            (usr.name + \" \" + usr.lastname).toLowerCase().slice(0, inputLength) === inputValue\r\n        );\r\n    }\r\n\r\n    function getSuggestionValue(suggestion)\r\n    {\r\n        return suggestion.name + \" \" + suggestion.lastname;\r\n    }\r\n\r\n    function renderSuggestion(suggestion)\r\n    {\r\n        return <div>{suggestion.name} {suggestion.lastname}</div>\r\n    }\r\n\r\n    function onChange(event, { newValue })\r\n    {\r\n        onChangeHandler(name, newValue);\r\n        if (selectedUserId !== -1)\r\n        {\r\n            setSelectedUserId(-1);\r\n            if (onUserSelected)\r\n                onUserSelected(name, newValue, -1);\r\n        }\r\n    }\r\n\r\n    function onSuggestionFetchRequested({ value })\r\n    {\r\n        setSuggestions(getUserAutocompleteSuggestions(value));\r\n    }\r\n\r\n    function onSuggestionClearRequested()\r\n    {\r\n        setSuggestions([]);\r\n    }\r\n\r\n    function onSuggestionSelected(event, {suggestion})\r\n    {\r\n        if (onUserSelected)\r\n            onUserSelected(name, getSuggestionValue(suggestion), suggestion.id);\r\n        setSelectedUserId(suggestion.id);\r\n    }\r\n\r\n    function onBlur()\r\n    {\r\n        if (selectedUserId === -1)\r\n            onChangeHandler(name, \"\");\r\n    }\r\n\r\n    function sortUsers(a,b) {\r\n        if (a.name > b.name) {\r\n            return 1;\r\n        } else if (a.name < b.name) { \r\n            return -1;\r\n        }\r\n    \r\n        // Else go to the 2nd item\r\n        if (a.lastname < b.lastname) { \r\n            return -1;\r\n        } else if (a.lastname > b.lastname) {\r\n            return 1\r\n        } else { // nothing to split them\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    const [users, setUsers] = useState(null);\r\n    const [selectedUserId, setSelectedUserId] = useState(-1);\r\n    const [suggestions, setSuggestions] = useState([]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if (projectId)\r\n        {\r\n            ProjectApiUtils.getMembersFromProject(projectId)\r\n            .then(res => {\r\n                const arr = res.map(x => {\r\n                    x.id = x.userId;\r\n                    return x;\r\n                }).sort(sortUsers);\r\n                setUsers(arr);\r\n            })\r\n            .catch(err => console.error(err));\r\n        } else if (departmentId)\r\n        {\r\n            DepartmentApiUtils.getMembersFromDepartment(departmentId)\r\n            .then(res => {\r\n                const arr = res.map(x => {\r\n                    x.id = x.userId;\r\n                    return x;\r\n                }).sort(sortUsers);\r\n                setUsers(arr);\r\n            })\r\n            .catch(err => console.error(err));\r\n        } else\r\n        {\r\n            UserApiUtils.getUsers()\r\n            .then(res => setUsers(res))\r\n            .catch(err => console.error(err));\r\n        }\r\n    }, []);\r\n\r\n    let resultError = false;\r\n    if (users && users.length === 0)\r\n    {\r\n        if (projectId)\r\n        {\r\n            resultError = \"No users in this project.\";\r\n        } else if (departmentId)\r\n        {\r\n            resultError = \"No users in this department.\";\r\n        } else\r\n        {\r\n            resultError = \"No users found.\";\r\n        }\r\n    }\r\n\r\n    let placehold;\r\n    if (resultError)\r\n        placehold = resultError;\r\n    else if (users)\r\n        placehold = placeholder;\r\n    else\r\n        placehold = \"Loading users...\";\r\n\r\n    const inputProps = {\r\n        name,\r\n        placeholder: placehold,\r\n        value: val,\r\n        onChange,\r\n        onBlur,\r\n        disabled: Boolean(resultError) || !users,\r\n        className: \"Input EditingInput\",\r\n    };\r\n\r\n    const theme =\r\n    {\r\n        container: 'SuggestionsContainer',\r\n        suggestionsList: 'SuggestionsList',\r\n        suggestion: 'Suggestion',\r\n        suggestionHighlighted: 'Suggestion--Highlighted',\r\n        suggestionsContainer: 'SuggestionsListBox'\r\n    }\r\n\r\n    return (\r\n        <div className=\"EditableField EditableField--OnlyInput\">\r\n            <Autosuggest\r\n                suggestions={suggestions}\r\n                onSuggestionsFetchRequested={onSuggestionFetchRequested}\r\n                onSuggestionsClearRequested={onSuggestionClearRequested}\r\n                onSuggestionSelected={onSuggestionSelected}\r\n                getSuggestionValue={getSuggestionValue}\r\n                renderSuggestion={renderSuggestion}\r\n                theme={theme}\r\n                inputProps={inputProps} />\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default InputAutocompleteUser;","import React from \"react\";\r\nimport Input from \"./Input\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport \"./AddUserForm.css\";\r\nimport InputAutocompleteUser from \"./InputAutocompleteUser\";\r\n\r\nclass AddForm extends React.Component\r\n{\r\n  constructor(props)\r\n  {\r\n    super(props);\r\n    this.state = {\r\n      inputs: {},\r\n      errors: {},\r\n      requestError: \"\",\r\n      children: [],\r\n      isSubmitting: false,\r\n      autocompleteVal: null\r\n    };\r\n    this.submitText = props.submitText ?? \"Add element\";\r\n    this.postFunction = props.postFunction;\r\n    this.children = props.children;\r\n    this.alreadyExistsErrorText = props.alreadyExistsErrorText ?? \"An element with the same name already exists.\";\r\n    this.tooManyErrorText = props.tooManyErrorText ?? \"The maximum number of elements has been reached.\"\r\n    this.disabled = props.disabled;\r\n    this.onAutocompleteSelected = props.onAutocompleteSelected;\r\n    this.validateExcludeFields = props.validateExcludeFields ?? [];\r\n  }\r\n\r\n  hasErrors = () =>\r\n  {\r\n    if (Object.values(this.state.inputs).some(x => !x)) // If at least one empty we can't submit the form. for now all fields will be mandatory\r\n      return true;\r\n    const errors = Object.values(this.state.errors);\r\n    return errors.some((e) =>\r\n    {\r\n      return e !== \"\";\r\n    });\r\n  };\r\n\r\n  validateAll = () =>\r\n  {\r\n    Object.entries(this.state.inputs).forEach((e) =>\r\n    {\r\n      const [k, v] = e;\r\n      this.validate(k, v);\r\n    });\r\n  };\r\n\r\n  validate = (field, value) =>\r\n  {\r\n    this.setState({\r\n      requestError: \"\",\r\n    });\r\n    if (this.validateExcludeFields.indexOf(field) >= 0)\r\n      return;\r\n    let errorMsg = \"\";\r\n    // same validation for all fields\r\n    if (value === \"\")\r\n    {\r\n      errorMsg = \"You can't leave this field empty\";\r\n    } else if (!/^[a-zA-Z-\\u00f1\\u00d1 0-9]+$/.test(value))\r\n    {\r\n      errorMsg = \"Invalid, use letters and numbers\";\r\n    }\r\n    this.setState({\r\n      errors: { ...this.state.errors, [field]: errorMsg },\r\n    });\r\n  };\r\n\r\n  changeHandler = (field, value) =>\r\n  {\r\n    this.validate(field, value);\r\n    this.setState({ inputs: { ...this.state.inputs, [field]: value } });\r\n  };\r\n\r\n  apiRequestHandler = (postObject) =>\r\n  {\r\n    if (!this.postFunction)\r\n    {\r\n      this.setState({\r\n        inputs: {},\r\n        errors: {},\r\n        requestError: \"\",\r\n      });\r\n      return;\r\n    }\r\n    this.setState({ isSubmitting: true });\r\n    this.postFunction(postObject)\r\n      .then(() =>\r\n      {\r\n        this.setState({\r\n          inputs: {},\r\n          errors: {},\r\n          requestError: \"\",\r\n          isSubmitting: false\r\n        });\r\n      })\r\n      .catch((error) =>\r\n      {\r\n        console.error(error);\r\n        let requestError;\r\n        if (error.response.data === \"alreadyexists\" || error.response.data === \"toomany\")\r\n        {\r\n          requestError = error.response.data === \"toomany\" ? this.tooManyErrorText : this.alreadyExistsErrorText;\r\n        } else\r\n        {\r\n          requestError = \"Something went wrong\";\r\n        }\r\n        this.setState({\r\n          requestError: requestError,\r\n          isSubmitting: false\r\n        });\r\n      });\r\n  };\r\n\r\n  submitHandler = (event) =>\r\n  {\r\n    event.preventDefault();\r\n    this.validateAll();\r\n    if (!this.hasErrors())\r\n    {\r\n      let postObject = this.state.inputs;\r\n      //Call API request\r\n      this.apiRequestHandler(postObject);\r\n    } else\r\n    {\r\n      console.log(\"There are errors in this form\");\r\n      console.log(this.state.errors);\r\n    }\r\n  };\r\n\r\n  onAutocomplete = (field, textValue, value) =>\r\n  {\r\n    this.setState({autocompleteVal: value, inputs: { ...this.state.inputs, [field]: textValue }})\r\n    if (this.onAutocompleteSelected)\r\n      this.onAutocompleteSelected(field, value);\r\n  };\r\n\r\n  processChildren()\r\n  {\r\n    let inputs = {}\r\n    const inputChildren = React.Children.map(this.children, child =>\r\n      {\r\n        if (React.isValidElement(child))\r\n        {\r\n          if (child.type === Input)\r\n          {\r\n            let name = child.props.name;\r\n            let placeholder = child.props.placeholder;\r\n            let type = child.props.type;\r\n            inputs[name] = this.state.inputs[name] ?? '';\r\n            return (\r\n              <div className=\"EditableField EditableField--OnlyInput\">\r\n                <Input\r\n                  name={name}\r\n                  type={type}\r\n                  styleClass=\"Input EditingInput\"\r\n                  placeholder={placeholder}\r\n                  value={this.state.inputs[name]??''}\r\n                  error={this.state.errors[name]??''}\r\n                  changeHandler={this.changeHandler} />\r\n              </div>\r\n            );\r\n          } else if (child.type === InputAutocompleteUser)\r\n          {\r\n            let name = child.props.name;\r\n            inputs[name] = this.state.inputs[name] ?? '';\r\n            if (!this.state.autocompleteVal)\r\n              this.setState({autocompleteVal: -1}); // there's an autocompleted child so we set the state accordingly\r\n            return React.cloneElement(child, \r\n              {\r\n                onUserSelected: this.onAutocomplete,\r\n                onChangeHandler: this.changeHandler,\r\n                val: this.state.inputs[name]??''\r\n              });\r\n          }\r\n        }\r\n        return child;\r\n      });\r\n    this.setState({ inputs: inputs });\r\n    this.setState({children: inputChildren});\r\n  }\r\n\r\n  componentDidMount()\r\n  {\r\n    this.processChildren();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState)\r\n  {\r\n    if (JSON.stringify(this.state.inputs) !== JSON.stringify(prevState.inputs))\r\n      this.processChildren();\r\n  }\r\n\r\n  render()\r\n  {\r\n    return (\r\n      <form onSubmit={this.submitHandler}>\r\n        {this.state.children}\r\n        <SubmitButton\r\n          reducedsize\r\n          text={this.submitText}\r\n          requestError={this.state.requestError}\r\n          hasErrors={this.disabled || this.hasErrors() || (this.state.autocompleteVal && this.state.autocompleteVal === -1)}\r\n          loading={this.state.isSubmitting}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddForm;\r\n","import React from \"react\";\r\nimport Input from \"./Input\";\r\nimport \"./AddUserForm.css\";\r\nimport AddForm from \"./AddForm\";\r\nimport DepartmentApiUtils from \"../../utils/api/DepartmentApiUtils\";\r\n\r\nconst AddDepartmentForm = ({onDepartmentAdded}) =>\r\n{\r\n\r\n  function addDepartment(department)\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      DepartmentApiUtils.postDepartment(department)\r\n      .then(() => \r\n      {\r\n        resolve();\r\n        if (onDepartmentAdded)\r\n          onDepartmentAdded();\r\n      })\r\n      .catch((err) => reject(err));\r\n    });\r\n  }\r\n\r\n  return (\r\n    <AddForm submitText=\"Add department\" postFunction={addDepartment} alreadyExistsErrorText=\"There's already a department with that name.\">\r\n      <p className=\"InputTitle\">Name</p>\r\n      <Input name=\"name\" placeholder=\"Software Dpt\" />\r\n      <p className=\"InputTitle\">Description</p>\r\n      <Input name=\"description\" placeholder=\"A brief description\" />\r\n    </AddForm>\r\n  );\r\n};\r\n\r\nexport default AddDepartmentForm;","import React, { useRef } from \"react\";\r\nimport DepartmentApiUtils from \"../../utils/api/DepartmentApiUtils\";\r\nimport AddForm from \"./AddForm\";\r\nimport \"./AddUserForm.css\";\r\nimport InputAutocompleteUser from \"./InputAutocompleteUser\";\r\n\r\nconst AddUserToDepartment = ({ onUserAdded, submitText, departmentId }) =>\r\n{\r\n  function onUserSelected(field, userId)\r\n  {\r\n    selectedUser.current = userId;\r\n  }\r\n\r\n  function addUserToDepartment()\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      DepartmentApiUtils.addUserToDepartment(departmentId, selectedUser.current)\r\n        .then(() => \r\n        {\r\n          resolve();\r\n          if (onUserAdded)\r\n            onUserAdded();\r\n        })\r\n        .catch((err) => reject(err));\r\n    });\r\n  }\r\n\r\n  const selectedUser = useRef(-1);\r\n\r\n  return (\r\n    <AddForm hasAutocomplete submitText={submitText} postFunction={addUserToDepartment} alreadyExistsErrorText=\"That user is already a member in this department.\" onAutocompleteSelected={onUserSelected}>\r\n      <p className=\"InputTitle\">Full Name</p>\r\n      <InputAutocompleteUser key={selectedUser} name=\"name\" placeholder=\"Harvey Specter\"/>\r\n    </AddForm>\r\n  );\r\n};\r\n\r\nexport default AddUserToDepartment;","import \"./SubsettingContainer.css\";\r\n\r\nconst SidePaneElement = ({children, selected, highlighted, elementDiv, reducedpadding, onClick}) =>\r\n{\r\n    let className = \"SidePaneElement \";\r\n    if (selected)\r\n        className += \"SidePaneElement--Selected\";\r\n    if (highlighted)\r\n        className += \"SidePaneElement--Highlighted\";\r\n    if (reducedpadding)\r\n        className += \"SidePaneElement--ReducedPadding\";\r\n    \r\n    if (elementDiv)\r\n        return <div className={className} onClick={onClick}>{children}</div>;\r\n    else\r\n        return <p className={className} onClick={onClick}>{children}</p>;\r\n};\r\n\r\nexport default SidePaneElement;","import { Link } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport \"../../../FontStyles.css\";\r\nimport DepartmentApiUtils from \"../../../utils/api/DepartmentApiUtils\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport \"../UserList.css\";\r\n\r\nconst DepartmentMemberList = ({ departmentId, members, loading, onListUpdated }) =>\r\n{\r\n\r\n  const credentials = useContext(UserCredentials);\r\n  const isDepartmentManager = credentials.isDepartmentManager(departmentId);\r\n\r\n  function onPromoteClicked(member)\r\n  {\r\n    let isCredentialInDanger = !credentials.isTeamManager && isDepartmentManager;\r\n    if (member.isDepartmentManager)\r\n    {\r\n      let confirmMessage = `Are you sure to demote ${member.name} ${member.lastname} and make them a member?`;\r\n      if (isCredentialInDanger)\r\n      {\r\n        confirmMessage = `NOTE: You are demoting yourself and you will NO LONGER HAVE MANAGEMENT PRIVILEGES. This action cannot be undone. Would you like to continue?`;\r\n      }\r\n      if (window.confirm(confirmMessage))\r\n      {\r\n        DepartmentApiUtils.addUserToDepartment(departmentId, member.userId, false)\r\n          .then(() => {\r\n            if (isCredentialInDanger) \r\n              window.location.replace('/settings/departments');\r\n            else\r\n              onListUpdated();\r\n          })\r\n          .catch(err => console.error(err));\r\n      }\r\n    } else\r\n    {\r\n      let confirmMessage = `Are you sure to demote ${member.name} ${member.lastname} and make them a member?`;\r\n      if (isCredentialInDanger)\r\n      {\r\n        confirmMessage = `NOTE: You are promoting ${member.name} ${member.lastname} to department manager. You will NO LONGER HAVE MANAGEMENT PRIVILEGES. This action cannot be undone. Would you like to continue?`;\r\n      }\r\n      if (window.confirm(confirmMessage))\r\n      {\r\n        DepartmentApiUtils.addUserToDepartment(departmentId, member.userId, true)\r\n          .then(() => \r\n          {\r\n            if (isCredentialInDanger) \r\n              window.location.replace('/settings/departments');\r\n            else\r\n              onListUpdated();\r\n          })\r\n          .catch(err => console.error(err));\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  function onRemoveClicked(member)\r\n  {\r\n    let isCredentialInDanger = member.userId === credentials.user.id && !credentials.isTeamManager && isDepartmentManager;\r\n    let confirmMessage = `Are you sure to remove ${member.name} ${member.lastname} from the department?`;\r\n    if (isCredentialInDanger)\r\n    {\r\n      confirmMessage = \"Are you sure to REMOVE YOURSELF from this department and lose access? This action cannot be undone.\";\r\n    }\r\n    if (window.confirm(confirmMessage))\r\n    {\r\n      DepartmentApiUtils.removeUserFromDepartment(departmentId, member.userId)\r\n        .then(() => \r\n        {\r\n          if (isCredentialInDanger)\r\n            window.location.reload();\r\n          else\r\n            onListUpdated();\r\n        })\r\n        .catch(err => console.error(err));\r\n    }\r\n  }\r\n\r\n  if (loading)\r\n  {\r\n    return <Spinner />\r\n  }\r\n\r\n  let elements;\r\n  if (members && members.length > 0)\r\n  {\r\n    elements = members.map(member =>\r\n    {\r\n      const completename = member.name + \" \" + member.lastname;\r\n      const username = completename.toLowerCase().replace(/ /g, \"\");\r\n      if (isDepartmentManager)\r\n      {\r\n        return (\r\n          <tr key={member.id}>\r\n            <td><Link to={`/settings/users/${member.userId}/${username}`}>{member.lastname}, {member.name}</Link></td>\r\n            <td>{member.email}</td>\r\n            <td>{member.isDepartmentManager ? \"Dpt. Manager\" : \"Member\"}</td>\r\n            <td>{member.initialDate}</td>\r\n            <td className=\"ActionStrip\">\r\n              <span onClick={() => onPromoteClicked(member)} className=\"BoldTitle BoldTitle--Smallest ActionButton\">{member.isDepartmentManager ? \"Demote\" : \"Promote\"}</span>\r\n              <span onClick={() => onRemoveClicked(member)} className=\"BoldTitle BoldTitle--Smallest ActionButton\">Remove</span>\r\n            </td>\r\n          </tr>\r\n        );\r\n      } else \r\n      {\r\n        return (\r\n          <tr key={member.id}>\r\n            <td><Link to={`/settings/users/${member.userId}/${username}`}>{member.lastname}, {member.name}</Link></td>\r\n            <td>{member.email}</td>\r\n            <td>{member.isDepartmentManager ? \"Dpt. Manager\" : \"Member\"}</td>\r\n            <td>{member.initialDate}</td>\r\n          </tr>\r\n        );\r\n      }\r\n    });\r\n  } else\r\n  {\r\n    return <p>This department has no members yet.</p>\r\n  }\r\n\r\n  let tableHeader;\r\n  if (isDepartmentManager)\r\n  {\r\n    tableHeader = (\r\n      <tr>\r\n        <th>Name</th>\r\n        <th>E-mail address</th>\r\n        <th>Role</th>\r\n        <th>Member since</th>\r\n        <th>Actions</th>\r\n      </tr>\r\n    );\r\n  } else\r\n  {\r\n    tableHeader = (\r\n      <tr>\r\n        <th>Name</th>\r\n        <th>E-mail address</th>\r\n        <th>Role</th>\r\n        <th>Member since</th>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <table className=\"UserList\">\r\n      <thead className=\"UserList__thead\">\r\n        {tableHeader}\r\n      </thead>\r\n      <tbody>\r\n        {elements}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default DepartmentMemberList;\r\n","import { useEffect, useState } from 'react';\r\nimport DepartmentApiUtils from \"../../../utils/api/DepartmentApiUtils\";\r\nimport Button from \"../../buttons/Button\";\r\nimport AddUserToDepartment from \"../../forms/AddUserToDepartmentForm\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport EditableField from \"../EditableField\";\r\nimport SettingGroup from \"../SettingGroup\";\r\nimport SidePaneElement from \"../SidePaneElement\";\r\nimport DepartmentMemberList from \"./DepartmentMemberList\";\r\nimport Sticky from \"react-sticky-el\";\r\nimport \"../SubsettingContainer.css\";\r\nimport { useContext } from 'react';\r\nimport UserCredentials from '../../../context/UserCredentials';\r\n\r\nconst DepartmentsContainer = ({ departments, onDepartmentDeleted }) =>\r\n{\r\n\r\n  const credentials = useContext(UserCredentials);\r\n\r\n  function onDepartmentAttributeUpdated(field, value)\r\n  {\r\n    if (value !== myDepartments[selectedIndex][field])\r\n    {\r\n      // Update department object\r\n      setMyDepartments(Object.values({\r\n        ...myDepartments,\r\n        [selectedIndex]:\r\n        {\r\n          ...myDepartments[selectedIndex],\r\n          [field]: value\r\n        }\r\n      }));\r\n    }\r\n  }\r\n\r\n  function onDepartmentDeleteClicked()\r\n  {\r\n    if (window.confirm(\"Are you sure to delete this department and associated data? This action cannot be undone.\"))\r\n    {\r\n      setIsDeleting(true);\r\n      DepartmentApiUtils.deleteDepartment(myDepartments[selectedIndex].id)\r\n        .then(() =>\r\n        {\r\n          setIsDeleting(false);\r\n          if (onDepartmentDeleted)\r\n            onDepartmentDeleted();\r\n        })\r\n        .catch((err) => \r\n        {\r\n          setIsDeleting(false);\r\n          console.error(err);\r\n        });\r\n    }\r\n  }\r\n\r\n  function updateDepartment(updatedDepartment)\r\n  {\r\n    // Add id for the API call\r\n    updatedDepartment.id = myDepartments[selectedIndex].id;\r\n    return DepartmentApiUtils.updateDepartment(updatedDepartment);\r\n  }\r\n\r\n  function onUserAdded()\r\n  {\r\n    fetchDepartmentMembers();\r\n  }\r\n\r\n  function fetchDepartmentMembers()\r\n  {\r\n    if (departmentMembers != null)\r\n      setDepartmentMembers(null);\r\n    DepartmentApiUtils.getMembersFromDepartment(myDepartments[selectedIndex].id)\r\n      .then(data => setDepartmentMembers(data))\r\n      .catch(err => console.error(err));\r\n  }\r\n\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n  const [myDepartments, setMyDepartments] = useState(departments);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [departmentMembers, setDepartmentMembers] = useState(null);\r\n\r\n  useEffect(() => fetchDepartmentMembers(), [selectedIndex, myDepartments])\r\n\r\n  if (myDepartments.length !== departments.length) // When the department property is changed\r\n    setMyDepartments(departments);\r\n\r\n  if (!myDepartments)\r\n  {\r\n    return <p>No departments found.</p>\r\n  }\r\n\r\n  if (selectedIndex >= myDepartments.length) // In case we deleted a department\r\n  {\r\n    setSelectedIndex(selectedIndex - 1);\r\n    return; // set correct index and rerender\r\n  }\r\n\r\n  let SidepaneElements = [];\r\n  for (let i = 0; i < myDepartments.length; i++)\r\n  {\r\n    const dpt = myDepartments[i];\r\n    SidepaneElements.push(<SidePaneElement key={i} selected={i === selectedIndex} onClick={() => setSelectedIndex(i)}>{dpt.name}</SidePaneElement>);\r\n  }\r\n\r\n  const currentDepartment = myDepartments[selectedIndex];\r\n\r\n  const isDepartmentManager = credentials.isDepartmentManager(currentDepartment.id);\r\n\r\n  let addUserToDptElement;\r\n  let deleteDepartmentElement;\r\n  if (isDepartmentManager)\r\n  {\r\n    addUserToDptElement = (\r\n      <SettingGroup\r\n        name=\"Add user to department\"\r\n        description=\"Start typing their name below.\">\r\n        <AddUserToDepartment\r\n          key={currentDepartment.name}\r\n          onUserAdded={onUserAdded}\r\n          departmentId={currentDepartment.id}\r\n          submitText={`Add to ${currentDepartment.name}`} />\r\n      </SettingGroup>\r\n    );\r\n\r\n    deleteDepartmentElement = (\r\n      <SettingGroup\r\n        danger\r\n        name=\"Delete department\"\r\n        description=\"Deletes the department, as well as its associated members and projects. <br>This action cannot be undone.\">\r\n        <Button\r\n          className=\"Button--red\"\r\n          onClick={onDepartmentDeleteClicked}>\r\n          {isDeleting ? <Spinner red /> : \"Delete department\"}\r\n        </Button>\r\n      </SettingGroup>\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"SubsettingContainer\">\r\n      <div className=\"SubsettingSidePane\">\r\n        <Sticky\r\n          boundaryElement=\".SubsettingSidePane\"\r\n          topOffset={-240}\r\n          stickyStyle={{ transform: 'translateY(240px)' }}>\r\n          {SidepaneElements}\r\n        </Sticky>\r\n      </div>\r\n      <div className=\"SettingGroupsContainer\">\r\n        <SettingGroup\r\n          name=\"Department name\"\r\n          description=\"Shown in projects assigned to team members.\">\r\n          <EditableField\r\n            key={selectedIndex}\r\n            value={currentDepartment.name}\r\n            fieldName=\"name\"\r\n            editable={isDepartmentManager}\r\n            postFunction={updateDepartment}\r\n            onUpdated={onDepartmentAttributeUpdated} />\r\n        </SettingGroup>\r\n        <SettingGroup\r\n          name=\"Description\"\r\n          description=\"A brief description for the responsibilities of the department.\">\r\n          <EditableField\r\n            key={selectedIndex}\r\n            smaller\r\n            value={currentDepartment.description}\r\n            editable={isDepartmentManager}\r\n            fieldName=\"description\"\r\n            postFunction={updateDepartment}\r\n            onUpdated={onDepartmentAttributeUpdated} />\r\n        </SettingGroup>\r\n        {addUserToDptElement}\r\n        <SettingGroup\r\n          name=\"Members\"\r\n          description={isDepartmentManager ? \"Click on a user to see their profile and hover to show available actions.\" : \"Click on a user to see their profile.\"}>\r\n          <DepartmentMemberList\r\n            key={selectedIndex}\r\n            departmentId={currentDepartment.id}\r\n            loading={departmentMembers == null}\r\n            members={departmentMembers}\r\n            onListUpdated={fetchDepartmentMembers} />\r\n        </SettingGroup>\r\n        {deleteDepartmentElement}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DepartmentsContainer;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport DepartmentApiUtils from \"../../../utils/api/DepartmentApiUtils\";\r\nimport AddDepartmentForm from \"../../forms/AddDepartmentForm\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport SettingGroup from \"../SettingGroup\";\r\nimport DepartmentsContainer from \"./DepartmentsContainer\";\r\n\r\nconst DepartmentSettings = () =>\r\n{\r\n\r\n  const credentials = useContext(UserCredentials);\r\n\r\n  function retrieveDepartments()\r\n  {\r\n    let func = credentials.isTeamManager ? DepartmentApiUtils.getDepartments : DepartmentApiUtils.getMyDepartments;\r\n    func()\r\n      .then(dpts => setDepartments(dpts.sort((a,b) => a.name.localeCompare(b.name))))\r\n      .catch((err) => console.error(err));\r\n  }\r\n\r\n  const [departments, setDepartments] = useState(null);\r\n  useEffect(() =>\r\n  {\r\n    retrieveDepartments();\r\n  }, []);\r\n\r\n  let manageDepartments;\r\n  if (!departments)\r\n  {\r\n    manageDepartments = (\r\n      <SettingGroup\r\n        name=\"Manage departments\"\r\n        description=\" \">\r\n        <Spinner />\r\n      </SettingGroup>\r\n    );\r\n  }\r\n  else if (departments.length > 0)\r\n  {\r\n    manageDepartments = (\r\n      <SettingGroup\r\n        name=\"Manage departments\"\r\n        description=\" \">\r\n        <DepartmentsContainer departments={departments} onDepartmentDeleted={retrieveDepartments} />\r\n      </SettingGroup>\r\n    );\r\n  }\r\n  else\r\n  {\r\n    manageDepartments = (\r\n      <SettingGroup\r\n        name=\"Manage departments\"\r\n        description={credentials.isTeamManager ? \"There aren't any departments yet.\" : \"You aren't a member of any departments.\"}>\r\n      </SettingGroup>\r\n    );\r\n  }\r\n\r\n  let addNewDepartment;\r\n  if (credentials.isTeamManager)\r\n    addNewDepartment = (\r\n      <SettingGroup\r\n        name=\"Create new department\"\r\n        description=\"You will be able to add users once created.\">\r\n        <AddDepartmentForm onDepartmentAdded={retrieveDepartments} />\r\n      </SettingGroup>\r\n    );\r\n\r\n  return (\r\n    <div className=\"SettingGroupsContainer\">\r\n      {addNewDepartment}\r\n      {manageDepartments}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DepartmentSettings;\r\n","import React from \"react\";\r\nimport MilestoneApiUtils from \"../../utils/api/MilestoneApiUtils\";\r\nimport AddForm from \"./AddForm\";\r\nimport \"./AddUserForm.css\";\r\nimport Input from \"./Input\";\r\n\r\nconst AddMilestoneForm = ({projectId, onMilestoneAdded}) =>\r\n{\r\n  function addMilestone(milestone)\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      MilestoneApiUtils.createMilestone(projectId, milestone)\r\n      .then(() => \r\n      {\r\n        resolve();\r\n        if (onMilestoneAdded)\r\n          onMilestoneAdded();\r\n      })\r\n      .catch((err) => reject(err));\r\n    });\r\n  }\r\n\r\n  return (\r\n    <AddForm submitText=\"Add milestone\" postFunction={addMilestone} validateExcludeFields={[\"dueFor\"]}>\r\n      <p className=\"InputTitle\">Name</p>\r\n      <Input name=\"name\" placeholder=\"Sprint Feb 20\" />\r\n      <p className=\"InputTitle\">Due by</p>\r\n      <Input name=\"dueFor\" type=\"date\" />\r\n    </AddForm>\r\n  );\r\n};\r\n\r\nexport default AddMilestoneForm;","import React from \"react\";\r\nimport TagApiUtils from \"../../utils/api/TagApiUtils\";\r\nimport AddForm from \"./AddForm\";\r\nimport \"./AddUserForm.css\";\r\nimport Input from \"./Input\";\r\n\r\nconst AddTagForm = ({projectId, onTagAdded}) =>\r\n{\r\n\r\n  function hslToHex(h, s, l) {\r\n    l /= 100;\r\n    const a = s * Math.min(l, 1 - l) / 100;\r\n    const f = n => {\r\n      const k = (n + h / 30) % 12;\r\n      const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\r\n      return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix \"0\" if needed\r\n    };\r\n    return `#${f(0)}${f(8)}${f(4)}`;\r\n  }\r\n  \r\n  function addTag(tag)\r\n  {\r\n    // copy so we dont modify the original object\r\n    const post = \r\n    {\r\n      title: tag.title,\r\n      color: hslToHex(Math.random() * 360, 100, 50)\r\n    }; \r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      TagApiUtils.addNewTag(projectId, post)\r\n      .then(() => \r\n      {\r\n        resolve();\r\n        if (onTagAdded)\r\n          onTagAdded();\r\n      })\r\n      .catch((err) => reject(err));\r\n    });\r\n  }\r\n\r\n  return (\r\n    <AddForm submitText=\"Add tag\" postFunction={addTag} alreadyExistsErrorText=\"A tag with that name already exists in this project.\" tooManyErrorText=\"There can only be a maximum of 6 tags per project.\">\r\n      <p className=\"InputTitle\">Tag</p>\r\n      <Input name=\"title\" placeholder=\"Development\" />\r\n    </AddForm>\r\n  );\r\n};\r\n\r\nexport default AddTagForm;","import React, { useRef } from \"react\";\r\nimport ProjectApiUtils from \"../../utils/api/ProjectApiUtils\";\r\nimport AddForm from \"./AddForm\";\r\nimport \"./AddUserForm.css\";\r\nimport InputAutocompleteUser from \"./InputAutocompleteUser\";\r\n\r\nconst AddUserToProject = ({ onUserAdded, submitText, projectId, departmentId }) =>\r\n{\r\n  function onUserSelected(field, userId)\r\n  {\r\n    selectedUser.current = userId;\r\n  }\r\n\r\n  function addUserToProject()\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      ProjectApiUtils.addUserToProject(projectId, selectedUser.current)\r\n        .then(() => \r\n        {\r\n          resolve();\r\n          if (onUserAdded)\r\n            onUserAdded();\r\n        })\r\n        .catch((err) => reject(err));\r\n    });\r\n  }\r\n\r\n  const selectedUser = useRef(-1);\r\n\r\n  return (\r\n    <AddForm hasAutocomplete submitText={submitText} postFunction={addUserToProject} alreadyExistsErrorText=\"That user is already a project member.\" onAutocompleteSelected={onUserSelected}>\r\n      <p className=\"InputTitle\">Full Name</p>\r\n      <InputAutocompleteUser key={selectedUser} departmentId={departmentId} name=\"name\" placeholder=\"Harvey Specter\"/>\r\n    </AddForm>\r\n  );\r\n};\r\n\r\nexport default AddUserToProject;","import { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../../../FontStyles.css\";\r\nimport MilestoneApiUtils from \"../../../utils/api/MilestoneApiUtils\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport \"../UserList.css\";\r\n\r\nconst MilestoneList = ({ departmentId, projectName, projectId, updateCounter }) =>\r\n{\r\n\r\n  const [milestones, setMilestones] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() =>\r\n  {\r\n    MilestoneApiUtils.getMilestones(projectId)\r\n      .then(data =>\r\n      {\r\n        setMilestones(data);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => console.error(err));\r\n  }, [projectId, updateCounter]);\r\n\r\n  if (loading)\r\n  {\r\n    return <Spinner />\r\n  }\r\n\r\n  let elements;\r\n  if (milestones && milestones.length > 0)\r\n  {\r\n    const today = new Date();\r\n    elements = milestones.map(milestone =>\r\n    {\r\n      const milename = milestone.name.replace(/ /g,\"-\");\r\n      const projname = projectName.replace(/ /g, \"-\");\r\n      const pastText = new Date(milestone.dueFor) < today ? \"Expired:\" : \"\";\r\n      return (\r\n        <tr key={milestone.id}>\r\n          <td><i>{pastText}</i> <Link to={`/settings/projects/${departmentId}/${projname}/${projectId}/${milename}/${milestone.id}`}>{milestone.name}</Link></td>\r\n          <td>{milestone.toDos.length}</td>\r\n          <td>{milestone.dueFor}</td>\r\n        </tr>\r\n      );\r\n    });\r\n  } else\r\n  {\r\n    return <p>This project has no milestones yet.</p>\r\n  }\r\n\r\n  return (\r\n    <table className=\"UserList UserList--Smaller\">\r\n      <thead className=\"UserList__thead\">\r\n        <tr>\r\n          <th>Name</th>\r\n          <th>Tasks</th>\r\n          <th>Due by</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {elements}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default MilestoneList;\r\n","import { faWindows } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport \"../../../FontStyles.css\";\r\nimport ProjectApiUtils from \"../../../utils/api/ProjectApiUtils\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport \"../UserList.css\";\r\n\r\nconst ProjectMemberList = ({departmentId, projectId, members, loading, onListUpdated}) => {\r\n\r\n  const credentials = useContext(UserCredentials);\r\n  const isProjectManager = credentials.isProjectManager(projectId, departmentId);\r\n\r\n  function onPromoteClicked(member)\r\n  {\r\n    let isCredentialInDanger = !credentials.isTeamManager && !credentials.isDepartmentManager(departmentId) && isProjectManager;\r\n    if (member.isProjectManager)\r\n    {\r\n      let confirmMessage = `Are you sure to demote ${member.name} ${member.lastname} and make them a member?`;\r\n      if (isCredentialInDanger)\r\n      {\r\n        confirmMessage = `NOTE: You are demoting yourself and you will NO LONGER HAVE MANAGEMENT PRIVILEGES. This action cannot be undone. Would you like to continue?`;\r\n      }\r\n      if (window.confirm(confirmMessage))\r\n      {\r\n        ProjectApiUtils.addUserToProject(projectId, member.userId, false)\r\n          .then(() => \r\n          {\r\n            if (isCredentialInDanger)\r\n              window.location.reload();\r\n            else\r\n              onListUpdated();\r\n          })\r\n          .catch(err => console.error(err));\r\n      }\r\n    } else\r\n    {\r\n      let confirmMessage = `Are you sure to promote ${member.name} ${member.lastname} to project manager?`;\r\n      if (isCredentialInDanger)\r\n      {\r\n        confirmMessage =  `NOTE: You are promoting ${member.name} ${member.lastname} to project manager. You will NO LONGER HAVE MANAGEMENT PRIVILEGES. This action cannot be undone. Would you like to continue?`;\r\n      }\r\n      if (window.confirm(confirmMessage))\r\n      {\r\n        ProjectApiUtils.addUserToProject(projectId, member.userId, true)\r\n          .then(() => \r\n          {\r\n            if (isCredentialInDanger)\r\n              window.location.reload();\r\n            else\r\n              onListUpdated();\r\n          })\r\n          .catch(err => console.error(err));\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  function onRemoveClicked(member)\r\n  {\r\n    let isCredentialInDanger = member.userId === credentials.user.id && !credentials.isTeamManager && !credentials.isDepartmentManager(departmentId) && isProjectManager;\r\n    let confirmMessage = `Are you sure to remove ${member.name} ${member.lastname} from the project?`;\r\n    if (isCredentialInDanger)\r\n    {\r\n      confirmMessage = \"Are you sure to REMOVE YOURSELF from this project and lose access? This action cannot be undone.\";\r\n    }\r\n    if (window.confirm(confirmMessage))\r\n    {\r\n      ProjectApiUtils.removeUserFromProject(projectId, member.userId)\r\n      .then(() => \r\n      {\r\n        if (isCredentialInDanger)\r\n          window.location.reload();\r\n        else\r\n          onListUpdated();\r\n      })\r\n      .catch(err => console.error(err));\r\n    }\r\n  }\r\n\r\n  if (loading)\r\n  {\r\n    return <Spinner />\r\n  }\r\n\r\n  let elements;\r\n  if (members && members.length > 0)\r\n  {\r\n    elements = members.map(member =>\r\n    {\r\n      const completename = member.name + \" \" + member.lastname;\r\n      const username = completename.toLowerCase().replace(/ /g, \"\");\r\n      let actionStrip;\r\n      if (isProjectManager)\r\n      {\r\n        actionStrip = (\r\n          <td className=\"ActionStrip\">\r\n            <span onClick={() => onPromoteClicked(member)} className=\"BoldTitle BoldTitle--Smallest ActionButton\">{member.isProjectManager ? \"Demote\" : \"Promote\"}</span>\r\n            <span onClick={() => onRemoveClicked(member)} className=\"BoldTitle BoldTitle--Smallest ActionButton\">Remove</span>\r\n          </td>\r\n        );\r\n      }\r\n      return (\r\n        <tr key={member.id}>\r\n          <td><Link to={`/settings/users/${member.userId}/${username}`}>{member.lastname}, {member.name}</Link></td>\r\n          <td>{member.email}</td>\r\n          <td>{member.isProjectManager ? \"Proj. Manager\" : \"Member\"}</td>\r\n          <td>{member.initialDate}</td>\r\n          {actionStrip}\r\n        </tr>\r\n      );\r\n    });\r\n  } else\r\n  {\r\n    return <p>This project has no members yet.</p>\r\n  }\r\n\r\n  let actionRow;\r\n  if (isProjectManager)\r\n    actionRow = <th>Actions</th>\r\n  return (\r\n    <table className=\"UserList\">\r\n      <thead className=\"UserList__thead\">\r\n        <tr>\r\n          <th>Name</th>\r\n          <th>E-mail address</th>\r\n          <th>Role</th>\r\n          <th>Member since</th>\r\n          {actionRow}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {elements}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default ProjectMemberList;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport \"../../../FontStyles.css\";\r\nimport TagApiUtils from \"../../../utils/api/TagApiUtils\";\r\nimport Circle from \"../../projects/tags/Circle\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport \"../UserList.css\";\r\n\r\nconst TagList = ({ departmentId, projectId, updateCounter }) =>\r\n{\r\n\r\n  const credentials = useContext(UserCredentials);\r\n  const isProjectManager = credentials.isProjectManager(projectId, departmentId);\r\n\r\n  const [tags, setTags] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // TODO useCallback for fetchtags\r\n  useEffect(() =>\r\n  {\r\n    fetchTags();\r\n  }, [projectId, updateCounter]);\r\n\r\n  function fetchTags()\r\n  {\r\n    TagApiUtils.getTags(projectId)\r\n    .then(data =>\r\n    {\r\n      setTags(data);\r\n      setLoading(false);\r\n    })\r\n    .catch(err => console.error(err));\r\n  }\r\n\r\n  function onRemoveClicked(tag)\r\n  {\r\n    if (window.confirm(`Are you sure to remove tag \"${tag.title}\" from the project?`))\r\n    {\r\n      TagApiUtils.deleteTag(projectId, tag.id)\r\n      .then(() => fetchTags())\r\n      .catch(err => console.error(err));\r\n    }\r\n  }\r\n\r\n  if (loading)\r\n  {\r\n    return <Spinner />\r\n  }\r\n\r\n  let elements;\r\n  if (tags && tags.length > 0)\r\n  {\r\n    elements = tags.map(tag =>\r\n    {\r\n      return (\r\n        <tr key={tag.id}>\r\n          <td><Circle color={tag.color} />  {tag.title}</td>\r\n          <td>{tag.todosUsingTag}</td>\r\n          {isProjectManager ? (\r\n            <td className=\"ActionStrip\">\r\n              <span onClick={() => onRemoveClicked(tag)} className=\"BoldTitle BoldTitle--Smallest ActionButton\">Remove</span>\r\n            </td>\r\n          ) : undefined}\r\n        </tr>\r\n      );\r\n    });\r\n  } else\r\n  {\r\n    return <p>This project has no tags yet.</p>\r\n  }\r\n\r\n  return (\r\n    <table className=\"UserList UserList--Smaller\">\r\n      <thead className=\"UserList__thead\">\r\n        <tr>\r\n          <th>Name</th>\r\n          <th>Tasks</th>\r\n          {isProjectManager ? <th>Actions</th> : undefined}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {elements}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default TagList;\r\n","import { faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Sticky from \"react-sticky-el\";\r\nimport { useContext } from \"react\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport ProjectApiUtils from \"../../../utils/api/ProjectApiUtils\";\r\nimport Button from \"../../buttons/Button\";\r\nimport AddMilestoneForm from \"../../forms/AddMilestoneForm\";\r\nimport AddTagForm from \"../../forms/AddTagForm\";\r\nimport AddUserToProjectForm from \"../../forms/AddUserToProjectForm\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport EditableField from \"../EditableField\";\r\nimport SettingGroup from \"../SettingGroup\";\r\nimport SidePaneElement from \"../SidePaneElement\";\r\nimport \"../SubsettingContainer.css\";\r\nimport MilestoneList from \"./MilestoneList\";\r\nimport ProjectMemberList from \"./ProjectMemberList\";\r\nimport TagList from \"./TagList\";\r\n\r\nconst ProjectsContainer = ({ departments, onProjectAdded, onProjectDeleted }) =>\r\n{\r\n\r\n  const credentials = useContext(UserCredentials);\r\n\r\n  const [departmentIndex, setDepartmentIndex] = useState(0);\r\n  const [projectIndex, setProjectIndex] = useState(0);\r\n  const [myDepartments, setMyDepartments] = useState(departments);\r\n  const [isAddLoading, setIsAddLoading] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [projectMembers, setProjectMembers] = useState(null);\r\n  const [milestoneUpdateCounter, setMilestoneUpdateCounter] = useState(0);\r\n  const [tagUpdateCounter, setTagUpdateCounter] = useState(0);\r\n\r\n  // TODO useCallback to fix this warning? how would we fix this\r\n  useEffect(() => fetchProjectMembers(), [departmentIndex, projectIndex, myDepartments])\r\n\r\n  function generateNewProjectName(projects)\r\n  {\r\n    const filtered = projects.filter(p => p.name.indexOf(\"New Project\") >= 0);\r\n    let i = 1;\r\n    let name = \"New Project\";\r\n    while (true)\r\n    {\r\n      // eslint-disable-next-line no-loop-func\r\n      if (!filtered.some(p => p.name === name))\r\n        break;\r\n      i++;\r\n      name = \"New Project \" + i;\r\n    }\r\n    return name;\r\n  }\r\n\r\n  function createProject()\r\n  {\r\n    if (isAddLoading)\r\n      return;\r\n\r\n    const dpt = myDepartments[departmentIndex]\r\n    const project = {\r\n      name: generateNewProjectName(dpt.projects),\r\n      description: \"This is a brief description.\"\r\n    }\r\n    setIsAddLoading(true);\r\n    ProjectApiUtils.postProject(dpt.id, project)\r\n      .then(() => \r\n      {\r\n        if (onProjectAdded)\r\n          onProjectAdded();\r\n      })\r\n      .catch(err => console.error(err));\r\n  }\r\n\r\n  function onProjectAttributeUpdated(field, value)\r\n  {\r\n    if (value !== myDepartments[departmentIndex].projects[projectIndex][field])\r\n    {\r\n      myDepartments[departmentIndex].projects[projectIndex][field] = value;\r\n      // Trigger update\r\n      setMyDepartments(Object.values({\r\n        ...myDepartments\r\n      }));\r\n    }\r\n  }\r\n\r\n  function onMilestoneAdded()\r\n  {\r\n    setMilestoneUpdateCounter(Math.random()); // HACK force an update\r\n  }\r\n\r\n  function onTagAdded()\r\n  {\r\n    setTagUpdateCounter(Math.random()); // HACK force an update\r\n  }\r\n\r\n  function onProjectDeleteClicked()\r\n  {\r\n    if (window.confirm(\"Are you sure to delete this project and its associated data? This action cannot be undone.\"))\r\n    {\r\n      const dpt = myDepartments[departmentIndex];\r\n      setIsDeleting(true);\r\n      ProjectApiUtils.deleteProject(dpt.id, dpt.projects[projectIndex].id)\r\n        .then(() =>\r\n        {\r\n          setIsDeleting(false);\r\n          window.scrollTo(0, 0);\r\n          if (onProjectDeleted)\r\n            onProjectDeleted();\r\n        })\r\n        .catch((err) => \r\n        {\r\n          setIsDeleting(false);\r\n          console.error(err);\r\n        });\r\n    }\r\n  }\r\n\r\n  function updateProject(updatedProject)\r\n  {\r\n    // Add id for the API call\r\n    const dpt = myDepartments[departmentIndex];\r\n    updatedProject.id = dpt.projects[projectIndex].id;\r\n    return ProjectApiUtils.updateProject(dpt.id, updatedProject.id, updatedProject);\r\n  }\r\n\r\n  function onUserAdded()\r\n  {\r\n    fetchProjectMembers();\r\n  }\r\n\r\n  function fetchProjectMembers()\r\n  {\r\n    if (projectMembers != null)\r\n      setProjectMembers(null);\r\n    if (myDepartments[departmentIndex].projects[projectIndex])\r\n    {\r\n      const projectId = myDepartments[departmentIndex].projects[projectIndex].id;\r\n      ProjectApiUtils.getMembersFromProject(projectId)\r\n        .then(data => setProjectMembers(data))\r\n        .catch(err => console.error(err));\r\n    } else \r\n    {\r\n      setProjectMembers(null);\r\n    }\r\n  }\r\n\r\n  if (JSON.stringify(myDepartments) !== JSON.stringify(departments)) // When the department property is changed \r\n  {\r\n    setIsAddLoading(false);\r\n    setMyDepartments(departments);\r\n    return;\r\n  }\r\n\r\n  if (!myDepartments)\r\n    return <p>No projects found.</p>\r\n\r\n  const currentDepartment = myDepartments[departmentIndex];\r\n  const isDepartmentManager = currentDepartment ? credentials.isDepartmentManager(currentDepartment.id) : false;\r\n  let DepartmentElements = [];\r\n\r\n  for (let i = 0; i < myDepartments.length; i++)\r\n  {\r\n    const dpt = myDepartments[i];\r\n    DepartmentElements.push(<SidePaneElement key={i} selected={i === departmentIndex} onClick={() => setDepartmentIndex(i)}>{dpt.name}</SidePaneElement>);\r\n  }\r\n\r\n  const projects = currentDepartment.projects;\r\n  const ProjectElements = projects.map((x, i) =>\r\n  {\r\n    return <SidePaneElement key={i} selected={i === projectIndex} onClick={() => setProjectIndex(i)}>{x.name}</SidePaneElement>;\r\n  });\r\n\r\n  let Content;\r\n  if (projects.length === 0)\r\n  {\r\n    if (isDepartmentManager)\r\n    {\r\n      Content = <p>There are no projects in this department. Click on \"Add new project\" to create a new one.</p>\r\n    } else\r\n    {\r\n      Content = <p>You aren't a member of any projects from this department.</p>\r\n    }\r\n  } else\r\n  {\r\n    if (projectIndex >= projects.length)\r\n    {\r\n      setProjectIndex(0);\r\n      return;\r\n    }\r\n    const currentProject = projects[projectIndex];\r\n    const isProjectManager = credentials.isProjectManager(currentProject.id, currentDepartment.id);\r\n    Content = (\r\n      <>\r\n        <SettingGroup\r\n          name=\"Project name\">\r\n          <EditableField\r\n            key={`${departmentIndex}-${projectIndex}`}\r\n            value={currentProject.name}\r\n            editable={isProjectManager}\r\n            fieldName=\"name\"\r\n            postFunction={updateProject}\r\n            onUpdated={onProjectAttributeUpdated} />\r\n        </SettingGroup>\r\n        <SettingGroup\r\n          name=\"Description\">\r\n          <EditableField\r\n            smaller\r\n            key={`${departmentIndex}-${projectIndex}`}\r\n            fieldName=\"description\"\r\n            editable={isProjectManager}\r\n            value={currentProject.description}\r\n            postFunction={updateProject}\r\n            onUpdated={onProjectAttributeUpdated} />\r\n        </SettingGroup>\r\n        <SettingGroup\r\n          name=\"Milestones\"\r\n          description={isProjectManager ? \"You can add a new milestone below.\" : \" \"}>\r\n          {isProjectManager ? (\r\n            <AddMilestoneForm\r\n              key={`mileform${currentProject.id}`}\r\n              projectId={currentProject.id}\r\n              onMilestoneAdded={onMilestoneAdded} />\r\n          ) : \"\"}\r\n          <MilestoneList\r\n            key={`list${currentProject.id}`}\r\n            departmentId={currentDepartment.id}\r\n            updateCounter={milestoneUpdateCounter}\r\n            projectName={currentProject.name}\r\n            projectId={currentProject.id} />\r\n        </SettingGroup>\r\n        {isProjectManager ? (\r\n          <SettingGroup\r\n            name=\"Add user to project\"\r\n            description=\"Type their name below. They must be a department member.\">\r\n            <AddUserToProjectForm\r\n              key={currentProject.name}\r\n              onUserAdded={onUserAdded}\r\n              projectId={currentProject.id}\r\n              departmentId={departments[departmentIndex].id}\r\n              submitText={`Add to ${currentProject.name}`} />\r\n          </SettingGroup>\r\n        ) : \"\"}\r\n        <SettingGroup\r\n          name=\"Members\"\r\n          description=\"Click on a user to see their profile and hover to show available actions.\">\r\n          <ProjectMemberList\r\n            key={`${departmentIndex}-${projectIndex}`}\r\n            departmentId={currentDepartment.id}\r\n            projectId={currentProject.id}\r\n            loading={projectMembers == null}\r\n            members={projectMembers}\r\n            onListUpdated={fetchProjectMembers} />\r\n        </SettingGroup>\r\n        <SettingGroup\r\n          name=\"Tags\"\r\n          description={isProjectManager ? \"You can add a new tag below.\" : \" \"}>\r\n          {isProjectManager ? (\r\n            <AddTagForm\r\n              key={`tagform${currentProject.id}`}\r\n              projectId={currentProject.id}\r\n              onTagAdded={onTagAdded} />\r\n          ) : \"\"}\r\n          <TagList\r\n            key={`taglist${currentProject.id}`}\r\n            departmentId={currentDepartment.id}\r\n            updateCounter={tagUpdateCounter}\r\n            projectId={currentProject.id} />\r\n        </SettingGroup>\r\n        {isProjectManager ? (\r\n          <SettingGroup\r\n            danger\r\n            name=\"Delete project\"\r\n            description=\"Deletes the project, as well as its associated members, tags and tasks. <br>This action cannot be undone.\">\r\n            <Button\r\n              className=\"Button--red\"\r\n              onClick={onProjectDeleteClicked}>\r\n              {isDeleting ? <Spinner red /> : \"Delete project\"}\r\n            </Button>\r\n          </SettingGroup>\r\n        ) : \"\"}\r\n      </>\r\n    );\r\n  }\r\n\r\n  let addBtn;\r\n  if (isAddLoading)\r\n  {\r\n    addBtn = <Spinner />\r\n  } else\r\n  {\r\n    addBtn = (\r\n      <>\r\n        <FontAwesomeIcon\r\n          icon={faPlus}\r\n          className=\"AddIcon\" />\r\n          Add new project\r\n      </>);\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"SubsettingContainer\">\r\n      <div className=\"SubsettingSidePane\">\r\n        <Sticky\r\n          boundaryElement=\".SubsettingSidePane\"\r\n          topOffset={-240}\r\n          stickyStyle={{ transform: 'translateY(240px)' }}>\r\n          {DepartmentElements}\r\n        </Sticky>\r\n      </div>\r\n      <div className=\"SubsettingSidePane SubsettingSidePane--Second\">\r\n        <Sticky\r\n          boundaryElement=\".SubsettingSidePane\"\r\n          topOffset={-240}\r\n          stickyStyle={{ transform: 'translateY(240px)' }}>\r\n          {isDepartmentManager ? (\r\n            <SidePaneElement reducedpadding={isAddLoading} onClick={createProject}\r\n              highlighted elementDiv={isAddLoading}>\r\n              {addBtn}\r\n            </SidePaneElement>\r\n          ) : undefined}\r\n          {ProjectElements}\r\n        </Sticky>\r\n      </div>\r\n      <div className=\"SettingGroupsContainer\">\r\n        {Content}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectsContainer;\r\n","import { useEffect } from \"react\";\r\nimport { useContext, useState } from \"react\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport DepartmentApiUtils from \"../../../utils/api/DepartmentApiUtils\";\r\nimport ProjectApiUtils from \"../../../utils/api/ProjectApiUtils\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport SettingGroup from \"../SettingGroup\";\r\nimport ProjectsContainer from \"./ProjectsContainer\";\r\n\r\nconst ProjectSettings = () =>\r\n{\r\n  const credentials = useContext(UserCredentials);\r\n  function retrieveDepartments()\r\n  {\r\n    let func = credentials.isTeamManager ? DepartmentApiUtils.getDepartments : DepartmentApiUtils.getMyDepartments;\r\n    let func2 = credentials.isTeamManager ? ProjectApiUtils.getProjects : ProjectApiUtils.getMyProjects;\r\n    func()\r\n      .then(dpts =>\r\n      {\r\n        Promise.all(dpts.map(d => func2(d.id)))\r\n          .then(projects =>\r\n          {\r\n            for (let i = 0; i < projects.length; i++)\r\n            {\r\n              const proj = projects[i];\r\n              dpts[i].projects = proj.sort((a,b) => a.name.localeCompare(b.name));\r\n            }\r\n            setDepartments(dpts.sort((a,b) => a.name.localeCompare(b.name)));\r\n          });\r\n      })\r\n      .catch((err) => console.error(err));\r\n  }\r\n\r\n  const [departments, setDepartments] = useState(null);\r\n  useEffect(() =>\r\n  {\r\n    retrieveDepartments();\r\n  }, []);\r\n\r\n  if (!departments)\r\n  {\r\n    return (\r\n      <div className=\"SettingGroupsContainer\">\r\n        <SettingGroup\r\n          name=\"Manage projects\"\r\n          description=\" \">\r\n          <Spinner />\r\n        </SettingGroup>\r\n      </div>\r\n    );\r\n  } else\r\n  {\r\n    return (\r\n      <div className=\"SettingGroupsContainer\">\r\n        <SettingGroup\r\n          name=\"Manage projects\"\r\n          description=\" \">\r\n          <ProjectsContainer departments={departments} onProjectAdded={retrieveDepartments} onProjectDeleted={retrieveDepartments} />\r\n        </SettingGroup>\r\n      </div>\r\n    );\r\n  }\r\n\r\n};\r\n\r\nexport default ProjectSettings;\r\n","import { Link } from \"react-router-dom\";\r\nimport \"../../../FontStyles.css\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport \"../UserList.css\";\r\n\r\nconst BelongParticipationList = ({ department, project, values }) =>\r\n{\r\n\r\n  if (!values)\r\n  {\r\n    return <Spinner />\r\n  }\r\n\r\n  let elements;\r\n  if (values && values.length > 0)\r\n  {\r\n    values = values.sort((a, b) => \r\n    {\r\n      if (a.finalDate === null && b.finalDate !== null)\r\n        return -1;\r\n      if (a.finalDate !== null && b.finalDate === null)\r\n        return 1;\r\n      return new Date(a.initialDate) - new Date(b.initialDate);\r\n    });\r\n    elements = values.map(val =>\r\n    {\r\n      let name;\r\n      if (department)\r\n        name = val.departmentName;\r\n      else if (project)\r\n        name = val.projectName;\r\n\r\n      let role;\r\n      if (department)\r\n        role = val.isDepartmentManager ? \"Manager\" : \"Member\";\r\n      else if (project)\r\n        role = val.isProjectManager ? \"Manager\" : \"Member\";\r\n\r\n      if (project)\r\n      {\r\n        return (\r\n          <tr key={val.id}>\r\n            <td>{val.departmentName}</td>\r\n            <td>{name}</td>\r\n            <td>{val.initialDate}</td>\r\n            <td>{val.finalDate ?? \"None\"}</td>\r\n            <td>{role}</td>\r\n          </tr>\r\n        );\r\n      } else\r\n      {\r\n        return (\r\n          <tr key={val.id}>\r\n            <td>{name}</td>\r\n            <td>{val.initialDate}</td>\r\n            <td>{val.finalDate ?? \"None\"}</td>\r\n            <td>{role}</td>\r\n          </tr>\r\n        );\r\n      }\r\n      \r\n    });\r\n  }\r\n\r\n  let tableHeaderName;\r\n  if (department)\r\n    tableHeaderName = \"Department\"\r\n  else if (project)\r\n    tableHeaderName = \"Project\"\r\n\r\n  let tableHead;\r\n  if (project)\r\n    tableHead = (\r\n      <tr>\r\n        <th>Department</th>\r\n        <th>{tableHeaderName}</th>\r\n        <th>Start date</th>\r\n        <th>End date</th>\r\n        <th>Role</th>\r\n      </tr>\r\n    );\r\n  else\r\n    tableHead = (\r\n      <tr>\r\n        <th>{tableHeaderName}</th>\r\n        <th>Start date</th>\r\n        <th>End date</th>\r\n        <th>Role</th>\r\n      </tr>\r\n    );\r\n\r\n  return (\r\n    <table className=\"UserList\">\r\n      <thead className=\"UserList__thead\">\r\n        {tableHead}\r\n      </thead>\r\n      <tbody>\r\n        {elements}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default BelongParticipationList;\r\n","import { useEffect, useState } from \"react\";\r\nimport Button from \"../../buttons/Button\";\r\nimport GoBackButton from \"../../buttons/GoBackButton\";\r\nimport ProfileHeader from \"../../profile/ProfileHeader\";\r\nimport EditableField from \"../EditableField\";\r\nimport SettingGroup from \"../SettingGroup\";\r\nimport UserApiUtils from \"../../../utils/api/UserApiUtils\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport BelongParticipationList from \"./BelongParticipationList\";\r\nimport Sticky from \"react-sticky-el\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport { useContext } from \"react\";\r\n\r\nconst UserPage = ({ match: { params: { userId, userName } } }) =>\r\n{\r\n\r\n    const credentials = useContext(UserCredentials);\r\n    const isTeamManager = credentials.isTeamManager;\r\n\r\n    const [user, setUser] = useState(null);\r\n\r\n    function fetchUser()\r\n    {\r\n        UserApiUtils.getUserById(userId)\r\n            .then(u => setUser(u))\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    useEffect(() =>\r\n    {\r\n        fetchUser(userId);\r\n    }, [userId])\r\n\r\n    function updateUser(user)\r\n    {\r\n        user.id = userId;\r\n        return new Promise((resolve, reject) =>\r\n        {\r\n            UserApiUtils.updateUser(user)\r\n                .then(() =>\r\n                {\r\n                    fetchUser();\r\n                    resolve();\r\n                })\r\n                .catch(err => reject(err))\r\n        });\r\n    }\r\n\r\n    function makeTeamManager() \r\n    {\r\n        alert(\"TODO\");\r\n    }\r\n\r\n    function deleteUser()\r\n    {\r\n        if (window.confirm(\"Are you sure to delete this user from the team? This action cannot be undone.\"))\r\n        {\r\n            UserApiUtils.deleteUser(user.user.id)\r\n                .then(() => window.location.replace('/settings/users'))\r\n                .catch(err => console.error(err));\r\n        }\r\n    }\r\n\r\n    if (user === null)\r\n    {\r\n        return (\r\n            <>\r\n                <ProfileHeader\r\n                    slim\r\n                    src=\"/default_pfp.png\">\r\n                    <GoBackButton darker anchored />\r\n                </ProfileHeader>\r\n                <div className=\"SettingGroupsContainer\">\r\n                    <Spinner />\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    let userAttrs = user.user;\r\n    let role = \"Member\";\r\n    if (userAttrs.role === \"team_owner\")\r\n        role = \"Team owner\";\r\n    else if (user.departmentBelongs.some(x => x.isDepartmentManager && x.finalDate === null))\r\n        role = \"Department manager\";\r\n    else if (user.projectParticipations.some(x => x.isProjectManager && x.finalDate === null))\r\n        role = \"Project manager\";\r\n\r\n    return (\r\n        <>\r\n            <Sticky\r\n                boundaryElement=\".Section\"\r\n                topOffset={-90}\r\n                stickyStyle={{ transform: 'translateY(90px)', zIndex: 3 }}>\r\n                <ProfileHeader\r\n                    slim\r\n                    src=\"/default_pfp.png\"\r\n                    role={role}\r\n                    name={`${userAttrs.name} ${userAttrs.lastname}`}>\r\n                    <GoBackButton darker anchored />\r\n                </ProfileHeader>\r\n            </Sticky>\r\n            <div className=\"SettingGroupsContainer\">\r\n                <SettingGroup name=\"First name\">\r\n                    <EditableField\r\n                        value={userAttrs.name}\r\n                        editable={isTeamManager}\r\n                        fieldName=\"name\"\r\n                        postFunction={updateUser} />\r\n                </SettingGroup>\r\n                <SettingGroup name=\"Last name\">\r\n                    <EditableField\r\n                        value={userAttrs.lastname}\r\n                        editable={isTeamManager}\r\n                        fieldName=\"lastname\"\r\n                        postFunction={updateUser} />\r\n                </SettingGroup>\r\n                <SettingGroup name=\"Email\">\r\n                    <EditableField value={userAttrs.email} editable={false} />\r\n                </SettingGroup>\r\n                <SettingGroup name=\"User joined\">\r\n                    <EditableField value={userAttrs.joinDate} editable={false} />\r\n                </SettingGroup>\r\n                <SettingGroup name=\"Departments\" description=\"A list of the departments the user belongs or has belonged to.\">\r\n                    <BelongParticipationList department values={user.departmentBelongs} />\r\n                </SettingGroup>\r\n                <SettingGroup name=\"Projects\" description=\"A list of the projects the user partipates or has participated in.\">\r\n                    <BelongParticipationList project values={user.projectParticipations} />\r\n                </SettingGroup>\r\n                {isTeamManager ? (\r\n                    <SettingGroup danger name=\"Make team manager\" description=\"Transfer team ownership to this user. <br>This action cannot be undone and you will lose your privileges.\">\r\n                        <Button className=\"Button--red\" onClick={makeTeamManager}>Make team manager</Button>\r\n                    </SettingGroup>\r\n                ) : \"\"}\r\n                {isTeamManager ? (\r\n                    <SettingGroup danger name=\"Delete user\" description=\"Deletes the user from the team. <br>This action cannot be undone.\">\r\n                        <Button className=\"Button--red\" onClick={deleteUser}>Delete user</Button>\r\n                    </SettingGroup>\r\n                ) : \"\"}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default UserPage;","import \"./TodoTable.css\";\r\nimport TagTab from \"./TagTab\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Fragment } from \"react\";\r\n\r\nconst TagSelectorStrip = ({ tags, onSelectedIndexChanged }) =>\r\n{\r\n\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if (onSelectedIndexChanged)\r\n        {\r\n            if (selectedIndex === 0)\r\n                onSelectedIndexChanged(-1);\r\n            else\r\n                onSelectedIndexChanged(tags[selectedIndex-1].id);\r\n        }\r\n    }, [selectedIndex, onSelectedIndexChanged, tags]);\r\n\r\n    if (tags)\r\n    {\r\n        let tagElements = tags.map((x, i) =>\r\n        {\r\n            return (\r\n                <Fragment key={x.id}>\r\n                    <TagTab\r\n                        selected={selectedIndex - 1 === i}\r\n                        color={x.color}\r\n                        onClick={() => setSelectedIndex(i+1)}>\r\n                        {x.title}\r\n                    </TagTab>\r\n                    {i < tags.length - 1 ? <div className=\"TagSeparator\" /> : \"\"}\r\n                </Fragment>\r\n            );\r\n        });\r\n        return (\r\n            <div className=\"TagTabContainer\">\r\n                <TagTab\r\n                    selected={selectedIndex === 0}\r\n                    onClick={() => setSelectedIndex(0)}>\r\n                    All tasks\r\n                    </TagTab>\r\n                <div className=\"TagSeparator\" />\r\n                {tagElements}\r\n            </div>\r\n        );\r\n    } else\r\n    {\r\n        return;\r\n    }\r\n}\r\n\r\nexport default TagSelectorStrip;","import { useState } from \"react\";\r\nimport NewMessageMultiSelect from \"../messages/NewMessage/NewMessageMultiSelect\";\r\nimport SubmitButton from \"./SubmitButton\";\r\n\r\nconst AddTagToTaskForm = ({ tags, selectedTagIds, onTagsUpdated, todo }) =>\r\n{\r\n\r\n    let options;\r\n    if (tags && selectedTagIds)\r\n    {\r\n        options = tags.map(t =>\r\n        {\r\n            return {\r\n                label: t.title,\r\n                value: t.id,\r\n                tagColor: t.color\r\n            };\r\n        });\r\n    }\r\n\r\n    const selectedOptions = options.filter(x => selectedTagIds.indexOf(x.value) >= 0);\r\n\r\n    const [selectedTagIdList, setSelectedTagIdList] = useState(selectedTagIds);\r\n    const [submitEnabled, setSubmitEnabled] = useState(false);\r\n\r\n    function onChange(f, v)\r\n    {\r\n        setSelectedTagIdList(v);\r\n        setSubmitEnabled(true);\r\n    }\r\n\r\n    function onSubmit(e)\r\n    {\r\n        e.preventDefault();\r\n        console.log(selectedTagIdList);\r\n        onTagsUpdated(todo, selectedTagIdList);\r\n        setSubmitEnabled(false);\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <NewMessageMultiSelect\r\n                name=\"Task tags\"\r\n                changeHandler={onChange}\r\n                options={options}\r\n                defaultOptions={selectedOptions} />\r\n            <SubmitButton\r\n                reducedsize\r\n                hasErrors={!submitEnabled}\r\n                text=\"Update tags\"\r\n            />\r\n        </form>\r\n\r\n    );\r\n}\r\n\r\nexport default AddTagToTaskForm;","import React, { useRef } from \"react\";\r\nimport { useState } from \"react\";\r\nimport ToDoApiUtils from \"../../utils/api/ToDoApiUtils\";\r\nimport GradientButton from \"../buttons/GradientButton\";\r\nimport AddForm from \"./AddForm\";\r\nimport \"./AddUserForm.css\";\r\nimport InputAutocompleteUser from \"./InputAutocompleteUser\";\r\n\r\nconst AssignUserForm = ({ onUserAssigned, submitText, milestoneId, projectId, todo }) =>\r\n{\r\n  const selectedUser = useRef(-1);\r\n  const [unassignButtonVisible, setUnassignButtonVisible] = useState(Boolean(todo.assigneeId));\r\n\r\n  function onUserSelected(field, userId)\r\n  {\r\n    selectedUser.current = userId;\r\n  }\r\n\r\n  function addUserToProject()\r\n  {\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n      ToDoApiUtils.assignTodo(milestoneId, todo.id, selectedUser.current)\r\n        .then(name => \r\n        {\r\n          resolve();\r\n          console.log(selectedUser.current);\r\n          setUnassignButtonVisible(selectedUser.current !== -1);\r\n          if (onUserAssigned)\r\n            onUserAssigned({todo, id: selectedUser.current, name});\r\n        })\r\n        .catch((err) => reject(err));\r\n    });\r\n  }\r\n\r\n  function onUnassigned() {\r\n    selectedUser.current = -1;\r\n    addUserToProject();\r\n  }\r\n\r\n\r\n  let unassignButton;\r\n  if (unassignButtonVisible)\r\n  {\r\n    unassignButton = (\r\n      <GradientButton onClick={onUnassigned}>Unassign</GradientButton>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <AddForm\r\n      tooManyErrorText=\"This user has too many tasks assigned. Mark some as done.\"\r\n      disabled={selectedUser.current === todo.assigneeId??-1}\r\n      hasAutocomplete submitText={submitText}\r\n      postFunction={addUserToProject}\r\n      onAutocompleteSelected={onUserSelected}>\r\n      <p className=\"InputTitle\">Full Name</p>\r\n      <InputAutocompleteUser key={selectedUser} projectId={projectId} name=\"name\" placeholder=\"Harvey Specter\" />\r\n    </AddForm>\r\n    {unassignButton}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AssignUserForm;","import GradientButton from \"../../buttons/GradientButton\"\r\nimport AddTagToTaskForm from \"../../forms/AddTagToTaskForm\"\r\nimport AssignUserForm from \"../../forms/AssignUserForm\"\r\nimport EditableField from \"../EditableField\"\r\nimport SettingGroup from \"../SettingGroup\"\r\n\r\nconst TodoDetail = ({ onCollapseClicked, onMarkAsDoneClicked, onNameUpdated, onUserAssigned, onTagsUpdated, todo, tags, projectId, milestoneId }) =>\r\n{\r\n    let assigneeDescription;\r\n    if (todo.assigneeId)\r\n    {\r\n        const completename = todo.assigneeName + \" \" + todo.assigneeLastname;\r\n        const username = completename.toLowerCase().replace(/ /g, \"\");\r\n        assigneeDescription = `Currently assigned to <a href=\"/settings/users/${todo.assigneeId}/${username}\">${todo.assigneeName} ${todo.assigneeLastname}</a>`;\r\n    } else\r\n    {\r\n        assigneeDescription = \"Currently assigned to no one.\";\r\n    }\r\n    return (\r\n        <div className=\"TodoDetailContainer\">\r\n            <span onClick={onCollapseClicked} className=\"BoldTitle BoldTitle--Smallest ActionButton CloseButton\">Collapse</span>\r\n            <GradientButton\r\n                className=\"MarkAsDoneButton\"\r\n                onClick={() => onMarkAsDoneClicked(todo)}\r\n                reducedsize>\r\n                {todo.done ? \"Unmark as done\" : \"Mark as done\"}\r\n            </GradientButton>\r\n            <SettingGroup name=\"Title\">\r\n                <EditableField\r\n                    value={todo.title}\r\n                    postFunction={p => onNameUpdated(todo, p)}\r\n                    fieldName=\"title\" />\r\n            </SettingGroup>\r\n            <SettingGroup name=\"Assignee\" description={assigneeDescription}>\r\n                <AssignUserForm\r\n                    onUserAssigned={onUserAssigned}\r\n                    submitText={`Assign to task`}\r\n                    projectId={projectId}\r\n                    milestoneId={milestoneId}\r\n                    todo={todo} />\r\n            </SettingGroup>\r\n            <SettingGroup name=\"Tags\" description=\" \">\r\n                <AddTagToTaskForm tags={tags} selectedTagIds={todo.tags.map(x => x.id)} todo={todo} onTagsUpdated={onTagsUpdated} />\r\n            </SettingGroup>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TodoDetail;","import { faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Fragment } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport ToDoApiUtils from \"../../../utils/api/ToDoApiUtils\";\r\nimport Circle from \"../../projects/tags/Circle\";\r\nimport Spinner from \"../../spinner/Spinner\";\r\nimport TodoDetail from \"./TodoDetail\";\r\n\r\nconst TodoTable = ({ tags, projectId, milestoneId, selectedTagId, departmentId }) => \r\n{\r\n    const credentials = useContext(UserCredentials);\r\n    const isProjectManager = credentials.isProjectManager(projectId, departmentId);\r\n\r\n    // selected todo index\r\n    const [selectedIndex, setSelectedIndex] = useState(-1);\r\n    const [todos, setTodos] = useState([]);\r\n    const [addLoading, setAddLoading] = useState(true);\r\n\r\n    const fetchTodos = () =>\r\n    {\r\n        setSelectedIndex(-1);\r\n        ToDoApiUtils.getToDos(milestoneId)\r\n            .then(t => \r\n            {\r\n                setTodos(t);\r\n                setAddLoading(false);\r\n            })\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    const refreshTodos = () =>\r\n    {\r\n        // refresh but no fetch\r\n        setTodos(JSON.parse(JSON.stringify(todos)));\r\n        setAddLoading(false);\r\n    }\r\n\r\n    useEffect(() =>\r\n    {\r\n        fetchTodos();\r\n    }, [milestoneId]);\r\n\r\n\r\n    function addNewTodo()\r\n    {\r\n        setAddLoading(true);\r\n        ToDoApiUtils.createTodo(milestoneId, { title: \"New task\", done: false })\r\n            .then(x =>\r\n            {\r\n                if (selectedTagId !== -1)\r\n                {\r\n                    ToDoApiUtils.setTags(milestoneId, x.id, [selectedTagId])\r\n                        .then(() =>\r\n                        {\r\n                            fetchTodos();\r\n                        })\r\n                        .catch(err => console.error(err));\r\n                }\r\n                else\r\n                {\r\n                    fetchTodos();\r\n                }\r\n            })\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    function markAsDone(todo)\r\n    {\r\n        setAddLoading(true);\r\n        ToDoApiUtils.markToDoAsDone(todo.id, todo.done)\r\n            .then(() => \r\n            {\r\n                todo.done = !todo.done;\r\n                refreshTodos()\r\n            })\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    function deleteTodo(todo)\r\n    {\r\n        if (window.confirm(`Are you sure to delete task \"${todo.title}\"?`))\r\n        {\r\n            setAddLoading(true);\r\n            ToDoApiUtils.deleteTodo(milestoneId, todo.id)\r\n                .then(() =>\r\n                {\r\n                    const idx = todos.indexOf(todos.find(x => x.id === todo.id))\r\n                    todos.splice(idx, 1);\r\n                    refreshTodos();\r\n                })\r\n                .catch(err => console.log(err));\r\n        }\r\n    }\r\n\r\n    function onNameUpdated(todo, p)\r\n    {\r\n        p.id = todo.id;\r\n        return new Promise((resolve, reject) =>\r\n        {\r\n            ToDoApiUtils.updateTitle(milestoneId, p)\r\n                .then(() => \r\n                {\r\n                    todo.title = p.title;\r\n                    refreshTodos();\r\n                    resolve();\r\n                })\r\n                .catch(err => reject(err))\r\n        });\r\n    }\r\n\r\n    function onUserAssigned(updateObject)\r\n    {\r\n        let todo = updateObject.todo;\r\n        todo.assigneeId = updateObject.id;\r\n        todo.assigneeName = updateObject.name;\r\n        todo.assigneeLastname = \"\";\r\n        refreshTodos();\r\n    }\r\n\r\n    function onTagsUpdated(todo, tagIdList)\r\n    {\r\n        ToDoApiUtils.setTags(milestoneId, todo.id, tagIdList)\r\n            .then(x => \r\n            {\r\n                todo.tags = x.tags;\r\n                refreshTodos()\r\n            })\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    function compareTodo(a, b)\r\n    {\r\n        function compareDone(x, y)\r\n        {\r\n            if (x.done === y.done)\r\n                return 0;\r\n            else if (x.done)\r\n                return 1;\r\n            else\r\n                return -1;\r\n        }\r\n\r\n        function compareAssignee(x, y)\r\n        {\r\n            if (x.assigneeId === y.assigneeId)\r\n                return 0;\r\n            else if (x.assigneeId === null)\r\n            {\r\n                return -1;\r\n            }\r\n            else if (y.assigneeId === null)\r\n            {\r\n                return 1;\r\n            } else\r\n            {\r\n                return compareString(x.assigneeName + x.assigneeLastname, y.assigneeName + y.assigneeLastname);\r\n            }\r\n        }\r\n\r\n        function compareString(x, y)\r\n        {\r\n            return x.localeCompare(y);\r\n        }\r\n\r\n        const donecomp = compareDone(a, b);\r\n        if (donecomp !== 0)\r\n            return donecomp;\r\n\r\n        const assigneecomp = compareAssignee(a, b);\r\n        if (assigneecomp !== 0)\r\n            return assigneecomp;\r\n\r\n        const tagcomp = b.tags.length - a.tags.length;\r\n        if (tagcomp !== 0)\r\n            return tagcomp;\r\n\r\n        return compareString(a.title, b.title);\r\n    }\r\n\r\n\r\n    let elements;\r\n    if (todos)\r\n    {\r\n        let arr = todos;\r\n        if (selectedTagId !== -1)\r\n            arr = todos.filter(x => x.tags.map(x => x.id).indexOf(selectedTagId) >= 0);\r\n\r\n        if (selectedIndex === -1)\r\n            arr = arr.sort(compareTodo);\r\n\r\n        // const selectedIndexAfterSort = arr.indexOf(arr.find((x,i) => i === selectedIndex))\r\n\r\n        elements = arr.map((t, i) =>\r\n        {\r\n            let tagElements = t.tags.map(x =>\r\n            {\r\n                return <Circle key={x.color} color={x.color} />;\r\n            });\r\n\r\n            let todoDetail;\r\n            if (i === selectedIndex)\r\n            {\r\n                todoDetail = (\r\n                    <tr>\r\n                        <td colSpan={4}>\r\n                            <TodoDetail\r\n                                todo={t}\r\n                                onCollapseClicked={() => setSelectedIndex(-1)}\r\n                                onMarkAsDoneClicked={markAsDone}\r\n                                onNameUpdated={onNameUpdated}\r\n                                onUserAssigned={onUserAssigned}\r\n                                onTagsUpdated={onTagsUpdated}\r\n                                tags={tags}\r\n                                projectId={projectId}\r\n                                milestoneId={milestoneId} />\r\n                        </td>\r\n                    </tr>\r\n                );\r\n            }\r\n            const completename = t.assigneeName + \" \" + t.assigneeLastname;\r\n            const username = completename.toLowerCase().replace(/ /g, \"\");\r\n            // this could be its own component to be honest\r\n            return (\r\n                <Fragment key={t.id}>\r\n                    <tr>\r\n                        <td className={t.done ? \"DoneTableCell\" : \"\"}><i>{t.done ? \"Done: \" : \"\"}</i>{t.title}</td>\r\n                        <td><Link to={`/settings/users/${t.assigneeId}/${username}`}>{t.assigneeName} {t.assigneeLastname}</Link></td>\r\n                        <td>{tagElements}</td>\r\n                        <td className=\"ActionStrip\">\r\n                            {isProjectManager ? <span onClick={() => setSelectedIndex(i)} className=\"BoldTitle BoldTitle--Smallest ActionButton\">Modify</span> : \"\"}\r\n                            <span onClick={() => markAsDone(t)} className=\"BoldTitle BoldTitle--Smallest ActionButton\">{t.done ? \"Unm\" : \"M\"}ark as done</span>\r\n                            {isProjectManager ? <span onClick={() => deleteTodo(t)} className=\"BoldTitle BoldTitle--Smallest ActionButton\">Remove</span> : \"\"}\r\n                        </td>\r\n                    </tr>\r\n                    {todoDetail}\r\n                </Fragment>\r\n            );\r\n        });\r\n    }\r\n\r\n    return (\r\n        <table className=\"UserList TodoTable\">\r\n            <thead className=\"UserList__thead\">\r\n                <tr>\r\n                    <th>Name</th>\r\n                    <th>Assignee</th>\r\n                    <th>Tags</th>\r\n                    <th>Actions</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {isProjectManager ? (\r\n                    <tr>\r\n                        <td colSpan={4} className=\"AddTodoButton\" onClick={addNewTodo}>\r\n                            <FontAwesomeIcon\r\n                                icon={faPlus}\r\n                                className=\"AddIcon\" />\r\n                        New task\r\n                        {addLoading ? <Spinner green className=\"TodoTable__Spinner\" /> : \"\"}\r\n                        </td>\r\n                    </tr>\r\n                ) : undefined}\r\n                {elements}\r\n            </tbody>\r\n        </table>\r\n    );\r\n};\r\n\r\nexport default TodoTable;","import \"./TodoTable.css\";\r\nimport TagSelectorStrip from \"./TagSelectorStrip\";\r\nimport TagApiUtils from \"../../../utils/api/TagApiUtils\";\r\nimport TodoTable from \"./TodoTable\";\r\nimport { useEffect, useState } from \"react\";\r\nimport ToDoApiUtils from \"../../../utils/api/ToDoApiUtils\";\r\n\r\nconst TodoTableContainer = ({departmentId, milestoneId, projectId}) =>\r\n{\r\n\r\n    useEffect(() =>\r\n    {\r\n        TagApiUtils.getTags(projectId)\r\n        .then(t => setTagList(t))\r\n        .catch(err => console.error(err));\r\n    }, [projectId]);\r\n\r\n    // const [selectedTodoId, setSelectedTodoId] = useState(null);\r\n    const [tagList, setTagList] = useState([]);\r\n    const [selectedTagId, setSelectedTagId] = useState(-1);\r\n\r\n    return (\r\n        <div className=\"TodoTableContainer\">\r\n            <TagSelectorStrip tags={tagList} onSelectedIndexChanged={v => setSelectedTagId(v)} />\r\n            <TodoTable tags={tagList} projectId={projectId} departmentId={departmentId} milestoneId={milestoneId} selectedTagId={selectedTagId} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TodoTableContainer;","import { useEffect } from \"react\";\r\nimport Sticky from \"react-sticky-el\";\r\nimport { useContext, useState } from \"react\";\r\nimport UserCredentials from \"../../../context/UserCredentials\";\r\nimport MilestoneApiUtils from \"../../../utils/api/MilestoneApiUtils\";\r\nimport Button from \"../../buttons/Button\";\r\nimport GoBackButton from \"../../buttons/GoBackButton\";\r\nimport EditableField from \"../EditableField\";\r\nimport SettingGroup from \"../SettingGroup\";\r\nimport TodoTableContainer from \"./TodoTableContainer\";\r\n\r\nconst MilestonePage = ({ match: { params: { projectName, departmentId, projectId, milestoneName, milestoneId } } }) =>\r\n{\r\n\r\n    const credentials = useContext(UserCredentials);\r\n    const isProjectManager = credentials.isProjectManager(projectId, departmentId);\r\n    const [milestone, setMilestone] = useState(null);\r\n\r\n    const projname = projectName.replace(/-/g,\" \");\r\n    const milename = milestoneName.replace(/-/g,\" \");\r\n\r\n    function fetchMilestone()\r\n    {\r\n        MilestoneApiUtils.getMilestoneById(projectId, milestoneId)\r\n        .then(m => setMilestone(m))\r\n        .catch(err => console.error(err));\r\n    }\r\n    useEffect(() =>\r\n    {\r\n        fetchMilestone();\r\n    }, [projectId, milestoneId]);\r\n\r\n    function onAttributeUpdated(m)\r\n    {\r\n        m.id = milestoneId;\r\n        m.name = m.name ?? milestone.name;\r\n        m.dueFor = m.dueFor ?? milestone.dueFor;\r\n        return new Promise((resolve, reject) =>\r\n        {\r\n            MilestoneApiUtils.createMilestone(projectId, m)\r\n            .then(() =>\r\n            {\r\n                fetchMilestone();\r\n                resolve();\r\n            })\r\n            .catch(err => reject());\r\n        });\r\n    }\r\n\r\n    function deleteMilestone()\r\n    {\r\n        if (window.confirm(\"Are you sure to delete this milestone and associated tasks?\"))\r\n        {\r\n            MilestoneApiUtils.deleteMilestone(milestoneId)\r\n            .then(() => window.location.replace('/settings/projects'))\r\n            .catch(err => console.error(err));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Sticky\r\n            boundaryElement=\".Section\"\r\n            topOffset={-90}\r\n            stickyStyle={{ transform: 'translateY(90px)', zIndex: 3 }}>\r\n                <div className=\"ProfileHeader ProfileHeader--Slim\">\r\n                    <GoBackButton darker anchored />\r\n                    <div className=\"ProfileTitleContainer\">\r\n                        <h3 className=\"TinyTitle\">{projname}</h3>\r\n                        <h1 className=\"BigTitle BigTitle--Slim\">{milestone?.name??milename}</h1>\r\n                    </div>\r\n                </div>\r\n            </Sticky>\r\n            <div className=\"SettingGroupsContainer\">\r\n                <SettingGroup name=\"Name\">\r\n                    <EditableField editable={isProjectManager} value={milestone?.name??milename} postFunction={onAttributeUpdated} fieldName=\"name\" />\r\n                </SettingGroup>\r\n                <SettingGroup name=\"Due by\">\r\n                    <EditableField editable={isProjectManager} inputType=\"date\" value={milestone?.dueFor} postFunction={onAttributeUpdated} fieldName=\"dueFor\" />\r\n                </SettingGroup>\r\n                <SettingGroup name=\"Tasks\" description=\" \">\r\n                    <TodoTableContainer departmentId={departmentId} projectId={projectId} milestoneId={milestoneId} />\r\n                </SettingGroup>\r\n                {isProjectManager ? (\r\n                    <SettingGroup name=\"Delete milestone\" description=\"Deletes the milestone and associated tasks from the team.\">\r\n                        <Button className=\"Button--red\" onClick={deleteMilestone}>Delete milestone</Button>\r\n                    </SettingGroup>\r\n                ) : \"\"}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default MilestonePage;","import React from 'react';\r\nimport Section from \"./Section\"\r\nimport SettingsSidebar from \"../components/sidebar/SettingsSidebar\"\r\nimport ProfileHeader from '../components/profile/ProfileHeader';\r\nimport { Redirect, Route, Switch, useLocation } from \"react-router-dom\";\r\nimport TeamSettings from '../components/settings/team/TeamSettings';\r\nimport UserSettings from '../components/settings/users/UserSettings';\r\nimport DepartmentSettings from \"../components/settings/department/DepartmentSettings\";\r\nimport ProjectSettings from '../components/settings/project/ProjectSettings';\r\nimport UserPage from '../components/settings/users/UserPage';\r\nimport MilestonePage from '../components/settings/milestone/MilestonePage';\r\nimport { useContext } from 'react';\r\nimport UserCredentials from '../context/UserCredentials';\r\nimport Spinner from '../components/spinner/Spinner';\r\n\r\n\r\nconst PATHS = [\"/settings/team\", \"/settings/departments\", \"/settings/projects\", \"/settings/users\"];\r\n\r\nconst Settings = () =>\r\n{\r\n    const credentials = useContext(UserCredentials);\r\n    const location = useLocation();\r\n\r\n    if (credentials.isTeamManager === undefined)\r\n        return (\r\n            <div className=\"Content\">\r\n                <SettingsSidebar />\r\n                <Section className=\"Section--Lighter\">\r\n                    <div className=\"SettingGroupsContainer\">\r\n                        <Spinner />\r\n                    </div>\r\n                </Section>\r\n            </div>\r\n        );\r\n\r\n    if (credentials.isTeamManager !== undefined && location.pathname.indexOf(\"/settings\") >= 0 && PATHS.indexOf(location.pathname) === -1\r\n        && !(location.pathname.indexOf(\"/settings/projects\") >= 0 || location.pathname.indexOf(\"/settings/users\") >= 0))\r\n        {\r\n            if (credentials.isTeamManager)\r\n            {\r\n                return <Redirect to=\"/settings/team\" />\r\n            } else\r\n            {\r\n                return <Redirect to=\"/settings/projects\" />\r\n            }\r\n        }\r\n\r\n    return (\r\n        <div className=\"Content\">\r\n            <SettingsSidebar />\r\n            <Section className=\"Section--Lighter\">\r\n                <ProfileHeader\r\n                    src=\"/default_pfp.png\"\r\n                    role={credentials.getRoleName()}\r\n                    name={credentials.user.name + \" \" + credentials.user.lastname} />\r\n                <Switch>\r\n                    <Route path=\"/settings/team\">\r\n                        <TeamSettings />\r\n                    </Route>\r\n                    <Route path=\"/settings/departments\">\r\n                        <DepartmentSettings />\r\n                    </Route>\r\n                    <Route path=\"/settings/users/:userId/:userName\" component={UserPage} />\r\n                    <Route path=\"/settings/projects/:departmentId/:projectName/:projectId/:milestoneName/:milestoneId\" component={MilestonePage} />\r\n                    <Route path=\"/settings/projects\">\r\n                        <ProjectSettings />\r\n                    </Route>\r\n                    <Route path=\"/settings/users\">\r\n                        <UserSettings />\r\n                    </Route>\r\n                </Switch>\r\n            </Section>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;","import React, { useState } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport Header from \"./components/header/Header\";\r\nimport ScrollToTop from \"./components/routing/ScrollToTop\";\r\nimport UserCredentialsProvider from \"./context/UserCredentialsProvider\";\r\nimport Inbox from \"./sections/Inbox\";\r\nimport \"./sections/Section.css\";\r\nimport Settings from \"./sections/Settings\";\r\n\r\nconst MainPage = () =>\r\n{\r\n  const [search, setSearch] = useState(\"\");\r\n  return (\r\n    <Router>\r\n      <ScrollToTop />\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <Header handleSearch={setSearch} />\r\n          <Inbox search={search} setSearch={setSearch} />\r\n        </Route>\r\n        <Route path=\"/settings\">\r\n          <Header nosearchbar />\r\n          <UserCredentialsProvider>\r\n            <Settings />\r\n          </UserCredentialsProvider>\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default MainPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport LoginPage from \"./components/Auth/LoginPage\";\r\nimport MainPage from \"./MainPage\"\r\nimport \"./sections/Section.css\";\r\nimport \"./App.css\";\r\nimport AuthApiUtils from \"./utils/api/AuthApiUtils\";\r\n\r\nfunction App()\r\n{\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [hasLoaded, setHasLoaded] = useState(false);\r\n\r\n  useEffect(() =>\r\n  {\r\n    if (!isLoggedIn && !hasLoaded)\r\n    {\r\n      AuthApiUtils.islogged()\r\n        .then(() =>\r\n        {\r\n          setIsLoggedIn(true);\r\n          setHasLoaded(true);\r\n        })\r\n        .catch(() =>\r\n        {\r\n          setIsLoggedIn(false);\r\n          setHasLoaded(true);\r\n        });\r\n    }\r\n  });\r\n\r\n  let page;\r\n  if (hasLoaded)\r\n  {\r\n    if (isLoggedIn)\r\n    {\r\n      page = <MainPage onLoginChanged={setIsLoggedIn} />;\r\n    }\r\n    else\r\n    {\r\n      page = <LoginPage onLoginChanged={setIsLoggedIn} />;\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {page}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}